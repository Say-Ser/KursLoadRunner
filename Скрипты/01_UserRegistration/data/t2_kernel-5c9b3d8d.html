var globalLeft="left",g_ashsC,g_hsSetup;define("dir.tokens",{ltr:globalLeft=="left",left:"left",paddingLeft:"padding-left",paddingRight:"padding-right",marginLeft:"margin-left",marginRight:"margin-right"});define("trackingHelper.tokens",{tradeDoublerMarketId:"2811333",tradeDoublerProgramId:"270367",tradeDoublerAjaxUrlFormat:"{0}/{2}/{1}/tduidajax?epi={3}"});define("jqBehavior",["jquery","viewport"],function(n){return function(t,i,r){function u(n){var t=n.length;return t>1?function(){for(var i=0;i<t;i++)n[i]()}:t?n[0]:f}function f(){}if(typeof t!="function")throw"Behavior constructor must be a function";if(i&&typeof i!="object")throw"Defaults must be an object or null";if(r&&typeof r!="object")throw"Exclude must be an object or null";return r=r||{},function(f,e,o){function c(n){n&&(typeof n.setup=="function"&&l.push(n.setup),typeof n.teardown=="function"&&a.push(n.teardown),typeof n.update=="function"&&v.push(n.update))}var h;if(o&&typeof o!="object")throw"Options must be an object or null";var s=n.extend(!0,{},i,o),l=[],a=[],v=[],y=!0;if(r.query){if(typeof f!="string")throw"Selector must be a string";c(t(f,s))}else h=n(f,e),r.each?c(t(h,s)):(y=h.length>0,h.each(function(){var i=n(this);c(t(i,r.data?s:n.extend(!0,{},s,i.data?i.data():{})))}));return y?{setup:u(l),teardown:u(a),update:u(v)}:null}}});define("telemetry.constants",{logSamplingRate:"0",FireTelemetry:"fireTelemetryBeacon",GET:"GET",POST:"POST",Ctag:"ctag",Comscore:"scorecard",OTF:"udc",Exp:"EX:",ResetIdx:"resetTelemetryEventIndex"});define("afire",["image"],function(n){return function(t){if(t){var i=new n;i.onload=i.onerror=function(){i.onload=i.onerror=null};i.src=t.replace(/&amp;/gi,"&")}}});define("track.generic",["track","extend","trackInfo","telemetry.constants","mediator"],function(n,t,i,r,u){function f(n){this.defaultOpts=t(!0,{},e,n);this.samplingRate=this.defaultOpts.samplingRate}var e={base:"",samplingRate:100,eventAlias:{submit:"click",mouseenter:"click",mouseleave:"click",click_nonnav:"click",mouseenter_nav:"click",contextmenu:"click"}};return f.prototype={getEventTrackingUrl:function(t){var f=this.defaultOpts,e;if(t||(t=(i.event||{}).type),e=f[t],!e&&f.eventAlias&&(e=f[f.eventAlias[t]]),e){var o=f.base+(e.url?e.url:""),s=n.mapTelemetryParams(f.common,f.commonMap,e.param,e.paramMap),h={url:o,requestType:r.GET,eventType:t,params:s,trackingType:f.id};i.shouldFireTelemetry()&&u.pub(r.FireTelemetry,h)}return""},getPageViewTrackingUrl:function(){return this.getEventTrackingUrl("impr")}},f});define("visibility",["window","document"],function(n,t){function f(){function r(){var r,u;if(t){for(r=[],u=0;u<n.length;u++)try{n[u](i)}catch(f){r.push(f)}if(n=[],r.length)throw r;}}function u(){t=!0;i=arguments;r()}function f(){return{then:function(t){n.push(t);r()},always:function(){return this.then(arguments)}}}var n=[],t=!1,i=null;return{promise:f,resolve:u}}function h(){var r=["webkit","moz","ms","o"],n,i;if(typeof t.hidden!="undefined")return"hidden";for(n=0;n<r.length;n++)if(i=r[n]+"Hidden",i in t)return i}function u(){return i?t[i]:!1}function s(){u()?(r=new f,e=!0):r.resolve()}function c(){return e?1:0}function l(n){var i={top:0,bottom:0},r=t.getElementById(n),u;return r&&(u=r.getBoundingClientRect(),i.top=u.height||0),i}function a(i,r,f,e,o,s){var l,a,v,h,c,p,w;if(u()||!i)return!1;if(e=e||n.innerHeight,r=r||n.innerWidth,f||f===0||(f=0,l=t.getElementById("content"),l&&(a=l.getBoundingClientRect(),r=a.right,f=a.left)),v=!1,define.is("jquery")&&n.jQuery&&i instanceof n.jQuery){if(!i.length)return!1;i=i[0]}return h=i.getBoundingClientRect(),c=(h.top>=0||h.bottom>=0)&&(h.top<e||h.bottom<e),c&&o&&(p=y(h,e,s),c=p>=o),w=(h.left>=f||h.right>f)&&(h.left<r||h.right<=r),v=h.height!==0||h.width!==0,v&&c&&w}function v(){return r.promise()}function y(n,t,i){var f=0,e=0,o=l(i),r,u;return o&&(e+=o.top||0,t-=o.bottom||0),n.top<e&&(r=n.bottom-e,r=r<0?0:r,f=n.height-r),n.bottom>t&&(u=n.height-n.bottom+t,u=u<0?0:u,f+=n.height-u),Math.floor((n.height-f)*100/n.height)}var r=new f,i=h(),e=!1,o;return i&&(o=i.replace(/[H|h]idden/,"")+"visibilitychange",t.addEventListener(o,s)),s(),{isHidden:u,notifyWhenPageVisible:v,isElementTrulyVisible:a,wasBrowserHiddenAtLeastOnce:c}});define("trackInfo",["dom","pageInstance","getCookie","screen","window","document","viewAware","deviceGroup","logging","visibility","extend","requestPageRevealCallback","headData","perfMarker","evaluate","telemetry.constants","mediator","telemetryDataTypes"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b){function lt(n,t){this.element=n;this.visible=t;this.visible&&(this.compress=function(){var n=this.element.getAttribute("data-m");try{return JSON.parse(n)}catch(t){return n}})}function ht(){ft=u.innerWidth||f.documentElement.clientWidth;et=u.innerHeight||f.documentElement.clientHeight}function at(){return u.innerHeight||f.documentElement.clientHeight||f.body.clientHeight||0}function vt(){return u.pageYOffset||f.body.scrollTop||f.documentElement.scrollTop||0}function yt(){return Math.max(f.body.scrollHeight||0,f.documentElement.scrollHeight||0,f.body.offsetHeight||0,f.documentElement.offsetHeight||0,f.body.clientHeight||0,f.documentElement.clientHeight||0)}function pt(){var n={};return u&&u.adsEnabled!=null&&(n.adoni=+u.adsEnabled),n}function wt(n,t,i){return i?t?[t,i].join(n):i:t}function ct(n,t,i){var s,u,h,e,l,r,o;if(!i)return t?t:"";if(!t)return i?i:"";var f={},c=!1,a=i.split(n);for(s=0;s<a.length;s++)if(u=a[s].split(":"),u[0]){if(!c&&u[0]&&t.indexOf(u[0])!=-1){for(h=t.split(n),e=0;e<h.length;e++)h[e]&&(l=h[e].split(":"),f[l[0]]=l[1]);c=!0}f[u[0]]=u[1]}r="";for(o in f)o&&(r!==""&&(r+=n),r+=o,f[o]&&(r+=":"+f[o]));return!c&&t&&(r=r?r+n+t:t),r}var bt=n.attr,kt=n.parent,d,ut,ft,et,g,tt=[0,0],st=!0,ot={},it=[],rt="",nt={},k={notrack:"notrack",cmSeparator:">",defaultModule:"body",defaultFormHeadline:"[form submit]",piitxt:"data-piitxt",piiurl:"piiurl",wrapperId:"wrapper",MUIDCookie:"MUID",gestureKey:"touch_gesture",gestureType:{tap:"tap",rightclick:"rightclick"},eventTypes:{click:"click",nonNavClckEvt:"click_nonnav",submit:"submit",contextmenu:"contextmenu",mouseenter:"mouseenter",imprUpdate:"impr_update",adPlay:"AdPlay",contentPlay:"ContentPlay",videoClickNonNav:"Click_Non-nav"},imprUpdateMechanisms:{load:"load",scroll:"scroll",auto:"auto",tap:"tap",resize:"resize",swipe:"swipe",partial:"partial",view:"view"},event:{},sitePage:{},userStatic:{},overrideClientParams:{},persistOverriddenParams:!1,customTags:pt()||{},trackingDisabled:!1,shouldFireTelemetry:function(){return!this.trackingDisabled},getCurrentTime:function(){return+new Date},timeToInteract:function(n){var t;return t=n?n:k.getCurrentTime(),t&&u.performance&&u.performance.timing&&u.performance.timing.navigationStart?t-u.performance.timing.navigationStart:void 0},telemetryModuleTypes:{Undefined:0,Header:1,Footer:2,topNavBar:3,navBar:4,dropDown:5,Section:6,Carousel:7,Module:8,searchBox:9,inputBox:10,actionButton:11,Interaction:12,Headline:13,Navigation:14,Entity:15,structuredData:16,appStore:17,appLaunch:18,cmsPromotions:19,microsoftWebStore:20,xboxStore:21,officeStore:22,appInstall:23,PartnerLinks:24,SponsoredContent:25},contentPlacedBySource:{Editorial:0,PersonalizationAlgo:1,BingAlgo:2,Taboola:3,Outbrain:4},telemetryDataAttribute:"data-m",telemetryHLAttribute:"data-hl",client:{clientId:function(){return d||d===""||(d=i(k.MUIDCookie)||k.sitePage.requestId||""),d},clientIdType:function(){return d===k.sitePage.requestId?ut="activityId":d!==""&&(ut="muid"),ut},getMuid:function(){return i(k.MUIDCookie)},getAnonCookieName:function(){return a.anonckname?a.anonckname:null},getSsoComplete:function(){return a.ssocomplete&&(a.ssocomplete+"").toLowerCase()==="true"?1:0},getAadAuthentication:function(){return a.aadState===!0?1:a.aadState===!1?0:2},OTFTelemetry:function(n){require(["binding","c.deferred"],function(){var t,o,s,h,c,l,r,e,i;typeof n=="undefined"?n=k.imprUpdateMechanisms.load:n==null&&(n="");it=[];t=f.body.querySelectorAll("[data-m]");o=u.innerHeight;s=u.innerWidth;h=0;c=f.getElementById("content");c&&(l=c.getBoundingClientRect(),s=l.right,h=l.left);var v=f.body.querySelector(".ip")||f.body.querySelector(".mip")||f.body.querySelector(".sip"),y=v&&k.telemetryTracking.isVisible(v,s,h,o),a=[];for(r=0;r<t.length;r++)t[r].getAttribute("data-otfUseViewportForVisibility")=="true"?a.push(k.telemetryTracking.isVisible(t[r],u.width,0,o,y)):a.push(k.telemetryTracking.isVisible(t[r],s,h,o,y));for(e=0;e<t.length;e++)it.push(new lt(t[e],a[e]));i=k.telemetryTracking.formatModules();i&&(i.e&&i.e.length>0||i.vc&&i.vc.length>0)&&k.telemetryTracking.sendImprUpdateEvent(n,i)})},height:function(){return et||ht(),et},pageUrl:function(){var n=u.location.href,t=k.sitePage.msnocid,i;return t&&(i=n.indexOf("?")>=0,n=i?n+"&":n+"?",n=n+"ocid="+t),n},referrer:function(){return f.referrerOverride||f.referrer},screenResolution:function(){return[r.width,r.height].join("x")},width:function(){return ft||ht(),ft},viewType:function(){return(o.isTmx||o.isMidlevel)&&!g&&e.listen(function(n){n&e.views.SIZE1COLUMN?g="size1column":n&e.views.SIZE2COLUMN?g="size2column":n&e.views.SIZE3COLUMN?g="size3column":n&e.views.SIZE4COLUMN&&(g="size4column")}),g},frameData:function(){if(u._pageTimings&&u._pageTimings.frameMarkerData)return JSON.stringify(u._pageTimings.frameMarkerData)},wasBrowserHiddenAtLeastOnce:function(){return h.wasBrowserHiddenAtLeastOnce()}},userDynamic:{timeStamp:function(){return k.getCurrentTime()},slideType:function(){for(var t=k.event.target,i="halfpane";t&&n.name(t)!="SECTION";){if(n.name(t)=="LI"&&n.containsClass(t,i))return i;t=n.parent(t)}return null},firstEventIndex:function(){return++tt[0]},currentEventIndex:function(){return st?++tt[0]:++tt[1]},resetEventIndex:function(){tt[1]=0;st=!1}},custom:{addCustomTags:function(){var n=k.customTags;return n=c({},k.customTags,ot),ot={},JSON.stringify(n)},addCustomTagsForClickEvent:function(){var n="",t;if(typeof nt=="object")for(t in nt){n=JSON.stringify(nt);break}return nt={},n}},telemetryTracking:{setupParameters:function(n){var r=k.sitePage,u=k.client.getAnonCookieName(),i={evt:n,rid:t.getActivityId()||r.requestId,di:r.domainId,clid:k.client.clientId(),clidType:k.client.clientIdType(),issso:k.client.getSsoComplete(),aadState:k.client.getAadAuthentication()};return u&&(i.anoncknm=u),k.sitePage.frontDoor&&(i.afd=k.sitePage.frontDoor),i["pg.p"]=k.sitePage.page_product,i["pg.t"]=k.sitePage.page_type,i["pg.n"]=k.sitePage.page_name,i["pg.c"]=k.sitePage.page_configuration,i},sendImprUpdateEvent:function(n,t,i){if(t!=undefined&&(!(t.e==undefined||t.e.length<=0)||!(t.vc==undefined||t.vc.length<=0))){var r=this.setupParameters(k.eventTypes.imprUpdate);r&&(r.mech=n,r.winht=at(),r.docht=yt(),r.scrollOff=vt(),r.wbh=h.wasBrowserHiddenAtLeastOnce(),r.e1=t,r.tmpl=k.sitePage.templ,r.mkt=k.sitePage.localeCode,n===k.imprUpdateMechanisms.scroll&&(r.TTI=k.timeToInteract()),u&&u.adsEnabled!=null&&(r.adoni=+u.adsEnabled),k.sitePage.feedId&&(r.fid=k.sitePage.feedId,r.fn=k.sitePage.feedName,r.ft=k.sitePage.feedType),k.sitePage.flightid&&(r.flightid=k.sitePage.flightid),i&&(r.tlcType=i),this.sendUpdate(r))}},isVisible:function(n,t,i,r){return n?h.isElementTrulyVisible(n,t,i,r):!1},formatModules:function(){var t=[],f,i,n,r,u;for(f in it)i=it[f],i&&i.compress&&(n=i.compress(),n&&n.y&&!n.ct&&(r=b.getTelemetryContentType(n.y),r&&(n.ct=r)),t.push(n));return u={},t&&t.length>0&&(u.e=t),u},sendUpdate:function(n){l(function(){if(k.shouldFireTelemetry()){if(rt=rt||(k.sitePage||{}).otfURL,!rt){s.error("[telemetryTracking.sendUpdate] BaseUrl was empty or undefined in sitePage.");return}if(n){n.idx=k.userDynamic.currentEventIndex();var t={url:rt,requestType:p.POST,eventType:n.evt||k.eventTypes.impressionUpdate,params:n,trackingType:p.OTF};w.pub(p.FireTelemetry,t)}}})}},updateTemplValue:function(n){k.updateSitePage(n)},updateSitePage:function(n,t,i){var r=k.sitePage,u;r||(r=k.sitePage={});u=r.flightid;t&&(!u||u.indexOf(t)<0)&&(r.flightid=wt(",",u,t));r.templ=ct(";",r.templ,n);i&&(r.requestId=i)},updatePageName:function(n,t){var r=t,i;t===undefined&&(r=!0);i=new b.getTelemetryPageInfo(n);i&&k.sitePage&&(k.sitePage.page_name=i.PageName,r&&(k.sitePage.page_type=i.PageType))},updateFeedMetadata:function(n,t,i){n&&(k.sitePage.feedId=n,t&&(k.sitePage.feedName=t),i&&(k.sitePage.feedType=i))},updatePagePivot:function(n){n===b.TelemetryPagePivot.Undefined?k.sitePage.pagePivot=null:b.validateTelemetryDataType(b.TelemetryPagePivot,n)&&(k.sitePage.pagePivot=n)},updateReferrer:function(n,t){n&&(f.referrerOverride=n,t&&b.validateTelemetryDataType(b.TelemetryContentType,t)&&t!=b.TelemetryContentType.Undefined&&(k.sitePage.referrerType=t))},setCustomTagsForClickEvent:function(n,t){n&&t&&t!=undefined&&(nt[n]=t)},updatePageUserTypeAndUserId:function(n,t){k.sitePage.pageUserId=null;k.sitePage.pageUserType=null;b.validateTelemetryDataType(b.TelemetryUserType,n)&&(k.sitePage.pageUserType=n,t&&(k.sitePage.pageUserId=t))},trackCustomProperty:function(n,t){n&&t!=undefined&&(n=n.toLowerCase(),ot[n]=t)},updateExtendedFlightId:function(n,t){var i=k.sitePage;i&&t&&n&&b.validateTelemetryDataType(b.TelemetryPartnerNamespace,n)&&(i.extflightid=ct("|",i.extflightid,n+":"+t))}};return k});define("c.track.mobi",["track","trackInfo","pageInstance","screen","navigator","dom","events","document","window"],function(n,t,i,r,u,f,e,o,s){function v(i,r,u,f,e,o,s,h){if(i){i[t.gestureKey]=r;u=u&&u.length>0?u:l;var c=n.createEvent(null,u,i);n.trackEvent(c,i,f,e,o,s,h)}}var l="click_nonnav",h=!1,c=0,a=1e3;return n.extend({client:{orientation:function(){return r.width>r.height?"landscape":"portrait"},userAgent:function(){return u.userAgent},pageTitle:function(){return o.title},gesture:function(){var n=f.getTarget(t.event);if(n&&n[t.gestureKey])return n[t.gestureKey];if(t.event){if(t.event.originalEvent&&t.event.originalEvent=="contextmenu"||t.event.ctrlKey||t.event.shiftKey)return t.gestureType.rightclick;if((t.event.type=="click"||t.event.type=="click_nonnav"||t.event.type=="submit")&&h==!0&&t.sitePage.device)return t.gestureType.tap}return""}},userDynamic:{requestId:function(){var n=i.getActivityId()||t.sitePage.requestId;return n?n:s.console&&console.error("No requestID passed in from the server or generated via guidGen.js, please check the trackInfo.sitePage.requestId or pageInstance.js")}}}),u.pointerEnabled||u.msPointerEnabled?e.bind(o,u.pointerEnabled?"pointerup":"MSPointerUp",function(n){h=n.pointerType==n.MSPOINTER_TYPE_TOUCH||n.pointerType=="touch"?!0:!1}):(e.bind(o,"mouseup",function(){var n=(new Date).getTime();n>c+a&&(h=!1)}),e.bind(o,"touchend",function(){h=!0;c=(new Date).getTime()})),n.trackGesture=v,1});define("track",["trackInfo","extend","dom","getCookie","setCookie","events","window","document","mediator","navigation","headData","pageInstance","evaluate","trackingHelper","webStorage","telemetry.constants","requestPageRevealCallback","telemetryDataTypes"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b){function nt(n){for(var t,f,o,r,c,i,s=h.getParamsFromUrl(e.location.href),u=0;u<d.length;u++){if(i=d[u],t=i.defaultOpts,t.disableOnAutoRefresh){for(f=t.disableOnAutoRefresh.split(";"),o=!1,r=0;r<f.length;r++)if(f[r]==t.id){o=!0;break}if(o&&s.AR){t.isGeneratedEarly=!1;continue}}t.isGeneratedEarly?t.isGeneratedEarly=!1:i&&(c=i[n]())}}function ci(t){if(t){var i=t.errId+t.errSource,r=y.getItem(i,!0),u=(new Date).getTime();r&&u-r<=ei||(n.event={type:"app_error"},n.report=t,fi(JSON.stringify(t),!t.isInfo),nt("getEventTrackingUrl"),y.setItem(i,u,!0))}}function ht(n,t,i){var u=ft(n)||[],r=0,f;for(t=t||"alt";r<u.length;r++)if(f=k(u[r],t)||ht(u[r],t,i),f&&!(i==u[r].localName))return f}function pt(t){if(t){var u=it(t),i=k(u,"id"),r;return n.wrapperId==i?void 0:(r=pt(u),r&&i)?[r,i].join(n.cmSeparator):i||r}}function wt(n){if(n){var u=it(n),i,t=0,r=0;if(!k(u,"id"))if(t=wt(u),t)t--;else return 0;for(i=ft(u)||[];r<i.length;r++){if(i[r]==n){t++;break}t+=bt(i[r])}return t}}function bt(t){var i=0,r=0,u;if(t&&!k(t,"id"))for(u=ft(t)||[],k(t,"href")&&!k(t,n.notrack)&&i++;r<u.length;r++)i+=bt(u[r]);return i}function ct(n,t,i){var u,r,e,f;if(i&&n&&t){if(n.tagName==t)return n;for(u=ft(n)||[],r=0,e=u.length;r<e;r++){if(u[r].tagName==t)return u[r];if(f=ct(u[r],t,i-1),f)return f}}return null}function li(n){var i,r,t,u;if(n)for(r="getPageViewTrackingUrl",t=0;t<d.length;t++)if(i=d[t],i.defaultOpts.id===n){u=i[r]();break}}function ai(){var i=e.location.protocol+"//"+e.location.host+"/pv.xml",t;n.shouldFireTelemetry()&&(t={url:i,requestType:p.GET,trackingType:p.Comscore},s.pub(p.FireTelemetry,t))}function vi(t){n.event={type:"adimpr_update"};var i=parseInt(t.w),r=parseInt(t.h);n.report={dst:t.dst,den:t.den,id:t.id,pg:t.pg,w:isNaN(i)?0:i,h:isNaN(r)?0:r,status:t.status,anAd:t.anAd,seqid:t.seqid,sdk:t.sdk,fen:t.fen,oAsid:t.oAsid};nt("getEventTrackingUrl")}function yi(t){n.event={type:"ad_feedback"};n.report={creativeId:t.creativeId,provId:t.adProvider,tag:t.feedbackTag,title:t.adTitle,lineage:t.lineage};nt("getEventTrackingUrl")}function pi(n){var u;if(n){if(n.reportingType||(n.reportingType=0),n.ignorePV&&y.setItem(st,1,!0),!n.forcedDispatch){var t=n.errId,i=y.getItem(t,!0),r=(new Date).getTime();if(i&&r-i<=hi)return}u=function(){wi(n);nt("getEventTrackingUrl");n.forcedDispatch||y.setItem(t,r,!0)};u()}}function wi(t){var i;n.event={type:"app_error"};i=n.report={errId:t.errId,errMsg:t.errMsg,errSource:t.errSource,reportingType:t.reportingType,ignorePV:t.ignorePV,pb:t.pb};fi(JSON.stringify(t),!t.isInfo)}function kt(t,i,r,u,f,e,s){function h(){return(!i&&t&&(i=t.target),!i||k(i,n.notrack))?!1:i.id==="srchfrm"}function c(){var n=o.getElementById("q");if(n)return n.value}h()&&(u=c());tt(t,i,r,u,f,e,s)}function tt(t,r,u,f,e,o,s){var l,d,g,tt,st,rt,ft,c,et,v,p,w,ot;if(!r&&t&&(r=t.target),r&&!k(r,n.notrack)){r.jquery&&(r=r[0]);t=t||{};t.customHandled=!0;t.target=r;n.event=t;l=r.href||k(r,"href");l=="#"&&(l=r.href);u=u||k(r,n.piiurl)||l||k(r,"action")||"";d=k(r,"data-hl")||"";f||d||(g=ct(r,"H4",2)||ct(r,"H3",2),g&&(f=i.text(g)));tt=r instanceof HTMLAnchorElement?r.querySelector(".title"):"";!f&&tt&&(f=i.text(tt));typeof f!="string"&&(f=d||k(r,n.piitxt)||("FORM"==at(r)?n.defaultFormHeadline:k(r,"title")||ht(r,"title","img")||i.text(r)||k(r,"alt")||ht(r,"alt")||""));f.trim!=undefined&&(f=f.trim());e=e||pt(r)||n.defaultModule;o=o||(k(r,"id")?1:wt(r));st=r.className||k(r,"class");s=s||(/GT1-(\d+)\b/i.exec(st)?RegExp.$1:"")||(/[?&]GT1=(\d+)\b/i.exec(l)?RegExp.$1:"");var y="",lt="",vt="",yt=n.cmSeparator,bt;if(t&&(t.type==n.eventTypes.click||t.type==n.eventTypes.nonNavClckEvt||t.type==n.eventTypes.submit||t.type==n.eventTypes.contextmenu||t.type==n.eventTypes.mouseenter)){rt="data-m";y=k(r,rt);y||(ft=it(r),y=ft?k(ft,rt):"");try{c=a(y);c&&c.y&&!c.ct&&(et=b.getTelemetryContentType(c.y),et&&(c.ct=et));c&&c.y&&(p=b.getTelemetryBehavior(c.y));t.originalEvent===n.eventTypes.contextmenu?(v=b.TelemetryActionType.RightClick,p=b.TelemetryBehaviorType.ContextMenu):t.type===n.eventTypes.click?(v=b.TelemetryActionType.Click,p=b.TelemetryBehaviorType.Navigate):t.type===n.eventTypes.nonNavClckEvt?v=b.TelemetryActionType.Click:t.type===n.eventTypes.submit&&(v=b.TelemetryActionType.Submit)}catch(kt){c=null}w=rr(r);w&&(lt=w.nameLineage.reverse().join(yt),vt=w.ordinalLineage.reverse().join(yt));bt=t.time}ot=h.getHostName(u);ot&&ot.toLowerCase().indexOf("bing.com")>-1&&(u=ut.filterUrlParams(u,["q","pq"]),f="");n.report={destinationUrl:u,headline:f,contentModule:e,contentElement:o,campaignId:s,jsonModule:c,sourceIndex:r.sourceIndex||"",nodeName:r.nodeName||"",nLineage:lt,oLineage:vt,timeToInteract:n.timeToInteract(bt),actionType:v,behaviorType:p};nt("getEventTrackingUrl")}}function bi(t,i){var u,f,e,r,k,a,d,w,g;i=!!i;delete n.event;delete n.userStatic.requestId;delete n.overrideClientParams;u="pg.n";f=t&&t[u];f&&(e="pg.t",r=new b.getTelemetryPageInfo(f),r&&(t[u]=r.PageName,k=t[e],a=b.validateTelemetryDataType(b.TelemetryPageType,k),t[e]=a?a:r.PageType===b.TelemetryPageType.Unspecified?n.sitePage.page_type:r.PageType));d=y.getItem(st);d&&(y.removeItem(st,!0),(t=t||{}).ar=1);n.overrideClientParams=t;n.persistOverriddenParams=i;w=v.modifyValuesForTrackPage();w&&w.preventComscore&&ut.preventBeacon(p.Comscore);c&&c.clientSettings&&c.clientSettings.static_page&&(g=n.sitePage.requestId=l.getActivityId(),n.sitePage.isStaticPage="True",require(["c.deferred"],function(){var i=o.body.querySelector("#maincontent"),t,r,n;if(i)for(t=i.querySelectorAll("a[href*='.bing.com']"),r=t.length,n=0;n<r;n++)t[n].href=h.mergeQueryStringParams(t[n].href,{refig:g})}));nt("getPageViewTrackingUrl");vt?s.pub("pageView"):(vt=1,s.pub("pageViewOnLoad"));delete n.overrideClientParams}function ki(n){var i=[],r,t;if(n&&n.querySelectorAll)for(r=n.querySelectorAll("[data-m]"),k(n,"data-m")&&i.push(n),t=0;t<r.length;t++)i.push(r[t]);return i}function dt(n,t){var i=k(n,t);if(i)try{return a(i)}catch(r){return null}return null}function gt(n,t){if(t.indexOf)return t.indexOf(n)!==-1;for(var i=0;i<t.length;i++)if(t[i]===n)return!0;return!1}function di(t,i,r,u){var c,o,s,l,f,h,a,e,v;if(t){for(t.jquery&&(t=t[0]),c=ki(t),o=[],s=0;s<c.length;s++)(l=c[s],!i||n.telemetryTracking.isVisible(l))&&(f=dt(l,"data-m"),h=f?f.i:undefined,h===undefined||gt(h,ot)||(ot.push(h),o.push(f),f.y&&!f.ct&&(a=b.getTelemetryContentType(f.y),a&&(f.ct=a))));e={};o&&o.length>0&&(e.e=o);e&&e.e&&e.e.length>0&&(v=r?r:n.imprUpdateMechanisms.partial,n.telemetryTracking.sendImprUpdateEvent(v,e,u))}}function gi(){ot=[]}function nr(n){var t=new RegExp(si).exec(n);return t&&t.length&&t[1]||null}function tr(t){var r=null,u,i;return t&&(t.indexOf(yt)==-1?(u=t.substring(0,t.indexOf("#")).toLowerCase(),i=e.location.href.toLowerCase(),(i==u||i.substring(0,i.indexOf("#"))==u)&&(r=n.eventTypes.nonNavClckEvt)):r=nr(t)),r}function lt(n,t,i){var r=null;return g.createEvent?(r=g.createEvent("Events"),r.initEvent(t,!1,!0,i||e,0,0,0,0,0,!1,!1,!1,!1,0,null)):g.createEventObject&&(r=g.createEventObject(n),r.type=t),r&&(r.customTarget=i,r.originalEvent=n&&n.type),r}function ir(n){n.preventDefault?n.preventDefault():n.returnValue=!1}function ni(n){ii(n)}function ti(n){2!=n.button&&ii(n)}function rr(n){for(var i={},r=[],u=[],t;n;)t=dt(n,"data-m"),t&&(t.n&&r.push(t.n),t.o&&u.push(t.o)),n=it(n);return i.nameLineage=r,i.ordinalLineage=u,i}function ur(n){try{if(n&&rt&&rt===n)return!0;rt=n;setTimeout(function(){rt=null},oi)}catch(t){return rt=null,!1}return!1}function ii(t){var r,e,o,s,f,u,h;if(t&&!t.customHandled&&(!t.originalEvent||!t.originalEvent.customHandled)){try{t.time=n.getCurrentTime();t.customTarget&&t.customTarget.useMap&&(t.customTarget=t.customTarget.document.activeElement,t.target=t.customTarget)}catch(c){}for(r=i.getTarget(t);r&&!k(r,"href")&&r.nodeName!="BUTTON"&&r.nodeName!="MENUITEM";)r=it(r);if((!r||!r.hasAttribute||!r.hasAttribute("data-customhandled"))&&(!r||!ur(r))){if(t.customTags&&(e=t.customTags,typeof e=="object"))for(o in e)o&&(s=e[o],s&&s!="undefined"&&n.setCustomTagsForClickEvent(o,s));if(r&&!r.form)if(f=t,t.type==n.eventTypes.contextmenu&&(f=lt(t,n.eventTypes.click,r)),u=r.href,u&&u.length){if(u.indexOf("#")==u.length-1||u.indexOf(yt)>=0)if(t.type==n.eventTypes.click)h=tr(u),h&&(f=lt(t,n.eventTypes.nonNavClckEvt,r));else if(t.type==n.eventTypes.contextmenu)return;f.type==n.eventTypes.nonNavClckEvt&&ir(t);v.addOcidToHref(u,r,f);f.isPropagationStopped||tt(f,r)}else t.type!=n.eventTypes.contextmenu&&tt({type:n.eventTypes.nonNavClckEvt,target:r})}}}function fr(i,r){var f,e;if(i&&i.evt&&n.shouldFireTelemetry()){i.evt===n.eventTypes.videoClickNonNav&&(f=b.TelemetryActionType.Click,e=b.TelemetryBehaviorType.Undefined);i.adid&&(i.adid=i.adid.toString());var u=n.sitePage,o=n.client,h=n.userDynamic,l=n.telemetryTracking.setupParameters(i.evt),a={at:f,bt:e,bh:o.height(),bw:o.width(),cvs:u.canvas,mkt:u.localeCode,"pg.t":u.page_type,"pg.n":u.page_name,rid:u.serverImpressionGuid,"st.dpt":u.department||i["st.dpt"]||"watch","st.sdpt":u.subDepartment||i["st.sdpt"]||"no-sc",subcvs:u.vertical,flightid:u.flightid,isVideo:!0,idx:r?h.firstEventIndex():h.currentEventIndex()},v=t({},i,l,a),c=ui(v),y={url:u.otfURL,requestType:p.GET,eventType:c.evt,params:c,trackingType:p.OTF,eventSource:"VideoPlayer"};s.pub(p.FireTelemetry,y)}}function er(i){if(i&&n.shouldFireTelemetry()){var u={"feedback.id":i["feedback.id"],"feedback.source":i["feedback.source"],"feedback.area":i["feedback.area"],"feedback.type":i["feedback.type"],"feedback.rating":i["feedback.rating"],submitValue:i.submitValue,userAgent:i.userAgent},r=t(!0,{},u,ri("feedback"));r=ui(r);n.telemetryTracking.sendUpdate(r)}}function ri(i){var u=n.telemetryTracking.setupParameters(i),r=n.sitePage,f={scr:n.client?n.client.screenResolution():"","client.deviceModel":r.d_dgk,pageType:r.page_name,subcvs:r.vertical,cvs:r.canvas,contentid:r.entityId,cu:n.client?encodeURIComponent(n.client.pageUrl()):r.pageUrl,mkt:r.localeCode,flightid:r.flightid,signedin:n.userStatic?n.userStatic.isSignedIn:""};return u!==null&&u!==undefined&&(f=t(!0,{},f,u)),f}function ui(n){var i={};for(var t in n)n[t]!=undefined&&(i[t]=n[t]);return i}function or(n,t){var r,i,u;if(n&&t&&(r=n.split("?"),r.length>1)){var f=r[0]+"?",e=r[1],o=h.getParams(e);if(e){for(i=0;i<t.length;i++)t[i]=t[i].toLowerCase();for(u in o)gt(u.toLowerCase(),t)||(f=f+u+"="+o[u]+"&")}return f.slice(0,-1)}return n}function fi(n,t){var u=new Date,f=u+": "+ +u+" "+n,i=et.console,r;i&&(r=t?i.error:i.log,r&&r.call(i,f))}var k=i.attr,at=i.name,it=i.parent,ft=i.children,d=[],vt,et=e,g=o,ei=3e5,rt=null,oi=500,yt="tevt=",si=/#tevt=([A-Za-z0-9]+_[A-Za-z0-9]+)(;*)/g,ot=[],hi=p.logSamplingRate||3e5,st="forced-page-refresh",ut;return s.sub("logerror",ci),ut={onContextMenu:ni,onClick:ti,trackEvent:tt,trackFormSubmitEvent:kt,trackAdEvent:vi,trackAdFeedbackEvent:yi,trackVideoEvent:fr,trackFeedbackEvent:er,createEvent:lt,sendPageViewCandidate:ai,sendSinglePageViewBeacon:li,clearImpressionCache:gi,getFeedbackTrackingParams:ri,filterUrlParams:or,trackAppErrorEvent:function(n){w(function(){pi(n)})},trackPartialImpression:function(n,t,i,r){w(function(){di(n,t,i,r)})},trackPage:function(n,t){w(function(){bi(n,t)})},trackThirdPartyUpdate:function(){s.pub("thirdPartyTrackingUpdate")},register:function(){for(var t=0,n;n=arguments[t++];)isNaN(n.samplingRate)&&(n.samplingRate=99),d.push(n)},getCurrentPageRequestId:function(){return l.getActivityId()||n.sitePage.requestId||""},mapTelemetryParams:function(i,r,u,f){var l,s,o,e,h,c;u=t({},i,u);f=t(!0,{},r,f);for(l in f)if(h=n[l],h){s=f[l];for(o in s)c=n.overrideClientParams,o&&c&&c[o]!==undefined?(e=c[o],n.persistOverriddenParams&&(h[s[o]]=e)):(e=h[s[o]],typeof e=="function"&&(e=e())),e!=null&&(u[o]=e)}return u},extend:function(i){t(!0,n,i)},form:function(n){n&&n.length||(n=[n]);for(var t,i=0;t=n[i++];)"FORM"!=at(t)||k(t,"data-customformtrack")||f.bind(t,"submit",kt)},preventBeacon:function(n){var t,i;if(n)for(n=n.toLowerCase(),t=0;t<d.length;t++)if(i=d[t].defaultOpts,n===i.id.toLowerCase()){i.isGeneratedEarly=!0;break}}},f.bind(g,"click",ti),f.bind(et,"load",tt),f.bind(et,"unload",tt),f.bind(g,"contextmenu",ni),require(["c.dom"],function(){ut.form(i.getElementsByTagName("form"))}),s.sub("ViewabilityUpdatedEvent",function(t){w(function(){n.client.OTFTelemetry(t)})}),s.sub(p.ResetIdx,n.userDynamic.resetEventIndex),ut});define("elementTrackingDecorator",["trackingConstants","jquery","evaluate","track","window","extend"],function(n,t,i,r,u,f){function v(){n&&n.trackingData&&p(n.trackingData.lastIndex)&&n.trackingData.lastIndex>1?o=n.trackingData.lastIndex:u&&u.console&&u.console.error("Tracking constants were not supplied in DOM.",n)}function b(n){return n&&n.length!==0}function k(n,t){var i=n.closest(e),r=i.length>0?i.eq(0):null,u;r&&n.attr(h)&&(r=i.length>1?i.eq(1):n.parent(e));t&&(!r||r.length===0)&&(i=t.closest(e),r=i.length>0?i.eq(0):null);r&&(u=r.attr(h),u&&p(u)&&(this.p=u))}function d(n,i){n.find(e).each(function(n,r){var f=t(r),u=s(f),o=f.parent(e)[0];o||(o=f.parent().closest(e));i=s(t(o));i&&u&&u.p!=i.i&&(u.p=i.i,y.call(u,!0),c.call(f,u))})}function s(n){var t=n.attr(a);if(t)try{return i(t)}catch(r){return null}return{}}function c(n){n.i&&(this.attr(a,JSON.stringify(n)),this.attr(h,n.i))}function y(n){return this&&(!this.i||n==!0)&&o?(o++,this.i=o,!0):!1}function g(n){var t=n.parent().children();t.length>1?nt.call(t,this,n):this.o=1}function nt(n,i){var r=0;this.each(function(u,e){if(r++,e===i[0])n.o=r;else{var o=t(e),h=f(s(o),{o:r});c.call(o,h)}})}function p(n){return!isNaN(parseFloat(n))&&isFinite(n)}function w(n){var t=n?n.defaults:null;return f({},{n:"client",y:12},t||{})}function l(n,i,r,u,e){var o=t(n),l=s(o),h=f({},r,l),a=y.call(h,e);e||g.call(h,o);k.call(h,o,i);u&&u(o,h);c.call(o,h);a&&d(o,h)}var o=0,a="data-m",h="data-id",e="["+h+"]";return{setTrackingForSingleElement:function(i,u,f,e){var s,h;return v(),s=w(f),l(i,t(u),s,f&&f.elementOverride,f&&f.overrideIndexOnly),n.trackingData.lastIndex=o,e||(h=f&&f.visibilityCheck!=undefined?f.visibilityCheck:!0,r.trackPartialImpression(i,h)),i},setTrackingAttrs:function(i,u,f,e){var k;if(v(),i&&i.find){var s=f&&f.selector||"li",h=i.find(s),c=w(f),a=f?f.elementOverride:null,y=u&&!u.jquery?t(u):u,p=f?f.overrideIndexOnly:!1;i.each(function(n,i){t(i).is(s)&&l(i,y,c,a,p)});b(h)&&(k=t(h),k.each(function(n,t){l(t,y,c,a,p)}))}return n.trackingData.lastIndex=o,e||r.trackPartialImpression(i,!0),i}}});define("trackingHelper",["trackInfo","pageInstance","location","evaluate","displayOptionsHelper","browserAccess","ajax","setCookie","trackingHelper.tokens","format","window","getCookie","telemetryDataTypes"],function(n,t,i,r,u,f,e,o,s,h,c,l,a){function yt(t,i,r){var o,a,u,s,tt,e;if(t&&i){b||(b=n.sitePage.msnocid);y||(y=n.sitePage.storeocid);var v=t.indexOf("://"),p=t.indexOf(ht),w=v>0&&p>=0&&p<v,k=t.match(rt),c=t.match(d),h=k&&k[1],ut=c&&c[1],l;if(h&&ut){o=t;a=t.match(/[&?]ocid=(ems\.)/i);l=a&&a[1];l&&!o.match(/[=_]emsadid\./i)&&(o=it(o.replace(d,""),c[1]));w&&ot(o,r,i);return}if(u=t.indexOf("#"),s="",!h){if(u===t.length-1)return;if(b){var g=ct.exec(t),nt=g&&g[2],f=t;if(nt&&(tt=nt.indexOf(st)>=0,tt)){u>=0&&(s=t.substring(u,t.length),f=t.substring(0,u));f+=f.indexOf("?")>0?"&":"?";f=f+"ocid="+b;i.href=f+(s||"");return}}}(h||y)&&w&&(u>=0&&(s=t.substring(u,t.length),t=t.substring(0,u)),e=t,h||(e+="&ocid="+y),e=it(e,l),i.href=e+s,ot(e,r,i))}}function it(i,r){var h=i.match(d),l=h&&h[1],f=i.indexOf("#"),c="",e,u,o,s;return l?i:(f>=0&&(c=i.substring(f,i.length),i=i.substring(0,f)),e=i,e+="&ccid=",u=[],r&&u.push("emsadid."+r),o=t.getActivityId()||n.sitePage.requestId,o&&u.push("webig."+o),s=n.client.clientId(),s&&u.push("muid."+s),e+u.join("_")+c)}function pt(){var e=!1,t,r,f;return n.sitePage&&(t=!0,u.shouldRenderRiver()?n.sitePage.page_configuration|=v.OneBox|v.TopSites|v.ContentFeed:u.isDisplayOptionSetToBlank()||u.shouldRenderTopSitesOnly()&&n.sitePage.page_type==="dhp"?(t=!1,n.sitePage.page_configuration|=v.OneBox):(u.shouldRenderTopSitesOnly()||n.sitePage.noMsnContent)&&(t=!1,n.sitePage.page_configuration|=v.OneBox|v.TopSites),t||(e=!0)),n.client&&!n.client.personalization&&(f=i.search,f&&/&ntlogo=0/i.test(f)&&(r={srch3P:!0}),r&&(n.client.personalization=JSON.stringify(r))),{preventComscore:e}}function wt(){}function ot(t,u,f){var o,s,c;if((!u||u.originalEvent!=="contextmenu")&&!g){var a=t.match(rt),v=t.match(/[&?]tduid=([^&]+)/i),b=new RegExp(nt,"i");if(a&&a[1]&&(!v||!v[1])&&!b.test(t.match(b))){if(o=y,f.attributes&&f.attributes["data-m"]&&(s=f.attributes["data-m"].value,s&&(o=r(s).n)),p=n.sitePage.page_type+"_"+n.sitePage.localeCode+"_"+n.sitePage.vertical+"_"+o,tt=p,c=l(tt),c){t+=h(ut,c,et,ft,p);f.href=t;return}w=f;w.href=t;u.stopPropagation();u.preventDefault();u.isPropagationStopped=!0;g=!0;i.origin||(i.origin=i.protocol+"//"+i.hostname+(i.port?":"+i.port:""));e.get({url:h(vt,i.origin,n.sitePage.localeCode,n.sitePage.channel,p),dataType:at,success:kt,error:function(n,i){bt("The TradeDoubler ajax call failed: "+i+" Status code: "+n);f.href=t+nt;f.click()}})}}}function bt(n){c.console&&c.console.log&&console.log(n)}function kt(n){n?(o(tt,n,13,o.topDomain,lt),w.href+=h(ut,n,et,ft,p)):w.href+=nt;g=!1;w.click()}function dt(n,t){return t?n+"_succeeded":n+"_failed"}var k=i.host.split(".").reverse(),st=k.length>1?k[1]+"."+k[0]:i.host,ht="ms-windows-store",ct=/[a-z][a-z0-9+\-.]*:\/\/([a-z0-9\-._~%!$&'()*+,;=]+@)?([a-z0-9\-._~%]+|\[[a-z0-9\-._~%!$&'()*+,;=:]+\])/i,rt=/[&?]ocid=([^&]+)/i,d=/[&?]ccid=([^&]+)/i,v=a.TelemetryPageConfiguration,b=n.sitePage.msnocid||"",y=n.sitePage.storeocid||"",g=!1,lt="/",at="text/html",p="",nt="&notduid=true",ut="&tduid=({0})({1})({2})({3})()",tt="",ft=s.tradeDoublerMarketId,et=s.tradeDoublerProgramId,w,vt=s.tradeDoublerAjaxUrlFormat;return{addOcidToHref:yt,modifyValuesForTrackPage:pt,attachTaglineClickHandler:wt,addCcidToStoreUrl:it,getActionResult:dt}});define("otf-telemetryPing",["mediator","telemetry.constants","escape","window","logging","afire"],function(n,t,i,r,u,f){function e(n,t){var f=[],e=n,u,r;if(n&&t){for(u in t)r=t[u],typeof r=="object"&&(r=JSON.stringify(r)),f.push(i.urlPart(u)+"="+i.urlPart(r));e=n+f.join("&").replace(/%20/g,"+")}return e}function o(n,t){var i,r,e;if(t&&JSON&&JSON.stringify){try{i=JSON.stringify([t])}catch(f){u.error("[telemetryTracking.sendUpdate] Error in using JSON.stringify.",f);return}if(i&&i!="[{}]")try{r=!1;e=!1;r&&(!r||e)||s(n,i)}catch(f){u.error("[telemetryTracking.sendUpdate] Error in generating the XDomainRequest or XMLHttpRequest","BaseUrl = "+n,f);return}}}function s(n,t){var i;i=new XMLHttpRequest;i.open("POST",n,!0);i.setRequestHeader("Content-type","application/json; charset=utf-8");i.onreadystatechange=function(){};i.send(t)}return n.sub(t.FireTelemetry,function(n){var r;if(n){var i=n.url,u=n.requestType,s=[t.Ctag,t.Comscore,t.OTF];if(i&&u&&n.trackingType&&s.indexOf(n.trackingType)!=-1){r=n.params;switch(u){case t.GET:i=e(i,r);n.executeOverride?n.executeOverride(i):f(i);break;case t.POST:o(i,r)}}}}),1});define("telemetryDataTypes",function(){function c(n){return n&&o&&(n=n.toLowerCase(),o[n]!==undefined)?o[n]:null}function l(n,t){if(n&&t)for(var i in n)if(n.hasOwnProperty(i)&&(typeof t=="string"&&n[i]===t.toLowerCase()||n[i]===t))return n[i];return null}function n(n,i){if(n){var r=n.toLowerCase(),f=i||t.Unspecified,u={PageName:r,PageType:f};return o[r]=u,u}return null}function a(n){if(f[n])return f[n]}function v(n){return r[n]?r[n]:u.Undefined}function y(){f[i.AppInstall]=e.App;f[i.AppLaunch]=e.App;f[i.SponsoredContent]=e.SponsoredContent;f[i.StructuredData]=e.StructuredDataCard;f[i.AppStore]=e.AppStorePromo}function p(){r[i.AppInstall]=u.Install;r[i.AppLaunch]=u.Launch;r[i.Follow]=u.Follow;r[i.Unfollow]=u.Unfollow;r[i.Like]=u.Like;r[i.Dislike]=u.Dislike;r[i.Unlike]=u.Unlike;r[i.Undislike]=u.Undislike;r[i.Mute]=u.Mute;r[i.Unmute]=u.Unmute;r[i.MuteCancel]=u.MuteCancel;r[i.Manage]=u.Manage}var o={},f={},r={},t={Unspecified:"unspecified",DHP:"dhp",NTP:"ntp",HomePage:"hp",VerticalHomePage:"verthp",StructuredDataPage:"data",SectionFront:"secfront",SiteSearch:"sitesearch",Article:"article",Gallery:"gallery",Video:"video",SubjectSection:"subjectsec",CustomColumn:"custcol",Msn360:"msn360",CommentOverlay:"comment-overlay"},i={Undefined:0,Header:1,Footer:2,TopNavBar:3,NavBar:4,DropDown:5,Section:6,Carousel:7,Module:8,SearchBox:9,InputBox:10,ActionButton:11,Interaction:12,Headline:13,Navigation:14,Entity:15,StructuredData:16,AppStore:17,AppLaunch:18,CmsPromotions:19,MicrosoftWebStore:20,XboxStore:21,OfficeStore:22,AppInstall:23,PartnerLinks:24,SponsoredContent:25,Follow:26,Unfollow:27,MoreFrom:28,Topic:29,Provider:30,Spotlight:33,Close:36,Share:37,Like:38,Dislike:39,Unlike:40,Undislike:41,Mute:42,Unmute:43,MuteCancel:44,Manage:45,NewStories:46,AutoSuggest:47,BingCard:48,Tile:49,TrendingNews:50,AllCoverage:51,Report:52,AdChoice:53},e={Undefined:0,App:1,Article:2,Feed:3,Gallery:4,AppStorePromo:5,Settings:6,SponsoredContent:7,StructuredDataCard:8,Video:9,Webview:10,Activity:11,Win32:12,OfficeDocument:13,LocalFile:14,CardAction:15,News360:33},u={Undefined:0,Navigate:1,ContextMenu:2,Pin:3,Unpin:4,Rearrange:5,Remove:6,Add:7,Open:8,View:9,Follow:10,Unfollow:11,More:12,Close:13,Share:14,Like:15,Dislike:16,Unlike:17,Undislike:18,Mute:19,Unmute:20,Cancel:21,Launch:22,Install:23,Manage:24,Show:25,MuteCancel:26,Save:27,Hide:28,Unhide:29,Customize:30},s={StartPage:new n("startpage",t.HomePage),DefaultPage:new n("default"),EduPage:new n("edu"),ChildModePage:new n("child"),Office:new n("office"),Feed:new n("xfeed"),Discover:new n("discover"),MyInterests:new n("myinterests"),CombinedInterests:new n("cinterests"),Msn360:new n("msn360",t.Msn360),ArticlePageNames:{Article:new n("article",t.Article),ArticleVNext:new n("articlevnext",t.Article),ArticleCollection:new n("articlecollection",t.Article),ArticleFullScreen:new n("articlefullscreen",t.Article),FlexibleArticle:new n("articleflex",t.Article),FlexibleArticleMobile:new n("articleflexmobile",t.Article),ArticleGalleryFullScreen:new n("article_galleryfs",t.Article),ArticleCommentOverlay:new n("comment-articleflex",t.SpotImCommentOverlay)},GalleryPageNames:{Gallery:new n("gallery",t.Gallery),GalleryVNext:new n("galleryvnext",t.Gallery),GalleryFullScreen:new n("gallery_fullscreen",t.Gallery),GalleryArticleFullScreen:new n("gallery_articlefullscreen",t.Gallery),GalleryClassic:new n("gallery_classic",t.Gallery),GalleryClassicFullScreen:new n("gallery_classicfs",t.Gallery),GalleryInlineClassicFullScreen:new n("gallery_inlineclassicfs",t.Gallery),GallerySearch:new n("gallery_search",t.Gallery),GallerySearchFullScreen:new n("gallery_searchfs",t.Gallery),FlexibleGallery:new n("galleryflex",t.Gallery),FlexibleGallerySponsored:new n("galleryflex_sponsorship",t.Gallery),FlexibleGalleryMobile:new n("galleryflexmobile",t.Gallery),GalleryImmersive:new n("gallery_immersive",t.Gallery),GalleryImmersiveFullScreen:new n("gallery_immersivefs",t.Gallery),GallerySponsored:new n("gallery_sponsor",t.Gallery),GallerySponsorship:new n("gallery_sponsorship",t.Gallery),GallerySponsoredFullScreen:new n("gallery_sponsorfs",t.Gallery),GalleryInline:new n("gallery_inline",t.Gallery),GalleryOnepage:new n("gallery_onepage",t.Gallery),GalleryDataModel:new n("gallery_datamodel",t.Gallery),GalleryDataModelFullScreen:new n("gallery_datamodelfs",t.Gallery),GalleryDataPhotos:new n("gallery_dataphotos",t.Gallery),GalleryDataPhotosFullScreen:new n("gallery_dataphotosfs",t.Gallery),GalleryEventHub:new n("gallery_eventhub",t.Gallery),GalleryEventHubFullScreen:new n("gallery_eventhubfs",t.Gallery)},VideoPageNames:{ChannelPlayerPage:new n("channelplayerpage",t.Video),PartnerPlayerPage:new n("partnerplayerpage",t.Video)},VerticalHomePageNames:{HomePage:new n("homepage",t.VerticalHomePage),HomePageToday:new n("homepage-today",t.VerticalHomePage)},StructuredDataPageNames:{Gamecenter:new n("gamecenter",t.StructuredDataPage),Schedule:new n("schedule",t.StructuredDataPage),Scores:new n("scores",t.StructuredDataPage),Stocksummary:new n("stocksummary",t.StructuredDataPage),Stocksummaryoneriver:new n("stocksummaryoneriver",t.StructuredDataPage),Weatherxplatmaps:new n("weatherxplatmaps",t.StructuredDataPage),Standings:new n("standings",t.StructuredDataPage),Markets:new n("markets",t.StructuredDataPage),Watchlistpage:new n("watchlistpage",t.StructuredDataPage),Data_modelpage:new n("data_modelpage",t.StructuredDataPage),Immersivechartspage:new n("immersivechartspage",t.StructuredDataPage),Currencies:new n("currencies",t.StructuredDataPage),Indexdetailspage:new n("indexdetailspage",t.StructuredDataPage),Data_makepage:new n("data_makepage",t.StructuredDataPage),Weatherfullscreenmaps:new n("weatherfullscreenmaps",t.StructuredDataPage),Weatherthresholdmaps:new n("weatherthresholdmaps",t.StructuredDataPage),Stockanalysisdetails:new n("stockanalysisdetails",t.StructuredDataPage),Data_yearoverview:new n("data_yearoverview",t.StructuredDataPage),Data_segmenthub:new n("data_segmenthub",t.StructuredDataPage),Weathermaps:new n("weathermaps",t.StructuredDataPage),Playerstats:new n("playerstats",t.StructuredDataPage),Funddetailspage:new n("funddetailspage",t.StructuredDataPage),Exercisedetails:new n("exercisedetails",t.StructuredDataPage),Teams:new n("teams",t.StructuredDataPage),Etfdetailspage:new n("etfdetailspage",t.StructuredDataPage),Binganswermaps:new n("binganswermaps",t.StructuredDataPage),Workoutdetails:new n("workoutdetails",t.StructuredDataPage),Competitionstats:new n("competitionstats",t.StructuredDataPage),Polls:new n("polls",t.StructuredDataPage),Data_photos:new n("data_photos",t.StructuredDataPage),Videocategorylistpage:new n("videocategorylistpage",t.StructuredDataPage),Stockfinancialsdetails:new n("stockfinancialsdetails",t.StructuredDataPage),Commoditydetailspage:new n("commoditydetailspage",t.StructuredDataPage),Data_yearoverview_trim:new n("data_yearoverview_trim",t.StructuredDataPage),Worldwidepage:new n("worldwidepage",t.StructuredDataPage),Data_photos_trim:new n("data_photos_trim",t.StructuredDataPage),Stockcompanydetails:new n("stockcompanydetails",t.StructuredDataPage),Retirementplanner:new n("retirementplanner",t.StructuredDataPage),Livecoverage:new n("livecoverage",t.StructuredDataPage),Teamroster:new n("teamroster",t.StructuredDataPage),Stockhistorydetails:new n("stockhistorydetails",t.StructuredDataPage),Filterresultspage:new n("filterresultspage",t.StructuredDataPage),Data_carcompare:new n("data_carcompare",t.StructuredDataPage),Stockownershipdetails:new n("stockownershipdetails",t.StructuredDataPage),Driverstandings:new n("driverstandings",t.StructuredDataPage),Timevalueofmoney:new n("timevalueofmoney",t.StructuredDataPage),Savingscalculator:new n("savingscalculator",t.StructuredDataPage),Iccmatches:new n("iccmatches",t.StructuredDataPage),Other_flightsearchresult:new n("other_flightsearchresult",t.StructuredDataPage),Stockrelateddetails:new n("stockrelateddetails",t.StructuredDataPage),Data_specs_trim:new n("data_specs_trim",t.StructuredDataPage),Stockoptionsdetails:new n("stockoptionsdetails",t.StructuredDataPage),HomepageAlerts:new n("homepage-alerts",t.StructuredDataPage),HomepageRecordsandAverages:new n("homepage-recordsandaverages",t.StructuredDataPage),HomepageWeatherTraffic:new n("homepage-weathertraffic",t.StructuredDataPage),Data_specs:new n("data_specs",t.StructuredDataPage),Data_pricing:new n("data_pricing",t.StructuredDataPage),Mortgagecalculator:new n("mortgagecalculator",t.StructuredDataPage),Data_performance_trim:new n("data_performance_trim",t.StructuredDataPage),Theatershowtimes:new n("theatershowtimes",t.StructuredDataPage),Data_pricing_trim:new n("data_pricing_trim",t.StructuredDataPage),Data_photosInterior:new n("data_photos-interior",t.StructuredDataPage),Indexdetailsanalysispage:new n("indexdetailsanalysispage",t.StructuredDataPage),Data_photosInterior_trim:new n("data_photos-interior_trim",t.StructuredDataPage),Data_photosColors:new n("data_photos-colors",t.StructuredDataPage),Data_carReviews_trim:new n("data_car-reviews_trim",t.StructuredDataPage),Data_carReviews:new n("data_car-reviews",t.StructuredDataPage),Racecalendar:new n("racecalendar",t.StructuredDataPage),Teamstandings:new n("teamstandings",t.StructuredDataPage),Data_photosColors_trim:new n("data_photos-colors_trim",t.StructuredDataPage),Stockdetails:new n("stockdetails",t.StructuredDataPage),Data_interiorFeatures_trim:new n("data_interior-features_trim",t.StructuredDataPage),Data_exteriorFeatures_trim:new n("data_exterior-features_trim",t.StructuredDataPage),Calendar:new n("calendar",t.StructuredDataPage),TeamStats:new n("teamstats",t.StructuredDataPage),Movieshowtimes:new n("movieshowtimes",t.StructuredDataPage),Drafts:new n("drafts",t.StructuredDataPage),Data_technologyFeatures_trim:new n("data_technology-features_trim",t.StructuredDataPage),Data_workoutdetails_collection:new n("data_workoutdetails_collection",t.StructuredDataPage),Data_photosExterior:new n("data_photos-exterior",t.StructuredDataPage),Data_photosExterior_trim:new n("data_photos-exterior_trim",t.StructuredDataPage),Data_photos360Interior:new n("data_photos-360-interior",t.StructuredDataPage),Immersivechartsmarketspage:new n("immersivechartsmarketspage",t.StructuredDataPage),Returnoninvestment:new n("returnoninvestment",t.StructuredDataPage),Indexdetailsrelatedpage:new n("indexdetailsrelatedpage",t.StructuredDataPage),Gonepage:new n("gonepage",t.StructuredDataPage),Data_compare:new n("data_compare",t.StructuredDataPage),Data_compare_trim:new n("data_compare_trim",t.StructuredDataPage),Data_options_trim:new n("data_options_trim",t.StructuredDataPage),Entitiespage:new n("entitiespage",t.StructuredDataPage),Workoutdetailsprint:new n("workoutdetailsprint",t.StructuredDataPage),Data_photos360Exterior:new n("data_photos-360-exterior",t.StructuredDataPage),HomepageDatacarfinder:new n("homepage-datacarfinder",t.StructuredDataPage),Data_photos360Interior_trim:new n("data_photos-360-interior_trim",t.StructuredDataPage),Data_skeleton:new n("data_skeleton",t.StructuredDataPage),Mortgagerates:new n("mortgagerates",t.StructuredDataPage),Brackets:new n("brackets",t.StructuredDataPage),Data_photos360Exterior_trim:new n("data_photos-360-exterior_trim",t.StructuredDataPage),Data_photocompare:new n("data_photocompare",t.StructuredDataPage),HomepageWeather10day:new n("homepage-weather10day",t.StructuredDataPage),Data_performance:new n("data_performance",t.StructuredDataPage),HomepageWeatherextendedforecast:new n("homepage-weatherextendedforecast",t.StructuredDataPage),Savings:new n("savings",t.StructuredDataPage),Data_exteriorFeatures:new n("data_exterior-features",t.StructuredDataPage),Data_interiorFeatures:new n("data_interior-features",t.StructuredDataPage),Data_options:new n("data_options",t.StructuredDataPage),Travelgonepage:new n("travelgonepage",t.StructuredDataPage),Recipe:new n("recipe",t.StructuredDataPage),Getportfoliodatapage:new n("getportfoliodatapage",t.StructuredDataPage),Brokercenterpage:new n("brokercenterpage",t.StructuredDataPage),Data_technologyFeatures:new n("data_technology-features",t.StructuredDataPage),Tvlistings:new n("tvlistings",t.StructuredDataPage),Ownerstandings:new n("ownerstandings",t.StructuredDataPage),Entitydetailspage:new n("entitydetailspage",t.StructuredDataPage),Creditcards:new n("creditcards",t.StructuredDataPage),Cmssitemap:new n("cmssitemap",t.StructuredDataPage),Externalnativeadpage:new n("externalnativeadpage",t.StructuredDataPage),Autoloans:new n("autoloans",t.StructuredDataPage),Externalcontent:new n("externalcontent",t.StructuredDataPage),Htmlsitemap:new n("htmlsitemap",t.StructuredDataPage)},CustomColumnPageNames:{TrendingTopics:new n("topic_tt",t.CustomColumn),GlobalSettingsPage:new n("globalsettingspage",t.CustomColumn),MyTopics:new n("mytopics",t.CustomColumn),WeatherPlaces:new n("weatherplaces",t.CustomColumn),MyFavorites:new n("myfavorites",t.CustomColumn),TopicResult:new n("topicresult",t.CustomColumn),Collections:new n("collections",t.CustomColumn),Rouxbe:new n("rouxbe",t.CustomColumn),ShoppingList:new n("shopping list",t.CustomColumn),MyHealthReportsPage:new n("myhealthreportspage",t.CustomColumn),Error404page:new n("error404page",t.CustomColumn),AppsPromotion:new n("appspromotion",t.CustomColumn),Error500page:new n("error500page",t.CustomColumn),DietTrackerPreSigninPage:new n("diettrackerpresigninpage",t.CustomColumn),ExerciseTrackerPreSigninPage:new n("exercisetrackerpresigninpage",t.CustomColumn),WebSlicePage:new n("other_webslice",t.CustomColumn),Error200Page:new n("error200page",t.CustomColumn),AboutUsPage:new n("aboutus",t.CustomColumn),UnSupport:new n("unsupport",t.CustomColumn),Disclaimer:new n("disclaimer",t.CustomColumn),TermsOfService:new n("termsofservice",t.CustomColumn),SevereWeather:new n("severeweather",t.CustomColumn)},SubjectSectionPageNames:{TeamhomePage:new n("teamhome",t.SubjectSection),PlayerPage:new n("player",t.SubjectSection),MarketMoversPage:new n("marketmovers",t.SubjectSection),CommoditiesPage:new n("commoditiespage",t.SubjectSection),ChefPage:new n("chef",t.SubjectSection),NutritionIndexPage:new n("nutritionindex",t.SubjectSection),FinanceTechnologyPage:new n("finance-technologypage",t.SubjectSection),MedicalindexPage:new n("medicalindex",t.SubjectSection)},SiteSearchPageNames:{SearchResultsPage:new n("searchresultspage",t.SiteSearch),VideoSearchResultsPage:new n("videosearchresultspage",t.SiteSearch),PartnerVideolistPage:new n("partnervideolistpage",t.SiteSearch),HomepageBingserpIframepage:new n("homepage-bingserpiframepage",t.SiteSearch),SitesearchSitesearch:new n("sitesearch_sitesearch",t.SiteSearch),SearchResults:new n("search results",t.SiteSearch),SerpPage:new n("serppage",t.SiteSearch),FindaMoviePage:new n("findamoviepage",t.SiteSearch)},SectionFrontPageNames:{Competitionhub:new n("competitionhub",t.SectionFront),Local:new n("local",t.SectionFront),Stockscreener:new n("stockscreener",t.SectionFront),Toolslandingpage:new n("toolslandingpage",t.SectionFront),Showtimes:new n("showtimes",t.SectionFront),FinanceRealEstatepage:new n("finance-real-estatepage",t.SectionFront),CookingSchool:new n("cooking school",t.SectionFront),Allcompetitions:new n("allcompetitions",t.SectionFront),Newspage:new n("newspage",t.SectionFront),CocktailHub:new n("cocktail hub",t.SectionFront),Travelflightsearchhubpage:new n("travelflightsearchhubpage",t.SectionFront),Hotelshubpage:new n("hotelshubpage",t.SectionFront),WineHub:new n("wine hub",t.SectionFront),ChefHub:new n("chef hub",t.SectionFront),Travelflightstatushubpage:new n("travelflightstatushubpage",t.SectionFront),HomepageCompetitionhub:new n("homepage-competitionhub",t.SectionFront),Editorial:new n("editorial",t.SectionFront),SecfrontHotel:new n("secfront_hotel",t.SectionFront),SecfrontTNews:new n("secfront_tnews",t.SectionFront)}},h={TelemetryProduct:{Spartan:"spartan",Prime:"prime",PrimeMobile:"prime_mobile",IEext:"ieext",EMMX:"emmx",SpartanMobile:"spartan_mobile",TabbedShell:"tabbedshell",ChromeExt:"chromeext",Downlevel:"downlevel",Xbox:"xbox",ShoppingExt:"shoppingext",Anaheim:"anaheim",Amp:"amp"},TelemetryPageType:t,TelemetryType:i,TelemetryContentType:e,TelemetryBehaviorType:u,ContentPlacedBySource:{Editor:0,PersonalizationAlgo:1,Bing:2,Taboola:3,Outbrain:4,AutoCuration:5,User:6,AppNexus:7,OtherSponconProvider:8,BingMsn:9},TelemetryPageConfiguration:{NoContent:0,OneBox:1,TopSites:2,Suggested:4,ContentFeed:8,WinFre:16,BingImage:32,ContentBelowTheFold:64,CustomModeOption:128},TelemetryPageName:s,TelemetryPageMode:{Default:0,Trial:1,Subscription:2},TelemetryPagePivot:{Undefined:"undefined",Office:"office",Apps:"apps",News:"news",Timeline:"timeline",StartMenu:"startmenu"},TelemetryPartnerNamespace:{MMX:"m",Shell:"s",Edge:"e",Office:"o",Activity:"a",Cortana:"c"},TelemetryUserType:{Aad:"aad",Msa:"msa",MsaKids:"msa-kids",Local:"local"},getTelemetryContentType:a,getTelemetryBehavior:v,getTelemetryPageInfo:c,validateTelemetryDataType:l,TelemetryActionType:{Click:"click",Hover:"mouseenter",Submit:"submit",View:"view",RightClick:"rightclick"}};return y(),p(),h});define("binding",["viewAware","mediator","window"],function(n,t,i){function s(t){return this.view(n.views.ALL&~this.views,t)}function a(n){var i=n.args[0],t,e,c,u;if(typeof i=="string")t=i;else if(typeof i.selector=="string")t=i.selector;else try{t=JSON.stringify(i)}catch(a){t="{unserializableSelector}"}var o=f[t]||(f[t]={}),s=o[n.behaviorName]||(o[n.behaviorName]={}),h=s[n.view]||(s[n.view]={}),l=n.args[1],r;try{r=JSON.stringify(l||"{defaultContext}")}catch(a){r="{unserializableContext}"}e=h[r]||(h[r]={});c=n.args[2];try{u=JSON.stringify(c||"{defaultOptions}")}catch(a){u="{unserializableOptions}"}return e[u]?!1:(e[u]=n,!0)}function h(n,t,i){var h=[],r,c,l,a,v,u,e,o,s;typeof i!="function"&&(i=function(){return!0});r=f[n]||{};t&&(r={behaviorName:r[t]||{}});for(c in r){u=r[c];for(l in u){e=u[l];for(a in e){o=e[a];for(v in o)s=o[v],i(s)&&h.push(s)}}}return h}function c(n,t){for(var u=null,i=0;i<r.length;i++)if(r[i].behaviorName==n&&r[i].args[0]==t){u=r[i];break}return u}function v(n){var t,u,i;for(e=n,i=0;i<r.length;i++)t=r[i],u=t.view&e,t.active&&(u?t.update():(t.teardown(),t.active=0));for(i=0;i<r.length;){if(t=r[i],u=t.view&e,u&&!t.active&&!o(t)){r.splice(i,1);continue}++i}}function o(n){var t;return n.setup||(t=n.behavior.apply(null,n.args),t&&(n.setup=t.setup,n.teardown=t.teardown,n.update=t.update)),t=!1,n.setup&&(n.setup(),n.active=1,t=!0),t}function l(t,r,u){this.behaviorName=t;this.selector=r;this.context=u;this.views=n.views.NONE;this.timeout=i.setTimeout(function(){throw'binding("'+t+'", "'+r+'") was not followed with an all(), view(), or fallback() call!';},0)}var r=[],f={},e,u;return n.listen(v),l.prototype={view:function(n,t){var f=this.behaviorName,s=[this.selector,this.context,t],u={active:0,args:s,behaviorName:this.behaviorName,view:n};return this.views|=n,i.clearTimeout(this.timeout),a(u),require([f],function(t){u.behavior=t;var i=!0;n&e&&(i=o(u));i&&r.push(u)}),this},fallback:s,all:s,get:c},u=function(n,t,i){return new l(n,t,i)},u.views=n.views,u.refreshBindings=function(n,t){for(var i,u=h(n,t),r=0;r<u.length;r++)i=u[r],i.setup&&(delete i.setup,delete i.teardown,delete i.update,o(i))},u.unbind=function(n,t){for(var e=r&&r.length||0,o,u,i;--e>=0;)r[e].args[0]!=n||t&&r[e].behaviorName!=t||r.splice(e,1);for(o=function(n){return n&&n.teardown},u=h(n,t,o),i=0;i<u.length;i++)u[i].teardown(),delete u[i].setup,delete u[i].teardown,delete u[i].update;delete f[n]},i.binding=u,i.binding.get=c,u});define("rawCookies",["document"],function(n){function t(n,t){var r=new RegExp("\\b"+n+"\\s*=\\s*([^;]*)","i"),i=r.exec(t);return i&&i.length>1?i[1]:""}function i(t,i,r,u,f,e){var s,o=[t,"=",i],h;r===-1?s="Fri, 31 Dec 1999 23:59:59 GMT":r&&(h=new Date,h.setTime(h.getTime()+r*864e5),s=h.toUTCString());s&&o.push(";expires=",s);u&&o.push(";domain=",u);f&&o.push(";path=",f);e&&o.push(";secure");n.cookie=o.join("")}return{extractCookieFromDocumentCookies:t,setCookie:i}});define("isSetCookiePermitted",["headData"],function(n){return function(t){var i=n&&n.clientSettings,r,u,e,o,s,h,f;if(!i||!i.functionalonly_cookie_experience)return!0;if(r=i.functional_cookies,u=i.functional_cookie_patterns,!r&&!u)return require(["logging"],function(n){n.error("Functional Cookies List AND Functional Cookie Patterns List are empty")}),!0;if(e=t.toLowerCase(),o=",",r&&r.toLowerCase().split(o).indexOf(e)>=0)return!0;if(u)for(s=u.toLowerCase().split(o),h=s.length,f=0;f<h;f++)if(new RegExp(s[f]).test(e))return!0;return!1}});define("getCookie",["document","rawCookies"],function(n,t){return function(i){return t.extractCookieFromDocumentCookies(i,n.cookie)}});define("setCookie",["location","isSetCookiePermitted","rawCookies"],function(n,t,i){function r(n,r,u,f,e,o){u>0&&!t(n)||i.setCookie(n,r,u,f,e,o)}return r.topDomain=(n.hostname.match(/[^.]+\.[^.\d]+$/)||{})[0]||"",r});define("dom",function(){var n=document,t=/[\n\t]/g,i=/(^\s+)|(\s+$)/mg;return{attr:function(n,t){return n&&(n.getAttribute?n.getAttribute(t,2):n[t])||""},name:function(n){return n&&n.nodeName||""},text:function(n){return(n&&(n.textContent||n.innerText)||"").replace(i,"")},children:function(n){return n&&n.children||[]},parent:function(n){return n&&n.parentNode},getElementsByTagName:function(t){return n.getElementsByTagName(t)},create:function(t){return n.createElement(t)},containsClass:function(n,i){return n&&(" "+(n.className||n.getAttribute("class"))+" ").replace(t," ").indexOf(" "+i+" ")>-1},getTarget:function(n){return n&&(n.customTarget||n.target||n.srcElement)||document}}});define("events",function(){function n(n,t,i){n.addEventListener&&n.addEventListener(t,i,!1)}function t(n,t,i){n.removeEventListener&&n.removeEventListener(t,i,!1)}return{bind:n,unbind:t}});define("extend",function(){function t(n){return Array.isArray?Array.isArray(n):Object.prototype.toString.call(n).toLowerCase()==="[object array]"}function n(){var e=arguments,r=e[0]||{},o=1,i,u,s,f;for((typeof r=="boolean"||typeof r=="number")&&(s=!!r,r=e[1],o=2);o<e.length;o++){u=e[o];for(i in u)u[i]!==undefined&&u[i]!==null&&(s&&typeof u[i]=="object"?(f=r[i],typeof f!="object"&&(f=t(u[i])?[]:{}),n(!0,f,u[i]),r[i]=f):r[i]=u[i])}return r}return n});define("format",function(){function t(t,i,r){for(var u=0;u<r.length-i;++u)t=t.replace(n[u]||(n[u]=new RegExp("\\{"+u+"\\}","g")),r[u+i]);return r.length?t:t.toString()}var n=[];return String.prototype.format=function(){return t(this,0,arguments)},function(n){return(typeof n=="function"&&(n=n.apply(n,Array.prototype.slice.call(arguments,1))),n==null)?"":(typeof n!="string"&&(n=n.toString()),n)?t(n,1,arguments):""}});define("ajax",[],function(){function n(n){if(!n||!n.url){n.error&&n.error("Missing Url. Invalid parameters");return}var t=new XMLHttpRequest;t.onreadystatechange=function(){if(t.readyState==4){if(t.status!=200&&n.error){n.error(t.status,t.statusText);return}n.success&&n.success(t.response)}};t.open("GET",n.url);n.dataType&&t.setRequestHeader("Content-Type",n.dataType);n.timeout&&n.timeout>0&&(t.timeout=n.timeout);n.ontimeout&&(t.ontimeout=function(){n.ontimeout&&n.ontimeout("Request timeout")});t.send()}function t(n){if(!n||!n.url){n.error&&n.error("Missing Url. Invalid parameters");return}if(!n.body){n.error&&n.error("Missing request body. Invalid parameters");return}var t=new XMLHttpRequest;t.onreadystatechange=function(){if(t.readyState==4){if(t.status!=200&&n.error){n.error(t.status,t.statusText);return}n.success&&n.success(t.response)}};t.open("POST",n.url);n.dataType&&t.setRequestHeader("Content-Type",n.dataType);n.timeout&&n.timeout>0&&(t.timeout=n.timeout);n.ontimeout&&(t.ontimeout=function(){n.ontimeout&&n.ontimeout("Request timeout")});t.send(n.body)}return{get:n,post:t}});define("refreshPdpModules",["jquery","refreshModules"],function(n,t){function i(){var i=n("[data-pdp-dependent]"),r=t(i,{pfr:1});r.then(function(){define("c.pdpready",1)})}return i});define("refreshSigninModule",["jquery","refreshModules","binding"],function(n,t){function i(){var i=n("[data-sso-dependent]");t(i).then(function(){})}return i});define("guidGen",function(){return function(){function t(t){var i=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(t=="x"?i:i&7|8).toString(16)}var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t)}});define("pageInstance",["mediator","guidGen","document","telemetry.constants"],function(n,t,i,r){var u,f="updatePageInstance";return n.sub(f,function(){var e,o,s,f;if(u=t().replace(/-/g,""),n.pub(r.ResetIdx),e=i.body.querySelector("#srchfrm"),e)for(o=e.querySelectorAll("input[name='refig']"),s=o.length,f=0;f<s;f++)o[f].value=u}),{getActivityId:function(){return u},setActivityId:function(t){u=t;n.pub(r.ResetIdx)},eventName:f}});define("refreshModules",["jquery","navigation","headData","window","location","promise","requestAnimationFrame","imgSrc","mediator","escape"],function(n,t,i,r,u,f,e,o,s,h){function k(t,i,r,u,f,e){n.ajax({url:t,dataType:"html",data:{pagerequest:JSON.stringify(i)},crossDomain:!0,method:"GET",xhrFields:{withCredentials:!1}}).done(function(t){a(r,t,null,e);u(t);r.each(function(){var t=n(this).data("moduleId");t&&s.pub("moduleRefreshed-"+t)})}).fail(function(){f(arguments)})}function d(t,i,r,u,f,e){var o=!1,h={};!/^https/.test(t)&&i&&i.Regions&&i.Regions.length&&g(i.Regions)&&(t="https"+t.substring(4),o=!0,h={withCredentials:!0});n.ajax({url:t,dataType:"html",data:JSON.stringify(i),method:"POST",contentType:"application/json",crossDomain:o,xhrFields:h}).done(function(t){a(r,t,null,e);u(t);r.each(function(){var t=n(this).data("moduleId");t&&s.pub("moduleRefreshed-"+t)})}).fail(function(){f(arguments)})}function g(n){for(var t=0;t<n.length;t++)if(n[t].type==="meStripe")return!0;return!1}function nt(){var t,n,i;if(c&&c.deferLoadedItems){for(t=c.deferLoadedItems.split(","),n=0,i=t.length;n<i;n++)t[n]&&c.removeItem(t[n]);c.removeItem("deferLoadedItems")}}function tt(n,t){if(!c||!n||!t)return null;var i,r=c.getItem(n);try{i=JSON.parse(r)}catch(u){return null}return i&&i.data&&i.lastUpdatedTime&&Date.now()-i.lastUpdatedTime<t?i.data:null}function it(n,t){c&&(c.deferLoadedItems||(c.deferLoadedItems=""),c.deferLoadedItems+=","+n,c.setItem(n,JSON.stringify({lastUpdatedTime:Date.now(),data:t})))}function a(t,i,r,u){var f,e,o,h,s;i&&(f=n("<data>"+n.trim(i)+"<data>"),ut(f),e=f.find("[data-module-id]"),u=u||{},o=u.loadEmptyContent,t.each(function(){var s=n(this),t,i=s.data("moduleId");if(t=e.filter("[data-module-id='"+i+"']"),t.length){var u=n("[data-module-id='"+i+"']"),c=v[i]||u.html(),f=t.html(),l=f===c;(o||f&&f.trim())&&(y||!l)&&(v[i]=f,rt(t,u),t.insertAfter(u.first()),u.remove(),h=!0);!r&&s.data("cache-duration")&&it(i,t[0].outerHTML)}}),s=!1,u.enableJSScriptInjection&&(processScripts(f),s=!0))}function rt(t,i){n("img[data-src]",t).each(function(){o.force(this,i)||o.go(this)})}function ut(t){var i=t.children("link[rel=stylesheet]");i.length&&i.each(function(){var t=this.getAttribute("href");p[t]||((w||(w=n("head"))).append(this),p[t]=!0)})}var l=i.moduleapi,b=i.cdnmoduleapi,v={},y,p={},w,c;try{c=r.localStorage}catch(ft){c=null}return l?function(e,o,s,c,v,p,w,g,it,rt){var ot,ft,et,ut,st,ht,ct;return(i.signedin||nt(),!e||e.length===0)?new f(function(n){n()}):(e instanceof n||(e=n(e)),typeof o=="string"&&(o=t.getParams(o)),p&&(l=p),(s===undefined||s===null)&&(s=!1),y=v,ot=n.extend(t.getParamsFromUrl(u.href),o),s&&delete ot.ocid,w&&ot.locale&&(ot.locale=w),ft=n.param(ot),et=l.split("?")[0]+(ft?"?"+ft:""),et+=(et.indexOf("?")===-1?"?":"&")+"ou="+h.urlPart(u.href),rt&&(et+=(et.indexOf("?")===-1?"?":"&")+"enableInlineCss=true"),ut={RequestUri:u.href.split("?")[0]+(ft?"?"+ft:""),ExperienceId:g&&i.kernelXd?i.kernelXd:i.xdid||null,CacheDuration:null},st=null,s&&(st=b.split("?")[0]+(ft?"?"+ft:""),st+=(st.indexOf("?")===-1?"?":"&")+"devicegroup="+i.dg,c!==undefined&&c!==null&&(ut.CacheDuration=c.toString())),it=n.extend({loadEmptyContent:!1},it),ht={},ct=[],e.each(function(){var i=n(this).data("moduleId"),r,u,t;if(i){if(r=n(this).data("cache-duration"),u=r?tt(i,r):null,u){ct.push(u);return}if(t=i.split("|"),t.length==5){var o={key:t[3],type:t[4]},f={key:t[1],type:t[2],Modules:[o]},e=f.key+f.type;ht[e]?ht[e].Modules.push(o):ht[e]=f;ut.Type||(ut.Type=t[0])}}}),ct.length&&a(e,ct.join(""),!0,it),ut.Regions=n.map(ht,function(n){return n}),ut.Regions!=null&&ut.Regions.length>0?new f(function(n,t){s?k(st,ut,e,n,t,it):d(et,ut,e,n,t,it)}):(r.console&&r.console.log&&console.warn("Regions were empty or null"),new f(function(n){n()})))}:(r.console&&console.log("moduleApiEndpoint is missing from header, ajax module update will exit."),n.noop)});define("promise",["window"],function(){function e(n){var t=this.constructor;return this.then(function(i){return t.resolve(n()).then(function(){return i})},function(i){return t.resolve(n()).then(function(){return t.reject(i)})})}function s(){}function h(n,t){return function(){n.apply(t,arguments)}}function n(t){if(!(this instanceof n))throw new TypeError("Promises must be constructed via new");if(typeof t!="function")throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=undefined;this._deferreds=[];f(t,this)}function u(r,u){while(r._state===3)r=r._value;if(r._state===0){r._deferreds.push(u);return}r._handled=!0;n._immediateFn(function(){var n=r._state===1?u.onFulfilled:u.onRejected,f;if(n===null){(r._state===1?i:t)(u.promise,r._value);return}try{f=n(r._value)}catch(e){t(u.promise,e);return}i(u.promise,f)})}function i(i,u){try{if(u===i)throw new TypeError("A promise cannot be resolved with itself.");if(u&&(typeof u=="object"||typeof u=="function")){var e=u.then;if(u instanceof n){i._state=3;i._value=u;r(i);return}if(typeof e=="function"){f(h(e,u),i);return}}i._state=1;i._value=u;r(i)}catch(o){t(i,o)}}function t(n,t){n._state=2;n._value=t;r(n)}function r(t){t._state===2&&t._deferreds.length===0&&n._immediateFn(function(){t._handled||n._unhandledRejectionFn(t._value)});for(var i=0,r=t._deferreds.length;i<r;i++)u(t,t._deferreds[i]);t._deferreds=null}function c(n,t,i){this.onFulfilled=typeof n=="function"?n:null;this.onRejected=typeof t=="function"?t:null;this.promise=i}function f(n,r){var u=!1;try{n(function(n){u||(u=!0,i(r,n))},function(n){u||(u=!0,t(r,n))})}catch(f){if(u)return;u=!0;t(r,f)}}var o=setTimeout;return n.prototype["catch"]=function(n){return this.then(null,n)},n.prototype.then=function(n,t){var i=new this.constructor(s);return u(this,new c(n,t,i)),i},n.prototype["finally"]=e,n.all=function(t){return new n(function(n,i){function e(t,u){try{if(u&&(typeof u=="object"||typeof u=="function")){var o=u.then;if(typeof o=="function"){o.call(u,function(n){e(t,n)},i);return}}r[t]=u;--f==0&&n(r)}catch(s){i(s)}}var r,f,u;if(!t||typeof t.length=="undefined")throw new TypeError("Promise.all accepts an array");if(r=Array.prototype.slice.call(t),r.length===0)return n([]);for(f=r.length,u=0;u<r.length;u++)e(u,r[u])})},n.resolve=function(t){return t&&typeof t=="object"&&t.constructor===n?t:new n(function(n){n(t)})},n.reject=function(t){return new n(function(n,i){i(t)})},n.race=function(t){return new n(function(n,i){for(var r=0,u=t.length;r<u;r++)t[r].then(n,i)})},n._immediateFn=typeof setImmediate=="function"&&function(n){setImmediate(n)}||function(n){o(n,0)},n._unhandledRejectionFn=function(n){typeof console!="undefined"&&console&&console.warn("Possible Unhandled Promise Rejection:",n)},n});define("oAuthHelper",["window","location","webStorage"],function(n,t,i){function o(){var u=t.hash,n;u&&(n=i.getItem(r),n)&&(e(u),i.removeItem(r),t.replace(n))}function e(n){var r=s(n),t=r.access_token;return t&&(i.setItem(u,t),i.setItem(f,parseInt(r.expires_in)+Math.round((new Date).getTime()/1e3))),t}function s(n){var t={},i,u,r;if(!n.length)return t;i=n.substring(1).replace(/\+/g," ").split("&");for(u in i)r=i[u].split("="),t[r[0]]=decodeURIComponent(r[1]);return t}var u="AAD.Access.Token",f="AAD.Access.Token.Expiry",r="oAuthResponseURI";return{storagePropertyNames:{aadAccessToken:u,aadAccessTokenExpiry:f,aadAccessTokenRenewalState:"AAD.Access.Token.Renewal",aadUniqueName:"AAD.User.UniqueName",oAuthResponseUri:r},handleResponse:o,storeAccessToken:e}});define("spartanConstants",function(){"use strict";return{canaries:{marketCookieNotFound:"c.marketCookieNotFound",nacDhpReadyForTracking:"c.nacDhpReadyForTracking",settingRestored:"c.settingRestored",ttafAnimation:"c.ttafAnimation",topSitesCanary:"c.topSites",topSitesReadyCanary:"c.topSitesReady"},cookieExpirations:{tenYears:3650},cookieNames:{activityId:"aid",childMode:"child",contentFilter:"catf",feedFilter:"orfc_feeds",followFilter:"fol",launchNumber:"launchNumber",marketReset:"mktreset",marketSelection:"ntps",noAppCache:"nactk",relatedFilter:"rcatf",sptMarket:"sptmarket",topicsFilter:"tsf"},eventNames:{authTokenRenewalCompleted:"authTokenRenewalCompleted",forcePageReload:"forcePageReload",sectionHeaderDockedEvent:"sectionHeaderDocked",wamHasMsaToken:"wamHasMsaToken"}}});define("errorCategory",{updateTrackingInfo:{errId:1001,errMsg:"Error found",errSource:" topsites.js function updateTrackingInfo(appId, elements)"},getCuratedSitesData:{errId:1002,errMsg:"curatedSites empty",errSource:"topsites.js function render()"},invalidAjaxResponse:{errId:1003,errMsg:"Error in Ajax Response",errSource:" spartanRiverLoader.js function showDelayLoadedModules(response)"},ajaxServerError:{errId:1004,errMsg:"Server error for ajax response: ",errSource:" spartanRiverLoader.js ajax.get"},missingContentError:{errId:1005,errMsg:"Missing required content: ",errSource:" spartanRiverLoader.js function renderDelayLoadedModules(response)"},riverRenderError:{errId:1006,errMsg:"River failed to render",errSource:" spartanRiverLoader.js function waitForRiverSectionToRender(riverSection)",reportingType:1},serviceUIError:{errId:1007,errMsg:"Service Ui Error: ",errSource:" serviceUIHelper.js",reportingType:1},riverJsonParseError:{errId:1008,errMsg:"Json parsing error for string: ",errSource:" spartanRiverLoader.js"},zeroTopSitesError:{errId:1009,errSource:" topSitesController.js"},dhpNoAppCacheError:{errId:1010,errMsg:"dhp failed to switch to its noAppCache market. ",errSource:"dhp noAppCache page"},jsError:{errId:1011},outlookCardError:{errId:1012,errSource:" outlookCard.js"},emailCardError:{errId:1012,errSource:" emailModuleRenderingHelper.js"},readingListTimeoutError:{errId:1013,errMsg:"did not get back reading list data before timeout",errSource:" serviceUIHelper.js function getReadingListAsync(callback, delay)"},missingRiverItemError:{errId:1014,errMsg:"Missing required river items.",errSource:"riverSection.js function positionRiverSectionItems"},appInstallError:{errId:1015,errMsg:"Failed to install app. Error code: {0}",errSource:"App Id: {0}, source: {1}"},appCacheRapidRefreshError:{errId:1016,errMsg:"Appcache is being refreshed more often than current allowed threshold",errSource:"appCacheHelper.js function checkStatus()"},staticsPoisoningError:{errId:1017,errMsg:"user encountered poisoned statics, in ",errSource:"statics poisoning"},staticsPoisoningWithDhpAppcacheError:{errId:1018,errMsg:"user with dhp cache encountered poisoned statics, in ",errSource:"statics poisoning"},invalidIsSignedInResponse:{errId:1019,errMsg:"Error in is-signed-in Ajax Response ",errSource:"spartanRiverLoader.js function requestSignedInState()"},domElementExistsButIsNotVisible:{errId:1020,errMsg:"DOM element exists but is not visible: ",errSource:"spartanRiverLoader.js function validateVisibility()"},doubleSearchBoxesRenderedError:{errId:1021,errMsg:"Double search boxes rendering on page: ",errSource:"serviceUIHelper.js function traceErrorIfDoubleSearchBoxIsRendered()"},followFeedsUpdateTrackingInfo:{errId:1022,errMsg:"Error found",errSource:"oneRiverToggleFollowFeeds.js function updateTrackingInfo()"},authRefreshBlockedError:{errId:1023,errMsg:"server failed to authenticate valid WAM app token, blocking page refresh",errSource:" establishSignedInState.js",ignorePV:1,reportingType:1},browserAccessError:{errId:1024,errMsg:"Browser Access Error: ",errSource:" browserAccess.js"},appCacheOnErrorStatus:{errId:1026,errMsg:"appcache onerror fired ",errSource:" appCacheHelper.js",reportingType:1},appCacheOnObsoleteStatus:{errId:1027,errMsg:"appcache update status resulted in obsolete state: ",errSource:" appCacheHelper.js"},applicationCacheUnhealthyState:{errId:1029,errMsg:"ApplicationCache is in an unhealthy state, status is: ",errSource:"appCacheHelper.js"},delayUpdatedUserProfile:{errId:1030,errMsg:"Issue with response of delay updated user profile: ",errSource:"delayUpdatedUserProfile"},officeIFrameFailedToLoad:{errId:1031,errMsg:"Office iframe failed to load: "},irisCoachmarkFailedToParseJson:{errId:1032,errMsg:"IrisCoachmark failed to parse Iris Dispatch json response string.",errSource:"irisCoachmark.js"},tabbedInfopaneRemainingTabs:{errId:1033,errMsg:"Tabbed Infopane remaining tabs failed to load.",errSource:"tabbedInfopaneModule.js"},getAuthTokenResultNull:{errId:1035,errMsg:"get MSA Auth returned null",errSource:" msaAuthHelper.js",reportingType:1},getAuthTokenSUError:{errId:1036,errMsg:"",errSource:" msaAuthHelper.js",reportingType:1},getAuthTokenWamError:{errId:1037,errMsg:"",errSource:" msaAuthHelper.js",reportingType:1},getAuthTokenRejected:{errId:1038,errMsg:"browserAccess get auth token API promise was rejected",errSource:" msaAuthHelper.js",reportingType:1},layoutCustomizationError:{errId:1040,errMsg:"Error while customizing layouts",errSource:"pageLayoutHelper.js"},getUserMigrationDataError:{errId:1041,errMsg:"Failed to get page clicks information for user from migration data endpoint.",errSource:" pageClicksTracker.js",reportingType:1},BingImageOfTheDayErrors:{errId:1050,errMsg:"Bing Image failed to load on page",errSource:" bingImageFull.js",reportingType:1},NullInPageTimings:{errId:1060,errMsg:"Null entries: ",errSource:" ttafMax.js",reportingType:1},componentUIFailedToAttach:{errId:1301,errMsg:"Component UI failed to attach",errSource:" cortanaSearch.js"},componentUIDetached:{errId:1302,errMsg:"Component UI detached.",errSource:" cortanaSearch.js"},componentUISetTabInfoAsyncFailed:{errId:1303,errMsg:"Component UI SetTabInfoAsync Failed",errSource:" cortanaSearch.js"},componentUISetNtpExperimentsAsyncFailed:{errId:1304,errMsg:"Component UI setNtpExperimentsAsync Failed",errSource:" cortanaSearch.js"},componentUISetPageInfoAsyncFailed:{errId:1305,errMsg:"Component UI setPageInfoAsync Failed",errSource:" cortanaSearch.js"},domElementExistsButIsNotVisibleForSearch:{errId:1306,errMsg:"DOM element exists but is not visible: ",errSource:"verifyPageElements.js function validateVisibility()"},searchVisibleButUnstyled:{errId:1307,errMsg:"DOM element exists and visible, but unstyled: ",errSource:"verifyPageElements.js function validateVisibility()"},componentUISetLocationAsyncFailed:{errId:1308,errMsg:"Component UI setLocationAsync Failed.Error: ",errSource:"cortanaSearch.js function getLocationInfoAndSetToCortana()"},recommendedSearchApiTimeout:{errId:1309,errMsg:"Recommended search api response not received within configured time:",errSource:"popularNow.js"},recommendedSearchApiCallFailed:{errId:1310,errMsg:"Recommended search api returned error response:",errSource:"popularNow.js"},recommendedSearchRenderFailed:{errId:1311,errMsg:"Recommended searches failed to render: ",errSource:"popularNow.js"},recommendedSearchInvalidJsonResponse:{errId:1312,errMsg:"Recommended Search api sent invalid Json response ",errSource:"popularNow.js"},searchHistoryApiTimeout:{errId:1320,errMsg:"Search history api response not received within configured time:",errSource:"searchHistory.js"},searchHistoryApiCallFailed:{errId:1321,errMsg:"Search history api returned error response:",errSource:"searchHistory.js"},unknownPageRefreshInfo:{errId:1400,errMsg:"refreshPage reason: unknown ",errSource:" spartanSharedHelper.js",isInfo:1,ignorePV:1,reportingType:1},achForceUpdateUnCachedState:{errId:1401,errMsg:"appCacheHelper.forceUpdate(): applicationCache.status: 0",errSource:"appcacheHelper.js function forceUpdate()",isInfo:1,ignorePV:1,reportingType:1},achOnlineHandler:{errId:1402,errMsg:"Appcache Helper: Browser 'online' event handler",errSource:"appcacheHelper.js function offlineAction()",isInfo:1,ignorePV:1,reportingType:1},achCheckStatus:{errId:1403,errMsg:"update ready fired",errSource:"appcacheHelper.js function checkStatus()",isInfo:1,ignorePV:1,reportingType:1},achOnObsolete:{errId:1404,errMsg:"appCacheHelper.checkObsoleteStatus(): breaking out of appcache",errSource:"appcacheHelper.js function checkObsoleteStatus()",isInfo:1,ignorePV:1,reportingType:1},establishSignedInState:{errId:1405,errMsg:"establishSignedInState.js: server sign-in state does not match client sign-in state",errSource:"establishSignedInState.js function refreshOnce()",isInfo:1,ignorePV:1,reportingType:1},oldRiverSection:{errId:1406,errMsg:"riverSection.updateAppCacheIfKernelVersionMismatch(): kernel version and river version do not match",errSource:"riveSection.js function updateAppCacheIfKernelVersionMismatch()",isInfo:1,ignorePV:1,reportingType:1},oneRiverSection:{errId:1407,errMsg:"riverSectionOneRiver:updateAppCacheIfKernelVersionMismatch(): kernel version and river version do not match",errSource:"riveSectionOneRiver.js function updateAppCacheIfKernelVersionMismatch()",isInfo:1,ignorePV:1,reportingType:1},spartanDhpNoAppCache:{errId:1408,errMsg:"spartanDhpNoAppCache.js: taking DHP page out of appcache",errSource:"spartanDhpNoAppCache.js function doRefresh()",isInfo:1,ignorePV:1,reportingType:1},srlLoadMeControl:{errId:1409,errMsg:"load me control refresh",errSource:"spartanRiverLoader.js function loadMeControl()",isInfo:1,ignorePV:1,reportingType:1},kernelJsFallback:{errId:1410,errMsg:"kernel fallback JS refresh",errSource:"kernelErrorFallBackPage.js",isInfo:1,ignorePV:1,reportingType:1},pageRefreshInfo:{errId:1499,errMsg:"refreshPage reason: ",errSource:" spartanSharedHelper.js",isInfo:1,ignorePV:1,reportingType:1},cookiesAccepted:{errId:1500,errMsg:"cookies accepted",errSource:"cookieComplianceHelper.js function grantCookieConsentAndDecorateLink()",isInfo:1,reportingType:1},pcSettingsChanged:{errId:1501,errMsg:"pageCustomization.js: settings changed",errSource:"pageCustomization.js function refreshPage()",isInfo:1,reportingType:1},pcResetSettings:{errId:1502,errMsg:"pageCustomization.resetSettings(): setting reset",errSource:"pageCustomization.js function resetSettings()",isInfo:1,reportingType:1},pcSaveEdgeModal:{errId:1503,errMsg:"pageCustomization.saveEdgeStartModalMarketConfig(): market changed",errSource:"pageCustomization.js function saveEdgeStartModalMarketConfig()",isInfo:1,reportingType:1},relatedCategory:{errId:1504,errMsg:"relatedCategory.onRelatedFilterClick",errSource:"relatedCategory.js",isInfo:1,reportingType:1},rsnffFeedFilterClicked:{errId:1505,errMsg:"riverSectionNewsFeedFilters.onRelatedCategoriesClick(): news-feed filter clicked",errSource:"riverSectionnewsFeedFilters.js function onNewsFeedFilterClick()",isInfo:1,reportingType:1},rsnffRelatedFilterClicked:{errId:1506,errMsg:"riverSectionNewsFeedFilters.onNewsFeedFilterClick(): related news-feed filter clicked",errSource:"riverSectionnewsFeedFilters.js function onRelatedFilterClick()",isInfo:1,reportingType:1},topicSearch:{errId:1507,errMsg:"topicSearch.checkAndSubmit",errSource:"topicSearch.js function checkAndSubmit()",isInfo:1,reportingType:1},oneRiverErrorRefresh:{errId:1508,errMsg:"oneRiverErrorRefresh.refreshLinkClicked",errSource:"oneRiverErrorRefresh.js function refreshLinkClicked()",isInfo:1,reportingType:1},oneRiverFeeds:{errId:1509,errMsg:"oneRiverFeeds.feedButtonClicked",errSource:"oneRiverFeeds.js",isInfo:1,reportingType:1},topSitesHelper:{errId:1510,errMsg:"display option set",errSource:"topSitesHelper.js function setDisplayCoookieAndRefreshIfNeeded()",isInfo:1,reportingType:1},msnLogoClicked:{errId:1511,errMsg:"page refresh on msn logo click",errSource:"pageRefreshByUser.js function refreshPage()",isInfo:1,reportingType:1},swRegistrationError:{errId:3001,errMsg:"Failed to register ServiceWorker. ",errSource:"swRegistration.js navigator.serviceWorker.register()",reportingType:1},swUnregistrationError:{errId:3002,errMsg:"Failed to unregister ServiceWorker. ",errSource:"swRegistration.js navigator.serviceWorker.getRegistration.unregister()",reportingType:1},swUnregistrationSuccessful:{errId:3003,errMsg:"Unregister ServiceWorker succeeded.",errSource:"swRegistration.js navigator.serviceWorker.getRegistration.unregister()",reportingType:1},swRiverContentStoreError:{errId:3004,errMsg:"Error opening database",errSource:"swRiverContentStore.js function onDbError()",reportingType:1},windowsAccessError:{errId:4001,errMsg:"WinRT Public and Private API Access Error",errSource:" windowsAccess.js"},getCuratedData:{errId:4002,errMsg:"Error fetching curated apps for frequent destinations",errSource:"frequentDestinationsModule.js"},missingAppsData:{errId:4003,errMsg:"Missing curated app list and default app list for frequent destinations",errSource:"frequentDestinationsModule.js"},missingRootSectionError:{errId:4004,errMsg:"Missing required section: ",errSource:"frequentDestinationsModule.js"},frequentDestinationsError:{errId:4005,errMsg:"Error rendering frequent destinations",errSource:"frequentDestinationsModule.js"},appLaunchFailureFromFrequentDestinations:{errId:4006,errMsg:"Failed to launch app from Frequent Destinations section. ",errSource:"frequentDestinationsLaunchHelper"},appLaunchFailureFromAllAppsPivot:{errId:4007,errMsg:"Failed to launch app from All Apps pivot. ",errSource:"allAppsModule"},bingImageOfTheDayError:{errId:4008,errMsg:"Failed to load Bing image on page",errSource:"bingImageOfTheDay"},anaheimBrowserSettings:{errId:4009,errMsg:"Failed to fetch anaheim browser settings",errSource:"anaheimBrowserSettings"},anaheimTopSites:{errId:4010,errMsg:"Failed to render top sites",errSource:"anaheimTopSites"},edgeTopSitesNotVisible:{errId:4011,errMsg:"Failed to render Edge top sites",errSource:"verifyPageElements.js function validateVisibility()"},spaTopSitesNotVisible:{errId:4012,errMsg:"Failed to render SPA top sites",errSource:"verifyPageElements.js function validateVisibility()"},oneTrustLoadError:{errId:5003,errMsg:"Spartan- OneTrust failed to load: ",errSource:"header script tag"},oneTrustDialogError:{errId:5004,errMsg:"Spartan- OneTrust dialog error: ",errSource:"header script tag"},monetizationAdRealTimeScanConfiant:{errId:7500,errMsg:"Failed to work",errSource:"adRTScanConfiantWrapper"},monetizationBingClient:{errId:7530,errMsg:"BingFailed",errSource:"bingAds.js",reportingType:1},bingViewibilityError:{errId:7501,errMsg:"BingViewability",errSource:"bingViewability.js",reportingType:1},monetizationNativeInDisplayBannerTimeout:{errId:7502,errMsg:"Failed to remove top banner in timeout flight",errSource:"adCore.js"},monetizationNativeInDisplayTodayTimeout:{errId:7503,errMsg:"Failed to remove today in timeout flight",errSource:"adCore.js"},clarityError:{errId:7504,errMsg:"Failed to load clarity script",errSource:"clarity.js"}});define("spartanPageDetectionHelper",["location"],function(n){var t=n.pathname,e=t.indexOf("/dhpwinfre")>=0,i=!e&&t.indexOf("/dhp")>=0,c=e||i,r=!i&&t.indexOf("spartan/ntp")>=0,u=!i&&!r&&t.indexOf("/ientp")>=0,f=!i&&!r&&!u&&t.indexOf("/extntp")>=0,o=!i&&!r&&!u&&!f&&t.indexOf("/sntp")>0,h=!i&&!r&&!u&&!f&&!o&&t.indexOf("/mntp")>0,s=r||u||f||o||h,l=!i&&!s&&t.indexOf("compass/ntp")>=0,a=s;return{isAppNtp:l,isDhpPage:i,isDhpWinFrePage:e,isSomeDhpPage:c,isExtNtpPage:f,isShoppingExtNtpPage:o,isMicrosoftNewsExtNtp:h,isIeNtpPage:u,isNtpPage:r,isSomeNtpPage:s,isRiverAjaxLoaded:a}});define("spartanHeaderHelper",["spartanPageDetectionHelper","browserAccess","getCookie","displayOptionsHelper"],function(n,t,i,r){function u(){if(t.features.OneBoxPinnedByDefault)return!0;if(!t.isServiceUiAvailable())return!1;var i=n.isDhpPage;return i?t.isDhpOneBoxPinned():t.isNtpOneBoxPinned()}function f(){var i=!1;return!n.isDhpPage||t.isServiceUiAvailable()&&t.getThirdPartySearchProvider()?n.isNtpPage&&t.isServiceUiAvailable()&&!t.getThirdPartySearchProvider()&&(i=!1):i=!1,i}function e(){return n.isDhpPage?t.isDhpShiftFocusSetToWebContent():t.isNtpShiftFocusSetToWebContent()}function o(){return!1&&n.isDhpPage&&i("bingimage")==0&&!r.shouldRenderTopSitesOnly()}return{isOneBoxPinned:u,shouldFocusShiftToWebContent:f,isFocusShiftToWebContent:e,isBingImageHeaderEnabled:o}});define("spartanSharedHelper",["location","browserAccess","spartanPageDetectionHelper","navigation","headData","requestPageRevealCallback","setCookie","getCookie"],function(n,t,i,r,u,f,e,o){function l(){var n="refresh-reason",t=o(n);t&&(e(n,"",-1,undefined,"/spartan/"),require(["track","errorCategory"],function(n,i){s(n,i,i[t])}))}function a(n,t){require({synchronous:!0},["track","errorCategory"],function(i,r){s(i,r,t);c(n)})}function v(t,i,f,e,o,h,l,a,v,y){require({synchronous:!0},["track","errorCategory"],function(a,p){var w,d,g,nt,tt;s(a,p,i);w="/en-us/weather/today";w=v?w+"?gps=1":w+"?lat="+f.toString()+"&long="+e.toString()+"&cty="+o.toString()+"&subdiv="+h.toString()+"&cntreg="+l.toString()+"&cc=US&type=1&id=&sethome=true&weahidepromo=true";w=w+"&weadegreetype="+y;w=w+"&locale="+u.locale;var it=w.indexOf("?")<0?r.getParams(w,!1,!0):r.getParamsFromUrl(w,!1,!0),rt=$.extend(r.getParamsFromUrl(n.href,!1,!0),it),b=$.param(rt),ut=u.moduleapi,k=ut.split("?")[0]+(b?"?"+b:"");k+=(k.indexOf("?")===-1?"?":"&")+"ou="+n.href;d={RequestUri:n.href.split("?")[0]+(b?"?"+b:""),ExperienceId:u.xdid||null,CacheDuration:null,Type:"kerneldhppage"};g=[{key:"proactivecanvas.oneriver.positioned",type:"spartan.oneriver.proactive",Modules:[{key:"WeatherSdhpTileModule",type:"WeatherSdhpTileModule"}]}];d.Regions=$.map(g,function(n){return n});nt=!1;tt={};$.ajax({url:k,dataType:"html",data:JSON.stringify(d),method:"POST",contentType:"application/json",crossDomain:nt,xhrFields:tt}).then(function(){c(t)})})}function s(n,t,i){i=i||"no reason specified";var r=i||t.unknownPageRefreshInfo;r.forcedDispatch=!0;n.trackAppErrorEvent(r)}function c(f){if(t.isServiceUiAvailable()&&!t.features.TH2Features){if(i.isNtpPage||i.isAppNtp){n.href="about:tabs";return}if(i.isDhpPage){n.href="about:start";return}}if(u.ispreload&&h){var e=r.getParamsFromUrl(n.href,!1,!0);delete e.backgroundpreload;n.replace(r.mergeQueryStringParams(n.origin+n.pathname,e));return}n.reload(f)}var h=!1;return f(function(){h=!0}),l(),{refreshPage:a,updateWeatherSettingsAndRefreshPage:v}});define("webStorage",["window"],function(n){function h(){try{return u in n&&t!==null&&f in n&&i!==null}catch(r){return!1}}function e(n,u){if(r){var f=u?i:t;return f.getItem(n)}}function c(n,t){var i=e(n,t);try{return typeof i=="string"?JSON.parse(i):i}catch(r){console.log(r)}return i}function o(n,u,f){if(r)try{typeof u=="object"&&(u=JSON.stringify(u));var e=f?i:t;e.setItem(n,u)}catch(o){console.log(o)}}function s(n,u){if(r){var f=u?i:t,e=f.getItem(n);return e!==null&&f.removeItem(n),e}}var u="localStorage",f="sessionStorage",t=null,i,r;try{t=n[u]}catch(l){}return i=n[f],r=h(),{supported:r,getItem:e,getObject:c,setItem:o,setObject:o,removeItem:s,removeObject:s}});define("persistentStorageManager",["webStorage","setCookie","getCookie","spartanConstants","browserAccess","initialPersistentSettings"],function(n,t,i,r,u,f){function d(n){var t=o[n];return t&&e[t.id]}function g(t,i){var r=o[t],h;if(r){var u=r.jsonEncoded,c=r.maxRawLength,l=typeof i,f=JSON.stringify(i),a=f.length,v=u?l==="object"&&a<=c:l==="string"&&a<=c+2;if(v)return e[r.id]=u?p(f):i,h=u?f:i,w(r,h),n.setItem(r.id,h),s(),!0}return!1}function nt(t){var i=o[t];i&&(b(i),n.removeItem(i.id),delete e[i.id],s())}function tt(){var i,t;for(i in o)t=o[i],b(t),n.removeItem(t.id),delete e[t.id];s()}function s(){l&&u.writePageSettings(e)}function v(n){var t=e[n.id];return n.jsonEncoded?JSON.stringify(t):t}function y(t){var y=l&&t&&t!=="N/A",s,h,u;for(h in o){var f=o[h],r=f.id,c=f.useCookie;y&&(e[r]=t[r]);u=e[r];u||(u=c?i(r):n.getItem(r),e[r]=u==="null"?u=null:f.jsonEncoded?p(u):u);c?(r!==o.MarketSelection.id||s||i(r)||(s=!0),u&&w(f,v(f))):n.setItem(f.id,v(f))}s&&define(a.marketCookieNotFound,1);define(a.settingRestored,1)}function p(n){return JSON.tryParse(n)}function w(n,i){n.useCookie&&(n.topDomain?t(n.id,i,h,t.topDomain,"/"):(t(n.id,undefined,c),t(n.id,i,h,undefined,k)))}function b(n){n.useCookie&&t(n.id,undefined,c)}var h=182,c=-1,l=u.features.PersistentStorage,a=r.canaries,k="/spartan/",o={CompassHideStateKey:{id:"cmphs",maxRawLength:100,useCookie:!1,jsonEncoded:!0},DefaultShowContent:{id:"dsc",maxRawLength:1,useCookie:!1,jsonEncoded:!1},DisplayedCoachMarkWizards:{id:"cmwr",maxRawLength:250,useCookie:!0,jsonEncoded:!1},FreDialogExistingUser:{id:r.cookieNames.marketReset,maxRawLength:7,useCookie:!0,jsonEncoded:!1},HasMsa:{id:"msa",maxRawLength:1,useCookie:!1,jsonEncoded:!1},MarketSelection:{id:r.cookieNames.marketSelection,maxRawLength:13,useCookie:!0,jsonEncoded:!0,topDomain:!0},OutlookOptIn:{id:"olopt",maxRawLength:1,useCookie:!1,jsonEncoded:!1},ProActiveCanvasFRE:{id:"spnewpcfre",maxRawLength:1,useCookie:!1,jsonEncoded:!1},StructuredDataCardsUserPreference:{id:"scp",maxRawLength:250,useCookie:!0,jsonEncoded:!0},TopicSelection:{id:"epnff",maxRawLength:31,useCookie:!0,jsonEncoded:!0}},e={};return y(f),{saveProperty:g,fetchProperty:d,deleteProperty:nt,clear:tt,loadSettingsFromPersistentStorage:y}});require(["browserAccess"],function(n){n.features.PersistentStorage?n.fetchPageSettingsAsync().then(function(n){define("initialPersistentSettings",n||"N/A")}):define("initialPersistentSettings","N/A")});define("appHelper",["document","colorHelper","format","errorCategory","webStorage"],function(n,t,i,r,u){function c(n,t){for(var r,u,f={},o=n instanceof Array&&n.length||0,i=0;i<o;i++)r=e(n[i]),u=r.aumId||t&&r.pfn,u&&(f[u]=!0);return Object.keys(f)}function e(n){var t={bigCatId:null,aumId:null,pfn:null},i;return n&&(i=n.indexOf("!"),i>0?(t.aumId=n,t.pfn=n.substring(0,i)):n.indexOf(".")>0||n.indexOf("_")>0?t.pfn=n:t.bigCatId=n),t}function h(n){var t=e(n);return l(t)}function l(n){return n.pfn&&o?i(o,n.pfn):n.bigCatId&&s?i(s,n.bigCatId):null}function a(n,t,f,e){var o,s,h,c;return t!=null&&f!=null&&(o=r.appInstallError,s="NA",n.trackAppErrorEvent({errId:o.errId,errMsg:i(o.errMsg,f||s),errSource:i(o.errSource,t||s,e||s)}),h="install_error_"+t,c=u.getItem(h,!0),!c)?(u.setItem(h,"1",!0),!0):!1}function v(t,i,r,u){if(!r||a(t,i,r,u)){var e=h(i);if(e)return f||(f=n.createElement("a")),f.setAttribute("href",e),f.click(),!0}return!1}function y(n,i){var r={color:"",background:"",border:"",action:"",remove:"",isLightBackground:null},u=n,v=i||"#fff",h=t.parseColor(v),c,s;if(h&&(r.background=t.formatColor(h),c=t.grayScale(h)>128,u=u||(c?"#000":"#fff"),r.isLightBackground=c),u){if(s=t.parseColor(u),s){var f=s.r,e=s.g,o=s.b,l,a;t.grayScale(s)>128?(u=t.formatColor(f,e,o,.85),l=t.formatColor(f,e,o,.15),a=t.formatColor(f,e,o,.8)):(u=t.formatColor(f,e,o,.95),l=t.formatColor(f,e,o,.1),a=t.formatColor(f,e,o,.55));r.border=l;r.action=a;r.remove=t.formatColor(f,e,o)}r.color=u}return r}var o="ms-windows-store://pdp/?PFN={0}",s="ms-windows-store://pdp/?productId={0}",f;return{filterAppIdsForAppInstallStateCheck:c,getAppCalculatedColors:y,getApplicationStoreLink:h,tryLaunchStoreProductPage:v,tryParseAppId:e}});define("displayOptionsHelper",["document","browserAccess","serviceuihelper","location","setCookie","getCookie","navigator","trackInfo","headData","navigation","spartanPageDetectionHelper","spartanConstants","cookieComplianceHelper","c.dom"],function(n,t,i,r,u,f,e,o,s,h,c,l,a){function kt(){var t=n.getElementById(g),i=n.querySelector(nt);t&&t.classList.remove(et);i&&i.classList.remove(ot)}function dt(){var t=n.getElementById(g),s=n.querySelector(nt),h=n.getElementById("ntss"),c=n.querySelector("[data-section-id='section.apps.topsites']"),l=n.querySelector("[data-section-id='section.pagecustomization']"),r,f,e,p;if(st()&&c&&c.classList.add("show-ts"),w()){var b=n.body,i="",a=n.getElementById("cc-banner");a&&(i+=a.outerHTML);r="";f=n.getElementById("searchhistory");f&&(r+=f.outerHTML);e=n.querySelector(".head-wrapper");e&&(r+=e.outerHTML);i+=r;var v=n.getElementById("cacpageoverlay"),y=n.getElementById("cacpagestatement"),o=n.getElementById("maincontent"),u="";v&&y&&(u=v.outerHTML+y.outerHTML);tt&&l&&(u+=l.outerHTML);o&&u!=""&&(o.innerHTML=u,i+=o.outerHTML);t=n.getElementById(g);t&&(t.className="cs-no-ts",i+=t.outerHTML);n.body.innerHTML=i}else it()&&(t&&(p=n.getElementById(wt),t.className=et,p&&t.classList.add(pt)),h&&(h.innerHTML=""),s&&s.classList.add(ot));ct()}function gt(){return y}function w(){return p?y==v.BlankPage:!1}function ni(){return!w()&&i.showSearchHistory()&&!t.getThirdPartySearchProvider()}function it(){return ut||(p||rt)&&y==v.TopSitesOnly}function st(){var n=b?t.getDisplayOption():f(d);return bt&&(n!=v.BlankPage||at)&&n!=v.NewsFeedOnly}function ti(){return ut?!1:p||rt?!w()&&!it():!0}function ht(n){ft&&y!=n&&(n==v.TopSitesAndSuggestedContent||n==v.TopSitesOnly||n==v.BlankPage||n==v.NewsFeedOnly&&tt)&&(y=n,a.grantCookieConsentAndDecorateLink(null,null,!0),vt&&u(d,n.toString(),365),b&&i.setDisplayOption(n),ct())}function ct(){o.trackingDisabled=w()&&i.isEnterpriseMode()}function ii(){return f(yt)==="0"}function ri(){require(["persistentStorageManager"],function(n){if(!n.fetchProperty("MarketSelection")){var i="DefaultShowContent",u=n.fetchProperty(i);u||(h.getParamsFromUrl(r.href).enableRegulatoryPsm=="1"||t.isServiceUiAvailable()&&t.getDisplayOption()==2||ht(v.TopSitesAndSuggestedContent),n.saveProperty(i,"1"))}})}var lt=s.locale&&s.locale.toLowerCase(),y,v=t.constants.displayOptionValues,p=c.isSomeNtpPage||c.isAppNtp,rt=c.isSomeDhpPage,at=c.isDhpPage&&lt==="zh-cn",b=t.isServiceUiAvailable()&&p,vt=!b,d="iedo",yt=l.cookieNames.childMode,ut=ii(),ft=(p,!0),k;ft&&(k=b?t.getDisplayOption():f(d),k>=0&&(y=!e.onLine&&k!=v.BlankPage?v.TopSitesOnly:k,i.features&&i.features.CanSetContentDefaultDisplayOption&&e.onLine&&ri()));var pt="kids",et="cs-ts-only",g="inlinesettings",wt="kidsmode",ot="ts-only-pad",nt="div[data-section-id='section.apps.topsites']",bt=!!n.querySelector(nt),tt=!1;return tt=c.isIeNtpPage,{configurePageToShowSuggestedContent:kt,getNtpDisplayOptionValue:gt,isDisplayOptionSetToBlank:w,setNtpDisplayOptionValue:ht,modifyPageBasedOnUserSetting:dt,shouldRenderSearchHistory:ni,shouldRenderTopSites:st,shouldRenderTopSitesOnly:it,shouldRenderRiver:ti}});define("domHelper",function(){function i(i){while(i){var r=t(i,"href");if(!r)break;if(n(r))return r;i=r.parentNode}}function n(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase(),i=t&&t==="a"&&n.getAttribute("href");return i&&i.trim()!=="#"}function t(n,t){if(t)while(n&&n.getAttribute){if(n.getAttribute(t))return n;n=n.parentNode}}function r(t){if(!t||!n(t))return null;var i=t.href;return/^https*/i.test(i)?i:null}return{getNearestAnchorTag:i,isAnchorTag:n,selfOrAncestorWithAttribute:t,getContentAnchorTagAbsoluteUrl:r}});define("freExperienceHelper",["document","serviceuihelper","getCookie","setCookie","persistentStorageManager","c.dom"],function(n,t,i,r,u){function g(){return e&&!(c&h)}function w(){return e?(c&&!i(s)&&r(s,1,o),!c):!i(s)}function nt(i){if(e){var u=t.getExperienceDisplayed(),s=n.cookie;s.indexOf(f)!==s.lastIndexOf(f)&&r(f,100,-1);u&&!k(a,i)&&r(a,100,o,null,"/");i?b(i):u&h&&!k(f)?r(f,100,o,null,"/"):b()}}function b(n){d()||t.setExperienceDisplayed(n?v.NtpDisplayed:h)}function k(n,t){var r=i(n);return t?r:r&&r!="1"}function tt(){return y}function it(){n.body.classList.add(l)}function rt(){r(s,1,o);u.saveProperty(p,"false");n.body.classList.remove(l)}function d(){return n.body.classList.contains(l)}var e=t.features.TH2Features,o=182,f="launchNumber",a="featuredappsfre",v=t.constants.experienceDisplayedValues,h=v.DhpDisplayed,c=e?t.getExperienceDisplayed():null,l="showstartmodal",s="smd",y=n.getElementById("startmodalmask"),p="FreDialogExistingUser";return!y||(w()?u.fetchProperty("MarketSelection"):u.fetchProperty(p))||it(),{closeEdgeStartModal:rt,getStartModalMask:tt,isDhpFre:g,isFre:w,isEdgeStartModalOpen:d,setFreExperienceMarker:nt}});define("positionHelper",["document"],function(n){return{getEventMousePosition:function(t){var i=n.body,r=n.documentElement,u=i.clientLeft||r.clientLeft||0,f=i.clientTop||r.clientTop||0,e=i.scrollTop||r.scrollTop||0,o=i.scrollLeft||r.scrollLeft||0;return{x:t.clientX+o-u,y:t.clientY+e-f}}}});define("postdata",["serviceuihelper","browserAccess","trackInfo","location","pageInstance","c.deferred"],function(n,t,i,r,u){function f(){var e,o,h;if(t.isServiceUiAvailable()){var c=i.sitePage.flightid||"",s=u.getActivityId()||i.sitePage.requestId||"",f=i.client.clientId()||"",l={flightId:c,MUID:f+";"+s,WebIG:s};(n.setFlightInstrumentationData(l),t.features.UnifiedCookieJar)||(f=i.client.getMuid(),f&&(e={domain:"bing.com",MUID:f},t.setMuidForTabs(e),o=r.host.split(".").reverse(),o.length>1&&(h=o[1]+"."+o[0],e={domain:h,MUID:f},t.setMuidForTabs(e))))}}return{post:f}});require(["browserAccess","window","screen","document","displayOptionsHelper","viewport","mediator","c.riverReady"],function(n,t,i,r,u,f,e){function p(){v(l<y())}function v(i){n.isServiceUiAvailable()&&(i&&(o===!1||n.oneBoxIsShown())?(o=!0,n.showOneBoxAnimation(!1)):o&&l>=y()&&h>=t.scrollY&&(o=!1,n.showOneBoxAnimation(!0)))}function y(){return Math.round(100*(i.deviceXDPI/s)+.49)}var o=!1,h=t.scrollY+15,c="initialDpi",s=i.deviceXDPI,l=100,a=sessionStorage.getItem(c);(a?s=parseInt(a):sessionStorage.setItem(c,s),u.shouldRenderRiver())&&(r.onscroll=function(){v(h<=t.scrollY)},e.sub(f.sizeChangeEventName,p))});define("asimovHelper",function(){function i(){for(var t="",i=0;i<16;i++)t+=n.charAt(Math.floor(Math.random()*n.length));return t+".0"}function r(n){return!!t.test(n)}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new RegExp("^["+n+"]{16}(.[0-9]+)+$");return{generateCV:i,isValidCV:r}});define("colorHelper",["document","measure"],function(n,t){function f(n){return n&&(s(n)||l(n))}function s(n){var r=n&&n.replace("#",""),t=parseInt(r,16),i;return isNaN(t)?null:(i=r.length,i==3)?{r:(t>>8)*17,g:(t>>4&15)*17,b:(t&15)*17,a:1}:i==6||i==8?{r:t>>16&255,g:t>>8&255,b:t&255,a:i==6?1:(t>>24&255)/255}:null}function l(i){var e,f,h;return i?(r||(r=n.createElement("div"),n.querySelector("body").appendChild(r)),r.style.color=i,e=t(r,"color"),f=e.replace(o,"").match(/^(?:rgba?)\(((?:\d+\.)?\d+%?),((?:\d+\.)?\d+%?),((?:\d+\.)?\d+%?)(?:,((:?\d*\.)?\d+))?\)$/),f)?(h=f[4],{r:u(f[1],255,!0),g:u(f[2],255,!0),b:u(f[3],255,!0),a:h?u(h,1):1}):s(e):null}function u(n,t,i){var r=parseFloat(n);return isNaN(r)?0:(r=n.indexOf("%")>=0?Math.max(0,Math.min(100,r))*t/100:Math.max(0,Math.min(t,r)),i?Math.round(r):+(Math.round(r+"e+2")+"e-2"))}function a(n,t,r){if(isNaN(n)&&typeof n=="object"&&n!=null){var u=n;n=u.r;t=u.g;r=u.b}return i(n)&&i(t)&&i(r)?Math.min(255,Math.round(n*.299+t*.587+r*.114)):255}function v(n,t,r,u){var f,e;if(arguments.length==1&&typeof n=="object"&&n!=null&&(f=n,n=f.r,t=f.g,r=f.b,u=f.a),i(n)&&i(t)&&i(r)){if(n=Math.round(n),t=Math.round(t),r=Math.round(r),u===undefined||u==1)return h(n<<16|t<<8|r);if(e=parseFloat(u)||parseInt(u),!isNaN(e)&&u>=0&&u<1)return"rgba("+[n,t,r,u].join(",")+")"}return null}function i(n){return!isNaN(n)&&n!=null&&(typeof n!="string"||n.replace(o,"").length)&&n>=0&&n<=255}function y(n){var t=null;return typeof n=="number"&&n>=0&&n<e&&(t=h(n)),t}function h(n){return"#"+(e|n).toString(16).slice(1)}function p(n,t){var i=c(f(n)),r=c(f(t)),u=i>r?i/r:r/i;return u>=4.5}function c(n){var t=[n.r,n.g,n.b].map(function(n){return n/=255,n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)});return t[0]*.2126+t[1]*.7152+t[2]*.0722+.05}var r,e=16777216,o=/\s+/g;return{parseColor:f,formatColor:v,grayScale:a,rgbNumberToCssHexColor:y,isContrastAcceptable:p}});define("serviceuihelper",["window","evaluate","serviceUIVersion","mediator"],function(n,t,i,r){function vt(){e.CanExitSettingsMode&&o(g,null)}function a(){return f()&&+(u.experienceDisplayedMask||0)}function yt(){return f()&&u.partnerSearchCode}function pt(){return f()&&u.enableRegulatoryPsm}function wt(){return f()&&u.enableCPsm}function bt(){return f()&&u.ntpWebIG}function kt(){return f()&&u.accentColor}function dt(){return!e.CanHideOrShowSearchHistory||f()&&u.showSearchHistory}function gt(){return f()&&u.diagnosticsLevel==="0"}function ni(){e.CanHideOrShowFrequents&&o(et,{page:"advanced",section:"privacy"})}function it(n){var t=JSON.tryParse(n);return t&&t.adId||""}function ti(t){if(e.TH2Features&&"function"==typeof t){var i=s(l);i==="null"?(n.addEventListener(v,function(){var n=it(s(l));t(n)}),o(d,null)):setImmediate(function(){var n=it(i);t(n)})}}function ii(n){o(st,{displayOption:n})}function ri(n){n&~c.BothDisplayed||(n===c.None||n===c.BothDisplayed?ut(n):ut(a()|n))}function ui(n){o(tt,n)}function fi(){o(ct,null)}function ei(){n.removeEventListener(y,rt)}function oi(n){if(!n)return!1;var t=f();return t&&t.ntpWebIG?(n.sitePage=n.sitePage||{},n.sitePage.flightid=t.ntpFlightId,require(["pageInstance"],function(n){n.setActivityId(t.ntpWebIG)}),!0):!1}function s(n){return h&&h.getCachedFrameMessage(n)}function f(){if(!u||!u.ntpWebIG){var n=s(w);hi(n)&&(u=t(n))}return u}function o(n,t){h&&h.postFrameMessage(n,t&&JSON.stringify(t))}function si(){var u=i>=5,n=i>=8,f=i==9,r=i>=10,t=i>=11;return{CanExitSettingsMode:!t,CanGetAuthToken:t,CanHideOrShowFrequents:r,CanHideOrShowSearchHistory:r,CanOmitCorrelationVector:f,CanSearchApps:n,CanSetContentDefaultDisplayOption:!t,CanShowToolTips:n,TH2Features:u,TopSiteStorage:n}}function hi(n){return n&&n!=="null"}function ci(){return!e.CanHideOrShowFrequents||f()&&(u.showFrequentTopSites===undefined||+u.showFrequentTopSites)}function li(n,t,i){if(t&&i){var r={requestId:at,arguments:{url:t,title:n||"Web page",target:ot,icon:i,additionalParams:""}};o(nt,r,t)}}function ai(){var n=JSON.tryParse(s(b));n&&r.pub(ft,n.showFrequentTopSites)}function vi(){var n=JSON.tryParse(s(k));n&&r.pub(p,n.showSearchHistory)}function rt(n){var t=JSON.tryParse(n.data),i;t&&(i=lt[t.requestId],i&&i(t.results))}function ut(n){n!=a()&&o(ht,{experienceDisplayedMask:n})}var v="adIdAvailable",y="apps.search.completed",ft="changeFrequentsVisibility",p="changeSearchHistoryVisibility",l="adId",w="machineState",b="showFrequentTopSites",k="showSearchHistory",d="queryAdId",g="exitSettingsMode",et="browserSettings.open",nt="shell.pinWebsite",ot="taskbar",st="setDisplayOption",ht="setExperienceDisplayedMask",tt="setFlightInstrumentationData",ct="showServiceUI",u,h=n.ServiceUIFrameContext,lt={},at="2c0b1726-032a-4e32-b500-fa55d8c8c8b7",c={None:0,DhpDisplayed:1,NtpDisplayed:2,BothDisplayed:3},e=si();return e.CanHideOrShowFrequents&&n.addEventListener("browserSettings.showFrequentTopSitesChanged",ai),e.CanSearchApps&&n.addEventListener(y,rt),e.CanHideOrShowSearchHistory&&n.addEventListener("browserSettings.showSearchHistoryChanged",vi),{cacheKeys:{adCacheKey:l,errorCacheKey:"error",machineStateCacheKey:w,showFrequentTopSitesCacheKey:b,showSearchHistoryCacheKey:k},constants:{experienceDisplayedValues:c},events:{changeSearchHistoryVisibility:p},messages:{adIdAvailableMessage:v,adIdPostMessage:d,exitSettingsModeMessage:g,pinToTaskbarPostMessage:nt,setFlightInstrumentationDataMessage:tt},features:e,exitSettingsMode:vt,getExperienceDisplayed:a,getPartnerSearchCode:yt,isEnableRegulatoryPsm:pt,isEnableCpsm:wt,getNtpWebIG:bt,getWindowsAccentColor:kt,isEnterpriseMode:gt,openEdgeSettingsPane:ni,pinTopSiteToTaskbarAsync:li,queryAdIdAsync:ti,setDisplayOption:ii,setExperienceDisplayed:ri,setFlightInstrumentationData:ui,showFrequents:ci,showServiceUi:fi,tearDown:ei,tryUpdateTelemetryFields:oi,showSearchHistory:dt}});define("serviceUIVersion",["navigator","navigation","location"],function(n,t,i){var f,e=t.getParamsFromUrl(i.href),u,o,r;return e.suiv&&(u=parseInt(e.suiv,10),u)?u:(n&&n.userAgent&&(o=n.userAgent,r=o.match(/serviceui[/\s]*(\d+)*\.?\d*/i),r&&r.length&&(f=parseInt(r[1],10)||1)),f||-1)});define("browserAccess",["document","serviceUIComm","serviceUIVersion","colorHelper","appHelper","promise","mediator","errorCategory"],function(n,t,i,r,u,f,e,o){function ft(){var f=i>=4,u=i>=5,n=i>=8,l=i===9,s=i>=9,e=i>=10,r=i>=11,h=i>=12,c=i>=13,t=i>=14,o=i===12||i===13;return{ServiceUIAvailable:i>0,CanGetAppInstalledState:f,CanLaunchApp:f,PersistentStorage:u,CanQueryFavIcons:u,TH2Features:u,ServiceTabs:n,CanLaunchAppWithPfnOrAumId:n,CanGetOneBoxPosition:n,CanRenderHtmlHeader:n,TopSiteStorage:n,CanUseFrameAddressBox:s,LaunchAppWithUri:e&&!t,CanHideOrShowFrequents:e,CanFetchTabContext:r,UnifiedCookieJar:r,CanGetAuthToken:r,OneBoxPinnedByDefault:r,UserInfoSettings:h,CanGetTabId:c,CanGetPersonalizationData:t,CanGetUserInputId:t,NavigateApiEnabled:n&&!o,CanGetLocation:t,CanUseNewAuth:t,AppCacheForceRefreshFromServer:o}}function d(){return i>0}function et(){t.sendMessage({messageName:"showServiceUI"})}function h(){return l||(l=t.getCachedFrameMessageObject("machineState")),l}function ot(){return+h().newTabPageDisplayOption}function st(){return h().lang}function ht(){return h().market}function g(){var n=h().experiments;return n&&n.features}function ct(n){var r,t=g(),u,i;if(t&&t.length)for(u=t.length,i=0;i<u;i++)if(t[i].id===n){r=t[i];break}return r}function lt(){return h().showContextCardsDefault}function at(){return h().thirdPartySearchProvider}function nt(){return h().isHostIsolationEnforced}function vt(){return h().isLightTheme}function yt(n){return(n||s.CanRenderHtmlHeader)&&(h()||{}).isDHPAddressBarPinned}function pt(n){return(n||s.CanRenderHtmlHeader)&&(h()||{}).isNTPAddressBarPinned}function wt(){return s.CanRenderHtmlHeader&&(h()||{}).isDHPShiftFocusSetToWebContent}function bt(){return s.CanRenderHtmlHeader&&(h()||{}).isNTPShiftFocusSetToWebContent}function kt(){return s.CanGetPersonalizationData?nt()?f.reject("Unable to get personalization data when host isolation is enabled."):t.getObjectAsync({cacheKey:"personalizationData",eventName:"personalizationData.get-completed",messageName:"personalizationData.get",checkCacheBeforeMessage:!1}).then(function(n){return n.results&&n.results.length?n.results[0]:null}):f.reject("Personalization data is not available.")}function dt(){return s.TopSiteStorage?t.getObjectAsync({cacheKey:"getTopSites",eventName:"topsitesavailable",messageName:"getTopSites",checkCacheBeforeMessage:!1}).then(function(n){return n.results||[]}):f.reject("Top sites storage feature is not supported.")}function gt(n){if(!s.TopSiteStorage)throw"Top sites storage feature is not supported.";t.sendMessage({messageName:"setTopSites",userArguments:{topsites:n}})}function ni(){if(!s.TopSiteStorage)throw"Top sites storage feature is not supported.";t.sendMessage({messageName:"clearTopSites"})}function ti(n){var i,u,o;if(n=n||[],!s.CanQueryFavIcons)return f.reject("Querying favicons not supported.");if(!n.length)return f.resolve({});for(i={},u=0,o=n.length;u<o;u++){var h=n[u],c=h,e=h.replace(/^(https?:\/\/)?(www\.)?/,"");["http://"+e,"http://www."+e,"https://"+e,"https://www."+e].forEach(function(n){var t=i[n]||(i[n]=[]);t.push(c)})}return t.getObjectAsync({cacheKey:"favIcons",eventName:"faviconsavailable",messageName:"queryFavIcons",userArguments:{webSiteUrls:Object.keys(i)},checkCacheBeforeMessage:!1,callMode:t.callModes.Serial}).then(function(n){for(var t,o,e=n.results||[],u={},f=0,s=e.length;f<s;f++)t=e[f],o=i[t.webSiteUrl],o.forEach(function(n){var i=u[n],f;i&&(i.icon||!t.favIconBase64)||(f={siteUrl:n,icon:t.favIconBase64,background:r.rgbNumberToCssHexColor(t.favIconBackgroundColor),backgroundFromAlgo:!0},u[n]=f)});return u})}function ii(n){if(!s.ServiceUIAvailable)throw"Cannot remove site. Service UI not supported.";t.sendMessage({messageName:"removeFrequent",userArguments:{url:n}})}function ri(n){if(!s.CanLaunchApp)throw"Launching apps is not supported.";var i=u.tryParseAppId(n);if(n=i.aumId?i.aumId:s.CanLaunchAppWithPfnOrAumId&&i.pfn?i.pfn:"",n)t.sendMessage({messageName:"launchApp",userArguments:{appId:n}});else throw"Unable to launch app. Unrecognized APP ID format: "+n;}function ui(n){if(!s.CanGetAppInstalledState)return f.reject("Getting app install state is not supported.");var i=u.filterAppIdsForAppInstallStateCheck(n,s.CanLaunchAppWithPfnOrAumId);return i&&i.length?t.getObjectAsync({cacheKey:"apps",eventName:"appsavailable",messageName:"queryApps",userArguments:{appIds:i},checkCacheBeforeMessage:!1,callMode:t.callModes.Serial}).then(function(n){return n.results||[]}):f.resolve(null)}function fi(n){return t.getObjectAsync({cacheKey:"localResults",eventName:"localresultsavailable",checkCacheBeforeMessage:!0}).then(function(t){var i,e,o;if(t===null)return null;for(var u=[],f=t&&t.results,h=f&&f.length,s=0;s<h&&u.length<n;)i=f[s++],i&&i.type==="frequent"&&i.url&&(e=null,i.iconUri&&(e=(i.iconUri.indexOf(":")<0?"data:image/png;base64,":"")+i.iconUri),o=r.rgbNumberToCssHexColor(i.tileColor),u.push({appId:i.appId,background:o,backgroundFromAlgo:!!o,icon:e,title:i.title,siteUrl:i.url}));return u})}function ei(){return s.CanFetchTabContext?oi("tabContext.get-completed","tabContext.get"):f.reject("tab context feature is not supported.")}function oi(n,i,r){return t.getObjectAsync({eventName:n,messageName:i,checkCacheBeforeMessage:!1,resultAvailableInEvent:!0,userArguments:r}).then(function(n){return n||[]})}function si(){return s.UserInfoSettings?t.getObjectAsync({eventName:"userInfo.primaryUser.get-completed",messageName:"userInfo.primaryUser.get",checkCacheBeforeMessage:!1,resultAvailableInEvent:!0,timeoutMs:1e4}):f.reject("Getting user settings is not supported.")}function hi(){return s.PersistentStorage?t.getObjectAsync({cacheKey:"pageSettings",eventName:"settingsavailable",messageName:"fetchPageSettings",checkCacheBeforeMessage:!1}).then(function(n){return JSON.tryParse(n&&n.results)}):f.reject("Persistent storage is not available.")}function ci(n){if(!s.PersistentStorage)throw"Persistent storage is not available.";t.sendMessage({messageName:"writePageSettings",userArguments:n})}function li(n,i){if(s.LaunchAppWithUri&&n&&i){var r={arguments:{uri:n,pfn:i}};t.sendMessage({messageName:"apps.launchUri",userArguments:r})}}function ai(){return s.CanGetTabId?t.getObjectAsync({cacheKey:"shellTabId",eventName:"shelltabidavailable",checkCacheBeforeMessage:!0,timeoutMs:500}).then(function(n){return n.result.ShellTabId||[]}):f.reject("Getting tab ID is not supported in this ServiceUI version.")}function vi(){return s.CanGetTabId?t.getObjectAsync({cacheKey:"shellTabGroupId",eventName:"shelltabgroupidavailable",checkCacheBeforeMessage:!0,timeoutMs:500}).then(function(n){return n.result.ShellTabGroupId||[]}):f.reject("Getting tab group ID is not supported in this ServiceUI version.")}function yi(){return s.CanGetLocation?t.getObjectAsync({cacheKey:"location",eventName:"locationavailable",checkCacheBeforeMessage:!0,timeoutMs:500}):f.reject("Getting location is not supported in this ServiceUI version.")}function pi(){return s.CanGetUserInputId?t.getObjectAsync({cacheKey:"userInputId",eventName:"uidavailable",checkCacheBeforeMessage:!0,timeoutMs:500}).then(function(n){return n.result.uid||[]}):f.reject("Getting user input ID is not supported in this ServiceUI version.")}function wi(n,i,r,u){if(d()&&s.NavigateApiEnabled&&typeof n=="string"&&n.length){r&&r.preventDefault();var f={targetUrl:n,navigationType:i||c.currentTab};t.sendMessage({messageName:"navigate",userArguments:f})}else u&&(c.backgroundTab||c.newTab||c.newWindow)&&u.setAttribute("target","_blank")}function bi(){t.sendMessage({messageName:"firstRunExperience.rendered"})}function ki(n){if(s.UnifiedCookieJar)throw"Should not be called if there is unified cookie jar support.";t.sendMessage({messageName:"setMuidForTabs",userArguments:n})}function di(n){return s.CanGetAuthToken?t.getObjectAsync({cacheKey:"tokenResponse",eventName:"tokenresponseavailable",messageName:"getTokenAsync",checkCacheBeforeMessage:!1,resultAvailableInEvent:!1,callMode:t.callModes.Serial,timeoutMs:n.timeoutMs||0,userArguments:n}):f.reject("Getting authentication token is not supported in this ServiceUI version.")}function gi(n){if(!s.CanUseNewAuth)return f.reject("Getting authentication Token is not supported in this ServiceUI version. Please use getAsyncToken()");if(!n||!n.requestId||!n.resource)return f.reject("Invalid request parameters.");var i,t;return i=n.accountId?{providerType:"AAD",accountId:n.accountId,aadProviderId:"https://login.windows.net/",aadScope:n.scope,aadResource:n.resource}:{aadScope:n.scope,aadResource:n.resource},n.isSilent?(t=n.accountId?"GetTokenForAccountSilently":"GetTokenForPrimaryAccountSilently",tt(n.requestId,t,i)):(t=n.accountId?"GetTokenForAccount":"GetTokenForPrimaryAccount",tr(n.requestId,t,i))}function nr(n){if(!s.CanUseNewAuth)return f.reject("Current ServiceUI version doesn't support this API");if(!n||!n.requestId||!n.scope)return f.reject("Invalid request parameters.");var t,i;return n.accountId?(i="GetTokenForAccountSilently",t={providerType:"MSA",accountId:n.accountId,msaProviderId:"https://login.live.com",msaScope:n.scope}):(i="GetTokenForPrimaryAccountSilently",t={msaScope:n.scope}),tt(n.requestId,i,t)}function tr(n,i,r){var u=JSON.stringify({requestId:n.toString(),action:i,arguments:r});return t.invokeMethodAsync({eventName:"auth.webAccountManagerRequest-completed",methodName:"showAuthDialog",resultAvailableInEvent:!0,timeoutMs:0,userArguments:[u]})}function tt(n,i,r){var u={requestId:n.toString(),action:i,arguments:r};return t.getObjectAsync({eventName:"auth.webAccountManagerRequest-completed",messageName:"auth.webAccountManagerRequest",checkCacheBeforeMessage:!1,resultAvailableInEvent:!0,callMode:t.callModes.ConcurrentNonShared,timeoutMs:0,userArguments:u})}function ir(n){s.ServiceUIAvailable&&(isNaN(n)||n<=0||t.sendMessage({messageName:"experiment.rendered",userArguments:{expId:n}}))}function rr(n){y=n}function ur(n){y&&!s.OneBoxPinnedByDefault&&(e.pub(n?w:b),t.sendMessage({messageName:n?"htmlScrolledToTop":"htmlScrolledDown"}))}function fr(n){if(!s.CanGetOneBoxPosition)return"";if(!n&&v)return v;var i,r=t.getCachedFrameMessageObject("addressBarPosition");return i=r&&r.addressBarPosition?r.addressBarPosition:h()&&l.addressBarPosition,v=i,i}function it(n){return ut===fr(n)}function rt(t){if(s.CanGetOneBoxPosition&&y){var i=it(!0),r=n.querySelector("body"),u=!!n.body.className.match("htmlheader");r&&r.classList.toggle("obshown",i);er(t,i,u)}}function er(n,t,i){n&&n.isOnDomLoad&&t?a={isOnPage:t,timeStamp:new Date}:a&&i&&!p&&t!==a.isOnPage&&new Date-a.timeStamp<5e3&&(or(o.doubleSearchBoxesRenderedError),p=!0)}function or(n){require(["track","c.pageComplete"],function(t){t.trackAppErrorEvent(n)})}function sr(n,i,r){(s.CanRenderHtmlHeader||r)&&(t.sendMessage({messageName:"pinAddressBar",userArguments:{pinState:n}}),t.sendMessage({messageName:k,userArguments:{setFocus:i}}))}function hr(n){s.CanRenderHtmlHeader&&t.sendMessage({messageName:k,userArguments:{setFocus:n}})}function cr(n,i){t.sendMessage({messageName:"frameAddressBox.setPlaceholderTextSetting",userArguments:{arguments:{hideTextOnStartPage:n,hideTextOnNewTabPage:i}}})}var s=ft(),l,v,ut="page",y=!0,a,p=!1,w="oneboxdisplayed",b="oneboxhidden";s.CanGetOneBoxPosition&&window.addEventListener("addressbarpositionchanged",rt);var k="shiftFocusToWebContent",c={backgroundTab:"bgTab",currentTab:"currentTab",newTab:"newTab",newWindow:"newWindow",none:"none"};return{features:s,constants:{navigationTypes:c,displayOptionValues:{TopSitesAndSuggestedContent:0,TopSitesOnly:1,BlankPage:2,NewsFeedOnly:3}},events:{oneBoxDisplayed:w,oneBoxHidden:b},isServiceUiAvailable:d,showServiceUI:et,getDisplayOption:ot,getMachineOsLanguage:st,getMachineOsMarket:ht,getEdgeExperiment:ct,getEdgeExperiments:g,getShowContextCardsDefault:lt,getThirdPartySearchProvider:at,getIsHostIsolationEnforced:nt,getIsLightTheme:vt,isDhpOneBoxPinned:yt,isNtpOneBoxPinned:pt,isDhpShiftFocusSetToWebContent:wt,isNtpShiftFocusSetToWebContent:bt,getTopSitesAsync:dt,setTopSites:gt,clearTopSites:ni,getFavIconsAsync:ti,removeFrequentSite:ii,launchApp:ri,getAppInstalledStateAsync:ui,getFrequentSitesAsync:fi,getTabContextAsync:ei,fetchPageSettingsAsync:hi,writePageSettings:ci,getUserSettingsAsync:si,launchAppWithUri:li,navigate:wi,setWindowFreRendered:bi,getShellTabIdAsync:ai,getShellTabGroupIdAsync:vi,getUserInputIdAsync:pi,setMuidForTabs:ki,getPersonalizationDataAsync:kt,getTokenAsync:di,getTokenForAadAccountAsync:gi,getTokenForMsaAccountAsync:nr,getLocationAsync:yi,oneBoxIsShown:it,enableOneBoxAnimation:rr,showOneBoxAnimation:ur,updateOneBoxPositionClass:rt,pinOneBox:sr,shiftFocusToWeb:hr,setFrameAddressBoxPlaceholderText:cr,sendEdgeExperimentConfirmation:ir}});require(["mediator","localStorage"],function(n,t){function r(n){var r=new Date,u=r.getTime();t.setItem(i,JSON.stringify({time:u,data:n?n:"2"}))}var i="fpr";n.sub("forcePageReload",r)});define("spartanJQueryLoader",["document","staticsLoaderHelper"],function(n,t){return function(){if(!define.is("jquery")){var r=n.getElementsByTagName("head")[0],i=r.getAttribute("data-jquery");if(!i){console.error("Could not find jQuery URL on head tag.");return}t.loadJs(i)}}});define("ttaf",["window","perfMarker","requestAnimationFrameBackground"],function(n,t,i){function u(){r||(r=!0,t("TTAF-v2",!0),i(function(){setTimeout(function(){var i="TTAF";t(i,!0);n.windowsPerfMarker(i);n.windowsPerfMarker("TTPR2");define("c.ttafDefined",1)},0)}))}var r=!1;return u});define("peregrineAppCacheStorageHelper",["webStorage"],function(n){function t(){n.removeItem("ac_prd");n.removeItem("ac_shd");n.removeItem("ac_sai")}return{cleanupItems:t}});require(["peregrineAppCacheStorageHelper","c.dom"],function(n){n.cleanupItems()});define("delayLoadModules",["document","riverLoader"],function(n,t){function i(){return t.loadAsync().then(function(i){var r=n.getElementById("delayloadedcontent");r&&i&&r.insertBefore(i,r.firstChild);t.performPostAttachActionsAsync()})}return function(){return i()}});define("serviceUIComm",["window","promise","errorCategory"],function(n,t,i){function k(n){if(!n||!n.cacheKey&&!n.resultAvailableInEvent)return t.reject("cacheKey property is required.");if(!n.eventName&&!n.checkCacheBeforeMessage)return t.reject("eventName property is required when not checking cache.");var i=n.callMode||r.ConcurrentShared;return(n.callMode=i,i===r.Serial&&!n.messageName)?t.reject("messageName property is required in serial execution mode."):i===r.ConcurrentNonShared&&!n.resultAvailableInEvent?t.reject("With ConcurrentNonShared call mode, resultAvailableInEvent must be specified."):nt(n).then(function(i){if(i)return i;var r=a(n);return t.race([l(r),tt(r)])})}function h(n){var t=null;n.userArguments&&(t=JSON.stringify(n.userArguments));e.postFrameMessage(n.messageName,t)}function d(n){var u=n.methodName,i,f;return u?n.messageName?t.reject("messageName property should not be present in requestArguments when calling invokeMethodAsync."):n.callMode===r.Serial?t.reject("Serial execution is not supported."):(i=e[u],!i)?t.reject("serviceUICommDirect: method not supported : "+u):(n.callMode=n.callMode||r.ConcurrentShared,n.eventName?(f=a(n),t.race([l(f),it(f,i)])):t.resolve(i.apply(null,n.userArguments))):t.reject("methodName property is required when calling invokeMethodAsync.")}function g(t,i){n.addEventListener(t,function(n){var t=JSON.tryParse(n.data);t&&i(t)})}function nt(n){return new t(function(t,i){if(n.checkCacheBeforeMessage||!n.messageName){var r=p(n);if(r){t(r);return}if(!n.eventName){i("Item was not found in the frame message cache.");return}}t()})}function l(i){return new t(function(t,f){var e=i.timeoutMs<=0?0:i.timeoutMs||w;i.timeoutId=e&&n.setTimeout(function(){var t=u.indexOf(i),n;t>=0&&u.splice(t,1);n="Timed out waiting for event "+i.eventName;f(n);s(n);i.callMode===r.Serial&&o(i.requestKey)},e)})}function a(t){var i=t.callMode,u=t.userArguments,f;return f=i===r.ConcurrentNonShared?u.requestId:t.methodName||t.messageName,{eventName:t.eventName,messageName:t.messageName,requestKey:f,userArguments:u,callMode:i,timeoutMs:t.timeoutMs,successCallback:function(i){n.clearTimeout(this.timeoutId);var r=t.resultAvailableInEvent?i:p(t);r?this.resolve(r):this.reject("Result was not found in the "+(t.resultAvailableInEvent?"message cache":"callback event."))},errorCallback:function(t){n.clearTimeout(this.timeoutId);this.reject(t)}}}function tt(n){return new t(function(t,i){n.resolve=t;n.reject=i;var r=!f(n.requestKey);u.push(n);v(n);rt(n,r)})}function it(n,i){return new t(function(t,r){n.resolve=t;n.reject=r;u.push(n);v(n);i.apply(null,n.userArguments)})}function v(n){if(c.indexOf(n.eventName)<0){switch(n.callMode){case r.Serial:et(n.eventName,n.requestKey);break;case r.ConcurrentShared:ut(n.eventName);break;case r.ConcurrentNonShared:ft(n.eventName)}c.push(n.eventName)}}function rt(n,t){n.messageName&&(n.callMode===r.Serial?t&&o(n.requestKey):h(n))}function y(n){var t=e.getCachedFrameMessage(n);return JSON.tryParse(t)}function ut(t){n.addEventListener(t,function(n){for(var r,i=u.length-1;i>=0;i--)r=u[i],r.eventName===t&&(r.successCallback(JSON.tryParse(n&&n.data)),u.splice(i,1))})}function ft(t){n.addEventListener(t,function(n){var t=n&&JSON.tryParse(n.data),r,i;t?(r=t.requestId,i=f(r,!0),i&&i.successCallback(t)):s("Necessary requestId not present on event data")})}function et(t,i){n.addEventListener(t,function(n){var t=f(i,!0);t&&(t.successCallback(JSON.tryParse(n&&n.data)),o(i))})}function o(n){var t=f(n);t&&h(t)}function f(n,t){for(var r,i=0;i<u.length;i++)if(r=u[i],r.requestKey===n)return t&&u.splice(i,1),r;return null}function p(n){var t=y(n.cacheKey);return t?t:null}function ot(){var h=e.getCachedFrameMessage("error"),i=JSON.tryParse(h),t,n,c;if(i){for(b.indexOf(i.errorCode)<0&&s(h),t=u.length-1;t>=0;t--)if(n=u[t],n.messageName===i.message&&(c=n.callMode===r.Serial,c?(n=f(n.requestKey,!0),o(n.requestKey)):u.splice(t,1),n.errorCallback(i.errorMessage),c))break}else s(h,"Could not parse error message as JSON.")}function s(n,t){require(["track","c.pageComplete"],function(r){var u=i.serviceUIError,f={errId:u.errId,errMsg:u.errMsg+(t||"")+n,errSource:u.errSource,reportingType:u.reportingType};r.trackAppErrorEvent(f)})}var e=n.ServiceUIFrameContext,w=5e3,r={Serial:1,ConcurrentShared:2,ConcurrentNonShared:3},u=[],c=[],b=[-2147482480,-2147024891];return n.addEventListener("erroravailable",ot),{callModes:r,invokeMethodAsync:d,getObjectAsync:k,sendMessage:h,addListener:g,getCachedFrameMessageObject:y}});define("showServiceUi",["serviceuihelper"],function(n){function t(t){require([t],function(){i||(n.showServiceUi(),i=!0)})}function r(){t("c.riverSection");t("c.topSitesReady");t("c.pageComplete")}var i=!1;return{setup:r}});define("toolTips",["window","document","serviceuihelper","positionHelper","remToPixel","dir.tokens"],function(n,t,i,r,u,f){function tt(){if(!i.features.CanShowToolTips){n.addEventListener(d,it);return}}function it(t){for(h(),s=t.target,o=0;s&&!o;)o=s.getAttribute&&s.getAttribute("title"),s=s.parentNode;o&&(n.addEventListener(a,l),n.addEventListener(v,w),l(t))}function l(n){var t=r.getEventMousePosition(n);clearTimeout(c);c=setTimeout(function(){rt(t)},g)}function w(){h()}function rt(i){var a;if(b(),o){e||(e=t.createElement("p"),e.id="tooltip",t.body.appendChild(e));e.innerText=o.substr(0,k);e.className="tooltip-open";var f=n.pageXOffset,l=f+n.innerWidth,s=e.offsetWidth,r=i.x-s/2;r+s>l?(r=l-s,!p&&r<f&&(r=f)):r<f&&(r=f,p&&r+s>l&&(r=l-s));a=Math.max(i.y-e.offsetHeight-u(2),n.pageYOffset);e.style.left=r+"px";e.style.top=a+"px";c=setTimeout(h,nt);n.addEventListener(y,h)}}function h(){o=null;b();e&&(e.className="")}function b(){clearTimeout(c);n.removeEventListener(a,l);n.removeEventListener(v,w);n.removeEventListener(y,h)}var k=512,a="mousemove",v="mouseout",d="mouseover",y="scroll",g=600,nt=6e3,p=!f.ltr,s,c,o,e;return{initialize:tt}});define("eduSkuHtmlSearchProperties",["serviceuihelper","spartanPageDetectionHelper","location"],function(n,t,i){function o(){var n="";return r&&(n+="PC="+r),f&&(n+=n?"&DAF0=1":"DAF0=1"),e&&(n+=n?"&DAF1=1":"DAF1=1"),n}var r,f,e,u;return t.isDhpPage||t.isNtpPage?(r=n.getPartnerSearchCode(),f=n.isEnableRegulatoryPsm(),e=n.isEnableCpsm()):t.isIeNtpPage&&(u={},i.search.substr(1).split("&").forEach(function(n){var t=n.split("=");t[0]&&(u[t[0].toLowerCase()]=t[1])}),f=parseInt(u.enableregulatorypsm)||0,e=parseInt(u.enablecpsm)||0,r=u.pc),{partnerSearchCode:r,isEnableRegulatoryPsm:f,isEnableCpsm:e,getAsQueryParameterString:o}});define("displaySticky",["jquery","jqBehavior","window","mediator"],function(n,t,i,r){"use strict";return t(function(t){function o(){var n=s<i.pageYOffset;n!==e&&(t.toggleClass(v,n),t.css({top:n?u:c}),e=n,r.pub("stickyChange",{$element:t,isSticky:e}))}function h(){t.removeClass(v);t.css("top",c);e=!1;s=t.offset().top-u;o()}function p(){return y.classList.contains("oneriverheadersection")}var f=n(i),e=!1,c=t.css("top"),l="resize",a="scroll",u=0,v="sticky",y=t.get(0),s;return{setup:function(){t.addClass("stick-enabled");n(".stick-enabled").each(function(t,i){if(i===y)return!1;n(i).is(":visible")&&(u+=n(i).outerHeight(!1))});r.sub("IrisBannerRendered",function(){p()&&(u+=n(".irisbanner").outerHeight(!1)-2)});r.sub("IrisBannerDismissed",function(){p()&&(u-=n(".irisbanner").outerHeight(!1),h())});s=t.offset().top-u;o();f.on(a,o);f.on(l,h)},teardown:function(){f.off(a,o);f.off(l,h)}}})});require(["binding","c.riverReady"],function(n){n("displaySticky","div.head").all()});define("verifyPageElements",["window","document","track","errorCategory","headData","newsFeedFilterHelper","getCookie","spartanConstants","visibility"],function(n,t,i,r,u,f,e,o,s){function h(i,r){var u=i&&t.querySelector(i),f=u&&(n.getComputedStyle&&getComputedStyle(u)||u.currentStyle);return f&&(u.offsetWidth===0||u.offsetHeight===0||f.display==="none"||f.visibility==="hidden")?(y(r),null):u}function y(n){var t;switch(n){case l:t=r.domElementExistsButIsNotVisibleForSearch;break;case a:t=r.searchVisibleButUnstyled;break;case v:t=r.edgeTopSitesNotVisible;break;case b:t=r.spaTopSitesNotVisible;break;default:t=w}i.trackAppErrorEvent({errId:t.errId,errMsg:t.errMsg+n,errSource:t.errSource})}function p(){var i,s,n,r,u;c&&(clearInterval(c),c=0,k()&&(i=h("#srchfrm",l),i&&i.offsetWidth<350&&y(a)),h("#js-topsites",v),h(".riversection-js","River")&&(h(".sip > ul","InfoPane"),s=e(o.cookieNames.contentFilter),n=f.topicsTelemetryValueMapping[s],n=n&&n.toLowerCase(),r=".sd-card-col > div",u=t.querySelector(r),(!n||n==="finance"||n==="sports")&&u&&u.children.length&&h(r,"SD cards")))}function k(){return!0}function d(){var n=1e3,t=u.dms||6e3,i=0;c=setInterval(function(){!s.isHidden()&&(i+=n)>=t&&p()},Math.min(n,t));require(["c.pageComplete"],p)}var w=r.domElementExistsButIsNotVisible,l="Search",a="UnstyledSearch",v="TopSites",b="SpaTopSites",c;return{setup:d}});define("searchBoxWidthAdjust",["jquery","jqBehavior","window","remToPixel"],function(n,t,i,r){function f(n){function t(){n.find("#q").width(u+(n.find(".qc").width()-n.find(".buttons").width()))}return{setup:t,update:t}}var u=r(.2);return t(f)});define("pageComplete",["mediator","displayOptionsHelper","headData","spartanPageDetectionHelper"],function(n,t,i,r){function u(n){if(!f){if(!n){c();return}setTimeout(u,n)}}function c(){n.pub("ViewabilityUpdatedEvent");f||define(h,1);f=!0}var e=r.isSomeNtpPage,o="c.topSitesReady",s="c.riverReady",h="c.pageComplete",f=!1;return function(n){var f,r;if(n=n||{},f=i.ispreload?0:1,t.isDisplayOptionSetToBlank()){u(f);return}r=[];n.waitForTopSitesReadyCanary&&e&&r.push(o);n.shouldWaitForRiverReady&&t.shouldRenderRiver()&&r.push(s);require(r,function(){u(f)});u(i.dms||6e3)}});require(["oAuthHelper"],function(n){n.handleResponse()});require(["verifyPageElements"],function(n){n.setup()});require(["showServiceUi"],function(n){n.setup()});require(["displayOptionsHelper","c.dom"],function(n){n.modifyPageBasedOnUserSetting()});require(["refreshPdpModules","c.sso"],function(n){n()});require(["refreshPdpModules","c.pdp"],function(n){n()});define("preloadRevealHandler.tokens",{maxPreloadPdpCacheDurationInMs:"900000"});define("preloadRevealHandler",["headData","requestPageRevealCallback","preloadRevealHandler.tokens","spartanConstants"],function(n,t,i,r){function o(){var o=parseInt(i.maxPreloadPdpCacheDurationInMs)||9e5;t(function(t){n.loadRiverAtPageReveal||(t.timeTakenForRevealInMs>=o?(require(["mediator"],function(n){u=n;u.sub(r.eventNames.authTokenRenewalCompleted,f)}),require(["establishSignedInState"],function(n){n.renewSignedInToken()})):e())})}function f(){u.unsub(r.eventNames.authTokenRenewalCompleted,f);e();require(["refreshPdpModules"],function(n){n()})}function e(){define("c.pageRevealAuthTokenRenewalComplete",1)}var u;return{initialize:o}});require(["preloadRevealHandler"],function(n){n.initialize()});require(["binding","searchBoxWidthAdjust","c.pageComplete"],function(n){n("searchBoxWidthAdjust","#header-search").all()});require(["delayLoadModules"],function(n){n()});require(["toolTips","c.dom"],function(n){n.initialize()});require(["spartanJQueryLoader","c.pageComplete"],function(n){setTimeout(n)});define("cookieComplianceHelper",["window","document","location","mediator","getCookie","setCookie","classList","browserAccess","headData","c.dom"],function(n,t,i,r,u,f,e,o,s){function k(){r.sub("dismissCookieBanner",function(){y(null,null,!0)});b();c()?p():d()}function y(n,t,i){var r=!1||nt(t);r&&!i&&require(["spartanSharedHelper","errorCategory"],function(n,t){n.refreshPage(!0,t.cookiesAccepted)})}function c(){return!h||!!h.hasConsent()}function p(){var n=w();n&&e.add(n,a)}function d(){var n=w();n&&e.remove(n,a)}function w(){return t.getElementById("cc-banner")}function g(n,t,i){if(n&&t&&i){var u=t+"=",r=!e.contains(n,"extsource")&&n.getAttribute(v);r&&r.indexOf(u)<0&&(r+=(r.indexOf("?")<0?"?":"&")+u+i,n.setAttribute(v,r))}}function nt(n){if(h){if(tt(),n){var t=h.cookieName,i=u(t);g(n,t,i)}return!0}}function tt(){var n=s&&s.clientSettings;n&&(n.functionalonly_cookie_experience=!1);h&&h.setConsent();b()}function b(){typeof l!="boolean"?l=c():l!==c()&&r.pub("forcePageReload","2")}var l,a="hide",v="href",h=n.mscc;return{grantCookieConsentAndDecorateLink:y,hasCookieBannerConsent:c,hideCookieBanner:p,hideCookieWallInformationEventName:"hideCookieWall",initialize:k,showCookieWallInformationEventName:"showCookieWall"}});require(["cookieComplianceHelper"],function(n){n.initialize()});define("topSites.tokens",function(){return{addDialogAppSuggestionTitle:"  {0}   ",addDialogAppSuggestionsTitle:" ",addDialogSiteSuggestionTitle:"  {0}   ",addDialogSiteSuggestionsTitle:" ",contextMenuPinTopSite:"",contextMenuUnpinTopSite:"",defaultIconUrl:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCA4NS43NCA4Ny4xMScgZmlsbD0nIzAwYmNmMic+PHBhdGggZD0nTTY5LjA5LDBhMjguMDYsMjguMDYsMCwwLDEsMy4yNy4yLDIxLjY1LDIxLjY1LDAsMCwxLDMuMjUuNjMsMTQuNDEsMTQuNDEsMCwwLDEsMywxLjIyLDExLjMsMTEuMywwLDAsMSwyLjYxLDIsMTcuNzcsMTcuNzcsMCwwLDEsMy4zLDQuNTksMTIuMjcsMTIuMjcsMCwwLDEsMS4yLDUuNDcsMTcuNzgsMTcuNzgsMCwwLDEtLjM5LDMuNjYsMzAuNDEsMzAuNDEsMCwwLDEtMSwzLjY5cS0uNjQsMS44My0xLjQyLDMuNTl0LTEuNTYsMy4zN2EzNy4xMiwzNy4xMiwwLDAsMSwzLjMsOC43MiwzOS42MiwzOS42MiwwLDAsMSwxLjEsOS4zLDE0LjE5LDE0LjE5LDAsMCwxLS4xLDEuNTlxLS4xLjg1LS4yOSwxLjc2dC0uNDYsMS43M2E4Ljg4LDguODgsMCwwLDEtLjYxLDEuNDZIMzIuNjJhMTYuMzgsMTYuMzgsMCwwLDAsMS4xNyw2LjI3QTE0Ljg2LDE0Ljg2LDAsMCwwLDM3LDY0LjE0LDE0LjU1LDE0LjU1LDAsMCwwLDQyLDY3LjM2YTE2LjY4LDE2LjY4LDAsMCwwLDYuMjcsMS4xNUEyMy4wNywyMy4wNywwLDAsMCw1Niw2Ny4yNmExMy41NCwxMy41NCwwLDAsMCw2LjE4LTQuNzZIODIuMjhhMzcuOTIsMzcuOTIsMCwwLDEtNS44Niw5LjExLDM2LjEsMzYuMSwwLDAsMS03LjkxLDYuODFBMzcsMzcsMCwwLDEsNTksODIuNjlhMzguMzEsMzguMzEsMCwwLDEtMTAuNzQsMS40OSw0MCw0MCwwLDAsMS03Ljg2LS43OCw0NC40LDQ0LjQsMCwwLDEtNy42Mi0yLjI1cS0yLDEuMTItNC4yMiwyLjJBNDYuMTMsNDYuMTMsMCwwLDEsMjQsODUuMjVhMzcuMzYsMzcuMzYsMCwwLDEtNC42OSwxLjM0LDIyLjIyLDIyLjIyLDAsMCwxLTQuNzEuNTEsMTQuNzYsMTQuNzYsMCwwLDEtNi4zMi0xLjI3LDEzLjIzLDEzLjIzLDAsMCwxLTQuNTctMy40N0ExNC43LDE0LjcsMCwwLDEsLjkzLDc3LjIyLDIxLDIxLDAsMCwxLDAsNzAuOWEzNC45MSwzNC45MSwwLDAsMSwxLjEyLTguNjIsNjAuODksNjAuODksMCwwLDEsMy04Ljg5LDgxLjgxLDgxLjgxLDAsMCwxLDQuNDQtOC44NnEyLjU0LTQuMzksNS4zMi04LjQ1dDUuNjktNy42OXEyLjktMy42NCw1LjU5LTYuNjdsLjY2LS43My42Ni0uNjhhNDUuNjIsNDUuNjIsMCwwLDAtNi4xMywyLjgxLDM5LjExLDM5LjExLDAsMCwwLTUuMTgsMy40NCw0OC4zMSw0OC4zMSwwLDAsMC00LjY0LDQuMTdxLTIuMjIsMi4yNy00LjUyLDVBMjIuNTEsMjIuNTEsMCwwLDEsOC4yLDI4LjM5YTI0LjgyLDI0LjgyLDAsMCwxLDQuMjItNi4wNSwzMi42OSwzMi42OSwwLDAsMSw1Ljc5LTQuODNBNDUuNTEsNDUuNTEsMCwwLDEsMjUsMTMuODJhNTEuMTQsNTEuMTQsMCwwLDEsNy4zLTIuNTYsNTkuOTQsNTkuOTQsMCwwLDEsNy4yNS0xLjQ5QTc2LjkzLDc2LjkzLDAsMCwxLDQ2LjI5LDZhNjcuNTQsNjcuNTQsMCwwLDEsNy40Mi0zLjEyQTU2LjU0LDU2LjU0LDAsMCwxLDYxLjQzLjc4LDM5LDM5LDAsMCwxLDY5LjA5LDBaTTcuNDIsNzVhMTMuNzIsMTMuNzIsMCwwLDAsLjQ2LDMuNjEsOSw5LDAsMCwwLDEuNDIsMyw2Ljc1LDYuNzUsMCwwLDAsMi40NywyLjA1LDgsOCwwLDAsMCwzLjYxLjc2LDE1LjE2LDE1LjE2LDAsMCwwLDMuNTQtLjQ0LDI4Ljc0LDI4Ljc0LDAsMCwwLDMuNjYtMS4xNXExLjgzLS43MSwzLjU2LTEuNTZ0My4yLTEuNjhhNDAuMTYsNDAuMTYsMCwwLDEtMTAuNjItNy45MywzNi40MSwzNi40MSwwLDAsMS03LjMtMTEuMDYsNTQuNjUsNTQuNjUsMCwwLDAtMi43OCw3QTIzLjkyLDIzLjkyLDAsMCwwLDcuNDIsNzVaTTYzLjg3LDQwLjYzYTE2LjYyLDE2LjYyLDAsMCwwLTEuMTctNi4yNywxNS4zMSwxNS4zMSwwLDAsMC0zLjI1LTVBMTUuMTIsMTUuMTIsMCwwLDAsNTQuNTIsMjYsMTYuNzQsMTYuNzQsMCwwLDAsNDIsMjYsMTUuMTEsMTUuMTEsMCwwLDAsMzcsMjkuMzJhMTUuMjksMTUuMjksMCwwLDAtMy4yNSw1LDE2LjYyLDE2LjYyLDAsMCwwLTEuMTcsNi4yN1pNNTguMjUsMTAuNGEzNy4yNywzNy4yNywwLDAsMSwxMi40Myw1Ljc5LDM0LjY3LDM0LjY3LDAsMCwxLDkuMzUsMTAsNTIuNTcsNTIuNTcsMCwwLDAsMi4xLTUuNTksMTkuNDEsMTkuNDEsMCwwLDAsLjkzLTUuODMsMTAsMTAsMCwwLDAtLjczLTQsNy45NCw3Ljk0LDAsMCwwLTItMi44NkE4LjYyLDguNjIsMCwwLDAsNzcuMiw2LjJhMTIuNzcsMTIuNzcsMCwwLDAtNC0uNTlBMTguNTQsMTguNTQsMCwwLDAsNjkuMzgsNiwzMy41MywzMy41MywwLDAsMCw2NS41LDcuMWEzNC4zMywzNC4zMywwLDAsMC0zLjc2LDEuNTRRNTkuOTEsOS41Miw1OC4yNSwxMC40WicvPjwvc3ZnPg==",favIconAltText:"  {0}",getTheApp:" ",launchApp:" ",getTheAppTitleFormat:"{0}  ",openTheAppTitleFormat:"",pinThisSite:"  ",removeThisSite:"   ",topSiteAppAttribution:"",topSiteAttribution:"",sponsoredText:"",unpinThisSite:"  "}});define("topSitesModels",["appHelper"],function(n){function f(t){var u=this;u.getOriginalTitle=function(){var n=u.title||u.domain||u.siteUrl;return n&&n.replace(/^(https?:\/\/)?(www\.)?/i,"")||null};u.isSponsored=function(){return u.getOriginalTitle()?u.getOriginalTitle().toLowerCase().indexOf("sponsored")>-1:!1};u.isCuratedSite=function(){return u.type===i.curated};u.getDisplayTitle=function(){var n=u.getOriginalTitle(),t=n?n.indexOf("["):-1;return u.isSponsored()&&t>=0?n.substring(0,n.indexOf("[")):n};u.getTooltip=function(){var n=u.getDisplayTitle();return u.isApp?n:u.title===u.siteUrl?null:n};u.setAppIds=function(t,i){if(i&&(u.appIds=null,u.pfn=null),t&&t.length){var f=u.appIds||(u.appIds=[]);t.filter(r.getIf).forEach(function(t){f.push(t);u.pfn||(u.pfn=n.tryParseAppId(t).pfn)});u.bigCatId=u.appIds.length>1?u.appIds[u.appIds.length-1]:null}return u.appIds};u.hasApp=function(){return u.appIds&&u.appIds.length};u.hasSchemelessCmsIcon=function(){var n=u.icon;return n&&!n.match(/^http/i)&&n.match(/tenant\/amp/i)};u.isPinned=function(){return u.displayOrder>=0&&u.displayOrder!==null};u.clone=function(){return new f(u.getJson())};u.getJson=function(n){var t={appIds:u.appIds,background:u.background,backgroundFromAlgo:u.backgroundFromAlgo,color:u.color,hasAddOns:u.hasAddOns,icon:u.icon,inlineActionsDisabled:u.inlineActionsDisabled,isInlinePinToTaskbarEnabled:u.isInlinePinToTaskbarEnabled,itemId:u.itemId,isApp:u.isApp,siteUrl:u.siteUrl,slotIndex:u.slotIndex,title:u.title,trackingHeadline:u.trackingHeadline,type:u.type,displayOrder:u.displayOrder},i;if(n)for(i in t)t[i]==null&&delete t[i];return t},function(){if(t&&(u.domain=null,u.domainAndPath=null,u.hasQuery=null,u.pfn=null,u.appIds=u.setAppIds(t.appIds),u.background=t.background,u.backgroundFromAlgo=t.backgroundFromAlgo,u.color=t.color,u.displayOrder=t.displayOrder,u.hasAddOns=t.hasAddOns,u.icon=t.icon,u.itemId=t.itemId,u.isApp=t.isApp,u.inlineActionsDisabled=t.inlineActionsDisabled,u.isInlinePinToTaskbarEnabled=t.isInlinePinToTaskbarEnabled,u.siteUrl=t.siteUrl,u.slotIndex=t.slotIndex,u.title=t.title,u.trackingHeadline=t.trackingHeadline,u.type=t.type),u.siteUrl){var n=e(u.siteUrl);u.domain=n.domain;u.domainAndPath=n.domainAndPath;u.domainPathAndQuery=n.domainPathAndQuery;u.hasQuery=n.hasQuery}}()}function t(n){function o(n,t){var i={};n=n||r.getUrl;u.each(function(r){var u=n(r);u&&!i[u]&&(i[u]=!0,t(r,u))})}var u=this,e=[];u.clone=function(){var n=new t;return u.each(function(t){n.add(t.clone())}),n};u.add=function(n){n&&e.push(n)};u.set=function(n,t){n&&t>=0&&t<e.length&&(e[t]=n)};u.move=function(n,t){var r=e[n];return!r||!e[t]||n===t||!u.removeAt(n)?!1:(r.displayOrder=t,r.type=i.user,e.splice(t,0,r),u.each(function(n,t){n.displayOrder!=null&&(n.displayOrder=t)}),!0)};u.first=function(n){var i=new t;return u.each(i.add,n),i};u.addFrom=function(n,t,i){var f=n&&n.count()||0,o=i==null?f:Math.min(f,i),s=t,r,u;for(e.length=Math.max(e.length,t+o),r=0;r<o;r++)u=n.get(r),u&&(e[s++]=u)};u.count=function(){return e.length};u.map=function(n){return e.map(n)};u.filter=function(n){return new t(e.filter(n))};u.removeAt=function(n){return n>=0&&n<e.length&&!!e.splice(n,1)};u.insert=function(n,t){return t>=0&&t<e.length&&e.splice(t,0,n)};u.removeByUrl=function(n){var t;return n?(u.each(function(i,r){if(i.siteUrl===n)return t=i,u.removeAt(r),!1}),t):t};u.remove=function(n){return n&&u.removeAt(e.indexOf(n))};u.slice=function(n,i){return new t(e.slice(n,i))};u.get=function(n){return e[n]};u.findIndexByKey=function(n,t){var i=-1;return u.each(function(r,u){if(t(r)===n)return i=u,!1}),i};u.each=function(n,t,i){t=t!=null?Math.min(e.length,t):e.length;for(var f=i?e.length-1:0,o=i?-1:1,u=0,r=f;u<t;){if(n(e[r],r)===!1)break;r+=o;u++}};u.indexOf=function(n){return e.indexOf(n)};u.toSiteExclusionLookup=function(n){var t=new s(n);return t.addSites(u),t};u.toJsLookup=function(n){var t={};return o(n,function(n,i){i&&(t[i]=n)}),t};u.distinct=function(n){var i=new t;return o(n,i.add),i};u.excludeLookup=function(n){if(n.getCount()<=0)return u;var i=new t;return u.each(function(t){n.contains(t)||i.add(t)}),i};u.intersectLookup=function(n,i){if(n.getCount()<=0)return new t;var r=new t;return u.each(function(t){n.contains(t,i)&&r.add(t)}),r};u.truncate=function(n){return e.length=Math.max(0,Math.min(u.count(),n||0)),u};u.getJson=function(){var n=[];return u.each(function(t){n.push(t.getJson(!0))}),n};u._list=e,function(){n instanceof Array&&n.map(function(n){u.add(new f(n))})}()}function l(n){function ft(){var n=new y;return n.addFromUrlObject(rt),n.addFromDomainObject(ut),n}function ht(e,s,h,c,l,y){var rt,tt,ut=n.totalCount-y,vt=Math.max(0,ut-s),ft,kt,b,dt,it,yt,et,pt,ht,ct,at,wt,bt,ri,ui;ft||(ft=p.first(ut).excludeLookup(l).excludeLookup(c).first(k));n.showFrequents&&a&&(a=a.excludeLookup(l));n.stackingStrategy===o.frequentsFirst?(b=n.showFrequents?a.excludeLookup(c).first(n.totalCount):new t,kt=b.toSiteExclusionLookup(r.getDomain),tt=ft.excludeLookup(kt),rt=new v([new u(b),new u(tt)])):(tt=ft,b=new t,n.showFrequents&&(b=a.excludeLookup(h).first(vt),dt=b.toSiteExclusionLookup(r.getDomainAndPath),it=tt.intersectLookup(dt).toSiteExclusionLookup(r.getDomainAndPath),b=b.excludeLookup(it),yt=b.count()+it.getCount(),yt<vt?(et=new t,pt=vt-yt,tt.each(function(n){it.contains(n)?et.add(n):pt>0&&(et.add(n),pt--)}),tt=et):tt=tt.intersectLookup(it)),rt=new v([new u(tt),new u(b)]));var d=new t,gt=new t,ni=new u(gt),ti={},ii=new t,fi=new u(ii);for(e.each(function(n){st(n)?(gt.add(n.clone()),ti[n.displayOrder]=!0):ii.add(n)}),ht=0;ht<ut;ht++){if(ct=ti[ht]&&ni.next(),ct){ct.displayOrder=d.count();d.add(ct);continue}if(at=fi.next(),at&&ot(at)){d.add(at.clone());continue}wt=rt&&rt.next();wt&&d.add(wt.clone())}return nt(d,ut,ni,function(n){return n&&(n.displayOrder=d.count()),n}),y>0?(w||(bt=g==null,bt&&(ri=d.toSiteExclusionLookup(r.getDomain),g=p.excludeLookup(l).excludeLookup(ri).filter(function(n){return n.appIds&&n.appIds.length})),w=lt(g,y),bt&&(g=w.clone())),ui=new u(w),nt(d,n.totalCount,ui,function(n){var t=n?n.clone():new f;return t.type=i.suggested,t})):nt(d,n.totalCount),d}function ct(n){var i,r,u,f;return!n||n===0?new t:(i=ft(),l.each(function(n){if(n.siteUrl){var t=e(n.siteUrl);i.addKey(t.domain);i.addKey(t.domainAndPath)}}),r=it.excludeLookup(i),u=r.filter(function(n){return n.hasApp()}).first(n),u.each(function(n){if(n.isApp=!0,n.siteUrl){var t=e(n.siteUrl);i.addKey(t.domain);i.addKey(t.domainAndPath)}}),f=r.excludeLookup(i).first(n),{apps:u,sites:f})}function lt(n,t){var u="lastUpdated",f="lastIndex",e=(new Date).getDate(),o=isNaN(b[u])||b[u]!=e,i=b[f]>-1?b[f]:-1,r,s;return o&&(i+=1),r=i+t,r>n.count()&&(i=0,r=t),s=n.slice(i,r),o&&(b[u]=e,b[f]=i),s}function nt(n,t,i,r){while(n.count()<t){var u=i&&i.next(),e=r&&r(u)||new f;n.add(e)}}function et(n){return function(t){return t.type===n}}function ot(n){return st(n)||n.type===i.user}function st(n){return n.displayOrder!=null}function tt(n){return l=c._list=n}var c=this;n=h(n,{stackingStrategy:o.frequentsFirst,maxCuratedCount:8,maxSuggestedCount:0,maxAddSuggestionsPerGroup:4,totalCount:8,showFrequents:!0});var l=tt(new t),d,it=new t,p=new t,a=new t,w,g,rt={},ut={},k=n.maxCuratedCount,b=n.suggestedSitesData;c.setCuratedSites=function(n){n&&(it=n.clone(),p=n.clone(),p.each(function(n){n.type=i.curated}),k=Math.min(k,p.count()))};c.setFrequentSites=function(n){n&&(a=n.clone(),a.each(function(n){n.type=i.frequent}))};c.addUserTopSite=function(n,t){if(n){var r=n.clone();r.type=i.user;l.set(r,t)}};c.moveSite=function(n,t){var r=l.get(n);return r&&r.type!==i.suggested&&l.move(n,t)};c.togglePinnedState=function(n){var t=l.get(n);t&&t.siteUrl&&(t.displayOrder=t.displayOrder==null?n:null,t.type=i.user)};c.getCuratedSites=function(){return p};c.getFrequentSites=function(){return a};c.getDisplayedCuratedCount=function(){return k};c.getSuggestedSitesData=function(){return b};c.setDeletedUrlLookup=function(n){rt=n||{}};c.setDeletedDomainLookup=function(n){ut=n||{}};c.removeSite=function(n){var t=l.remove(n);return t=p.removeByUrl(n.siteUrl)||t,t=a.removeByUrl(n.siteUrl)||t,w&&n.type===i.suggested&&(t=w.removeByUrl(n.siteUrl)||t),!!t};c.restoreRenderList=function(n,t){l=tt(n||l);t||(w=l.filter(function(n){return n.type===i.suggested}))};c.getRenderList=function(){var e=ft(),t=l.filter(ot),f=new s(r.getDomainAndPath),u;return f.addSites(t),u=new s(r.getDomain),u.addSites(t),l=tt(ht(l,t.count(),f,u,e,n.maxSuggestedCount)),p=l.filter(et(i.curated)),a=n.showFrequents?l.filter(et(i.frequent)):a,k=p?p.count():0,d=null,l};c.getAddDialogSuggestions=function(){return d||(d=ct(n.maxAddSuggestionsPerGroup)),d};c.showFrequents=function(t){n.showFrequents=t}}function p(){function c(n){var t=e[n.domainAndPath],i=e[n.domain],r,u,o,s;(t||i)&&(r=f("appIds",t,i),r&&(n.setAppIds(r,!0),n.hasAddOns=f("hasAddOns",t,i)),u=f("trackingHeadline",t,i),u&&(n.trackingHeadline=u),o=f("icon",t,i),o&&(n.background=f("background",t,i),n.color=f("color",t,i),n.icon=o,n.backgroundFromAlgo=!1),s=!n.hasQuery&&t&&t.title,s&&(n.title=s),n.isInlinePinToTaskbarEnabled=f("isInlinePinToTaskbarEnabled",t,i),n.inlineActionsDisabled=f("inlineActionsDisabled",t,i))}function f(n,t,i){return t&&t[n]||i&&i[n]}var u=this,a,e,i=u._renderList=new l,s,n;u.initialize=function(u){n=h(u,{canAddUserSites:!1,canDoSiteOverride:!0,curatedSites:new t,deletedDomainLookup:{},deletedUrlLookup:{},previousRenderList:null,maxTopSiteCount:8,maxCuratedCount:8,maxSuggestedCount:0,maxAddSuggestionsPerGroup:4,stackingStrategy:o.frequentsFirst,suggestedSitesData:{},showFrequents:!0},!0);a=n.curatedSites.toJsLookup(r.getDomain);e=n.curatedSites.toJsLookup(r.getDomainAndPath);i=new l({maxCuratedCount:n.maxCuratedCount,totalCount:n.maxTopSiteCount,maxAddSuggestionsPerGroup:n.maxAddSuggestionsPerGroup,maxSuggestedCount:n.maxSuggestedCount,stackingStrategy:n.stackingStrategy,suggestedSitesData:n.suggestedSitesData,showFrequents:n.showFrequents});var f=n.previousRenderList;n.canDoSiteOverride&&f&&f.each(function(n){c(n)});i.setCuratedSites(n.curatedSites.distinct(r.getDomain));i.setDeletedUrlLookup(n.deletedUrlLookup);i.setDeletedDomainLookup(n.deletedDomainLookup);i.restoreRenderList(f,!0)};u.canAddUserSites=function(){return n&&n.canAddUserSites};u.getDisplayedCuratedCount=function(){return i.getDisplayedCuratedCount()};u.getSuggestedSitesData=function(){return i.getSuggestedSitesData()};u.getSitesToRender=function(n){return(!s||n)&&(s=i.getRenderList()),s};u.getAddDialogSuggestions=function(){return i.getAddDialogSuggestions()};u.addUserTopSite=function(n,t){c(n);i.addUserTopSite(n,t)};u.moveSite=function(n,t){return i.moveSite(n,t)};u.restoreRenderList=function(n){i.restoreRenderList(n)};u.removeTopSite=function(n){return i.removeSite(n)};u.setFrequents=function(n){n=n||new t;n.each(c);i.setFrequentSites(n)};u.showFrequents=function(n){i.showFrequents(n)};u.togglePinnedState=function(n){i.togglePinnedState(n)}}function a(n,t){var i=this;i.data=n;i.parentContext=t;this.update=function(n){i.data=n.data;i.parentContext=n.parentContext}}function u(n,t){var u=this,i=0,r=0;t=c(t,Infinity);u.next=function(){var u=null;return i<n.count()&&r<t&&(u=n.get(i),i++,r++),u}}function v(n,t){var u=this,i=0,r=n[0],f=0;t=c(t,Infinity);u.next=function(){if(f<t){var e=r&&r.next();if(e)return f++,e;if(i+1<n.length)return i++,r=n[i],u.next()}return null}}function s(n){var t=this,i=new y;t.getCount=i.getCount;t.addSite=function(t){i.addKey(n(t))};t.addSites=function(t){var r=t.forEach||t.each;r.call(t,function(t){i.addKey(n(t))})};t.contains=function(t){return i.contains(t,n)};t._lookup=i._lookup}function y(){function r(t){var i=e(t);n.addKey(i.domain);n.addKey(i.domainAndPath)}var n=this,t={},i=0;n.getCount=function(){return i};n.addKey=function(n){n&&!t[n]&&(t[n]=!0)&&++i};n.addFromDomainObject=function(t){for(var i in t)n.addKey(i)};n.addFromUrlObject=function(n){for(var t in n)r(t)};n.contains=function(n,i){var r=i?t[i(n)]:t[n.domain]||t[n.domainAndPath];return!!r};n._lookup=t}function e(n){if(n){/^\s*(f|ht)tps?:\/\//i.test(n)||/^\s*ms-windows-store:/i.test(n)||/^\s*file:\/\//i.test(n)||(n="http://"+n.trim());var i=/[\s\/]+$/g,t=n&&n.match(/^\s*(https?:\/\/(?:www\d*\.)?(([^\/:\?#]+)([^\?#]+)?(\?[^#]+)?))/i)||[],r=(t[3]||"").replace(i,""),u=(t[4]||"").replace(i,"");return{url:t[1]||"",domain:r,domainAndPath:r+u,domainPathAndQuery:t[2]||"",hasQuery:!!t[5]}}}function h(n,t,i){n=n||{};for(var r in t)(i&&n[r]===null||n[r]===undefined)&&(n[r]=t[r]);return n}function c(n,t){var i=parseInt(n);return isNaN(i)?t:i}var i={curated:"curated",frequent:"frequent",suggested:"suggested",user:"user"},o={frequentsFirst:1,curatedFirst:2},r={getUrl:function(n){return n.siteUrl},getDomain:function(n){return n.domain},getDomainAndPath:function(n){return n.domainAndPath},getDomainPathAndQuery:function(n){return n.domainPathAndQuery},getIf:function(n){return n}};return{topSite:f,topSiteCollection:t,topSites:p,constants:{events:{changeFreqsVisibility:"changeFrequentsVisibility"},topSiteType:i,topSiteStackingStrategy:o,addDialogPosition:{bottom:0,right:1}},createBindingContext:function(){return new a},createChildBindingContext:function(n,t){return new a(n,t)},utils:{applyDefaults:h,parseUrl:e,tryParseInt:c}}});define("topSiteViews",["topSitesModels","colorHelper","topSites.tokens","mediator","document","format","window","appHelper","cookieComplianceHelper","spartanConstants","browserAccess","errorCategory"],function(n,t,i,r,u,f,e,o,s,h,c,l){function p(r,u){function pt(){var n=e.type,i=n?" "+n:"",r=u.isUserAddedSitesEnabled&&e.isPinned()?" pinned":"",t=!1;t=e.isSponsored()&&e.isCuratedSite();p.className=(e.siteUrl?"topsite":"")+(e.backgroundFromAlgo?" border":"")+(t?" hasspon":"")+(e.siteUrl?h.isLightBackground?" light":" dark":"")+r+i}function it(n,t,i,r){var f;if(n){var o="data-m",e="data-dtn",s=n.getAttribute(o),u;i?(u=i,n.setAttribute(e,u)):u=n.getAttribute(e);s&&(f=JSON.tryParse(s),f?(t&&f.n&&(u||(u=f.n,n.setAttribute(e,u)),f.n=t+"_"+u),r&&(f.y=r),n.setAttribute(o,JSON.stringify(f))):require(["track"],function(n){n.trackAppErrorEvent(l.updateTrackingInfo)}))}}var s=this,h,lt=n.createBindingContext(),rt,e,nt,st,ft,at,vt,b,k,et,g,p,w,tt,ht,d,ot,ct,yt="hasiap";u=n.utils.applyDefaults(u,{appLinkHandler:null,appLinkTrackHeadlineFormat:"",isUserAddedSitesEnabled:!1});s.bind=function(n){lt.update(n);e=lt.data};s.addCommand=new a(s);s.removeCommand=new a(s);s.pinCommand=new a(s);s.pinToTaskbarCommand=new a(s);s.contextMenuCommand=new a(s);s.updateIapDisclaimerCommand=new a(s);s.grantCookieConsentCommand=new a(s);s.toggleAddButtonMode=function(n){rt=n};s.canDrag=function(){return e&&e.type&&e.type!==v.topSiteType.suggested};s.getElement=function(){return r};s.getDragTile=function(){return new ut(p,r,s.canDrag)};s.getTopSite=function(){return e};s.tryGetAffiliateLink=function(n,t){var i=n.siteUrl||"",u,r;return t&&n.siteUrl&&n.domainPathAndQuery&&(u=n.domainPathAndQuery.replace(/\/$/,""),r=t[u],i=r?n.siteUrl.replace(/\/$/,"")+r:i),i};s.focus=function(){rt&&nt?nt.focus():e&&e.siteUrl&&w&&w.focus()};s.hasAddButton=function(){return rt};s.needsInAppPurchaseDisclaimer=function(){return p.className&&p.className.indexOf(yt)>=0};s.renderAppLink=function(){pt()};s.render=function(){var ut,ot,st;e=e||new n.topSite;h=o.getAppCalculatedColors(e.color,e.background);var l=e.type,nt=null,a=!0;w.onclick=null;g.src=e.icon||y;ct.innerText=e.getDisplayTitle()||"";r.className=rt?"addsite":"";r.style.zIndex="";s.renderAppLink();e.isSponsored()&&e.isCuratedSite()&&tt&&(tt.classList.add("spon-lbl"),ut=i.sponsoredText||"",tt.innerText=ut,(e.background==="#ffffff"||e.background==="")&&tt.setAttribute("class","spon-lbl spn-lbl-txt"));e.isApp?(nt="topsite_app",p.setAttribute("data-exclude-default-menu","true")):(ot=u.topSitesAffiliates,w.href=s.tryGetAffiliateLink(e,ot),c.isServiceUiAvailable()&&(w.onclick=function(n){c.navigate(w.href,c.constants.navigationTypes.currentTab,n)}));g.alt=e.domain&&f(i.favIconAltText,e.domain)||"";w.title=e.getTooltip()||"";a=l==v.topSiteType.curated||t.isContrastAcceptable(h.color,h.background);a||(e.backgroundFromAlgo=!0);e.color=a?h.color:h.isLightBackground?"#000":"#fff";ct.style.color=e.color;p.style.backgroundColor=h.background;k&&(k.style.color=h.remove,k.setAttribute("title",i.removeThisSite));d&&(d.style.color=h.remove);ht&&(ht.style.color=h.remove);b&&(b.style.color=h.remove);p.draggable=s.canDrag();b&&(u.isUserAddedSitesEnabled?(st=e.isPinned(),b.setAttribute("title",st?i.unpinThisSite:i.pinThisSite)):b.style.display="none");et&&(et.innerText=e.isApp&&i.topSiteAppAttribution||"",et.style.color=h.color);it(r,l);it(k,l);it(w,l,nt);it(ft,l);it(b,l)},function(){p=r.getElementsByTagName("div")[0];w=p.querySelector("a:first-child");ot=w.getElementsByTagName("div")[0];g=ot.getElementsByTagName("img")[0];ct=ot.getElementsByClassName("ts-title")[0];et=ot.getElementsByClassName("ts-attr")[0];st=r.querySelector("a.js-appAction");vt=st&&st.querySelector(".js-appActionText");ft=r.querySelector("a.app-learn-more");at=ft&&ft.querySelector(".js-appActionText");k=r.getElementsByClassName("remove")[0];d=r.getElementsByClassName("sugg-icon")[0];ht=r.getElementsByClassName("spnsr-icon")[0];tt=r.getElementsByClassName("sponsored-label")[0];b=r.getElementsByClassName("pinsite")[0];nt=r.querySelector(".add");g.onerror=function(){g.src=y;g.onerror=null};p.onkeydown=function(n){n.keyCode===46&&(p.onkeydown=null,s.removeCommand.trigger(e))};k&&(k.onclick=function(){s.removeCommand.trigger(e)});d&&(d.onclick=function(){require(["track"],function(n){n.trackEvent({type:"click_nonnav",target:d},d,w.href,"suggested_site_icon")})});b&&(b.onclick=function(){s.pinCommand.trigger(e)});r.oncontextmenu=function(){s.contextMenuCommand.trigger(e,r,s)};nt&&(nt.onclick=function(){s.addCommand.trigger()});r&&(r.onmousedown=function(){s.grantCookieConsentCommand.trigger()})}()}function it(t,r){function nt(){if(s){var n=s.topSite,t=s.topSiteNode;n&&n.siteUrl&&t&&(require(["track"],function(i){i.trackEvent({type:"click_nonnav",target:t},t,n.siteUrl,"removetopsite")}),w(f,n))}}function tt(n,t,i){t&&(t.icon||(t.icon=y),require(["track"],function(n){n.trackEvent({type:"click_nonnav",target:i},i,t.siteUrl,"pintopsitetotaskbar")}),f.pinTopsiteToTaskbarCommand.trigger(t))}function it(n,t,r,f){var e=u.getElementById("toggle_pin_topsite_menu_item"),h,o;t&&e&&(h=t.isPinned()?i.contextMenuUnpinTopSite:i.contextMenuPinTopSite,e.setAttribute("label",h),e.onclick=function(){n.pinCommand.trigger(t)},t.type===v.topSiteType.suggested?e.setAttribute("hidden","1"):e.removeAttribute("hidden"));o=u.getElementById("pin_topsite_to_taskbar_menu_item");o&&(o.onclick=function(){n.pinToTaskbarCommand.trigger(t,r)});s={topSite:t,topSiteNode:r,topSiteView:f}}function w(n,t){t&&f.removeTopSiteCommand.trigger(t)}function ut(n,t){f.pinTopSiteCommand.trigger(t)}function ft(n,i){f.addTopSiteCommand.trigger(i,t)}function b(){var n;e.forEach(function(t){t.needsInAppPurchaseDisclaimer()&&(n=!0)});d(t,"has-iap",n)}var f=this,e,k=new n.topSite,o,h=n.createBindingContext(),s,c,l=[];r=n.utils.applyDefaults(r,{isUserAddedSitesEnabled:!1,appLinkHandler:null});f.addTopSiteCommand=new a(f);f.removeTopSiteCommand=new a(f);f.pinTopSiteCommand=new a(f);f.pinTopsiteToTaskbarCommand=new a(f);f.dragAndDropCommand=new a(f);f.bind=function(n){h.update(n);o=h.data};f.getChildViews=function(){return e};f.focus=function(n){var t=e[n];t&&t.focus()};f.render=function(){o=o||new n.topSites;var u=o.getSitesToRender(),r=o.canAddUserSites(),i=!1;e.forEach(function(t,f){var e=u.get(f)||k,o=e.type;t.toggleAddButtonMode(!1);r&&!e.siteUrl&&o!==v.topSiteType.suggested?(t.toggleAddButtonMode(!0),r=!1):i||o!=v.topSiteType.curated||(i=!0);t.bind(n.createChildBindingContext(e,h));t.render()});d(t,"has-curated",i);b()},function(){var n=u.getElementById("remove_topsite_menu_item"),i;n&&(n.onclick=nt);i=t&&t.getAttribute("data-format-app-hl")||"";e=st(t&&t.getElementsByTagName("li")).map(function(n,t){var u=new p(n,{appLinkHandler:r.appLinkHandler,appLinkTrackHeadlineFormat:i,isUserAddedSitesEnabled:r.isUserAddedSitesEnabled,isInlinePinToTaskbarEnabled:r.isInlinePinToTaskbarEnabled,isInlineTopSitesActionsDisabled:r.isInlineTopSitesActionsDisabled,topSitesAffiliates:r.topSitesAffiliates});return u.addCommand.listen(function(n){ft(n,t);g(e)}),u.contextMenuCommand.listen(it),u.removeCommand.listen(w),u.pinCommand.listen(function(n){ut(n,t)}),u.pinToTaskbarCommand.listen(tt),u.updateIapDisclaimerCommand.listen(b),u.grantCookieConsentCommand.listen(function(n){var t=n.getTopSite();t&&t.type&&g(e)}),l.push(u.getDragTile()),u});r.isUserAddedSitesEnabled&&(c=new rt(t,l),c.dragAndDropCommand.listen(function(n,t,i){f.dragAndDropCommand.trigger(t,i)}))}()}function rt(n,t){function y(e,c){var a;(i=e,c.dataTransfer.setData("text",i.toString()),c.dataTransfer.effectAllowed="move",r||(r=u.getElementById("topsitesdroptarget")),h||(h=r.getElementsByTagName("li")),o||(o=k("topsitekeyframe"),o&&t.forEach(function(n,t){n.setDragAnimationAssets(o[t],"topsiteanimate"+t)})),r&&o)&&(r.style.top=n.offsetTop+"px",l=[],s=[],f=t.slice(),f.forEach(function(n){n.reset()}),n.style.zIndex=1,r.style.zIndex=2,Array.prototype.forEach.call(n.getElementsByTagName("li"),function(n,t){t==0&&(a=n.offsetTop);var i=new ft(t,h[t]);i.onDragOverCommand.listen(w);i.onDropCommand.listen(b);i.setBounds(n,a);s.push({top:n.offsetTop,left:n.offsetLeft});l.push(i)}),f[e].animationElement.classList.add("topsitedrag"),r.style.display="block")}function p(n,t){v(n,n,t)}function w(n,r){var u=n.index,h=t[u],l,o,a;if(h&&h.canDrag()&&r.preventDefault&&(r.preventDefault(),r.dataTransfer.dropEffect="move",i!=u)){for(var c=i<u?-1:1,v=Math.abs(u-i),e=u;v-->0;)l=f[e],o=s[e+c],l.animate(o.top,o.left),e=e+c;a=f[i];f.splice(i,1);f.splice(u,0,a);i=u}}function b(n,t){var i=t.dataTransfer.getData("text");v(i,n.index,t)}function v(i,u){if(u>=0&&i>=0&&i!=u){var f=n.children[i];require(["track"],function(n){n.trackGesture(f,"drop")})}r.style.display="none";t[i].animationElement.classList.remove("topsitedrag");c.dragAndDropCommand.trigger(i,u)}function k(n){var t=[];return Array.prototype.forEach.call(u.styleSheets,function(i){try{Array.prototype.forEach.call(i.cssRules,function(i){i.type==e.CSSRule.KEYFRAMES_RULE&&i.name.indexOf(n)==0&&t.push(i)})}catch(r){e.console&&e.console.log(r)}}),t}var o,i,l,s,f,r,h,c=this;c.dragAndDropCommand=new a(c);t.forEach(function(n,t){n.dragElement.ondragstart=function(n){y(t,n)};n.dragElement.ondragend=function(n){p(t,n)}})}function ut(n,t,i){var f=0,e=0,u,o,r=this;r.dragElement=n;r.animationElement=t;r.canDrag=i;r.reset=function(){f=e=0};r.setDragAnimationAssets=function(n,t){u=n;o=t};r.animate=function(n,i){var r,s;t.classList.remove(o);u.deleteRule("0");u.deleteRule("1");r="from { top: "+f+"px; left: "+e+"px;}";f=n-t.offsetTop;e=i-t.offsetLeft;s="to { top: "+f+"px; left: "+e+"px;}";u.appendRule(r);u.appendRule(s);t.style.zIndex=2;t.classList.add(o)}}function ft(n,t){var r="px;",i=this;i.index=n;i.onDragOverCommand=new a(i);i.onDropCommand=new a(i);i.element=t;t.ondragover=function(n){i.onDragOverCommand.trigger(n)};t.ondrop=function(n){i.onDropCommand.trigger(n)};i.setBounds=function(n,i,u){i=i||0;u=u||0;var f=["position:absolute;z-index:4;","top:",n.offsetTop-i,r,"left:",n.offsetLeft-u,r,"width:",n.offsetWidth,r,"height:",n.offsetHeight,r].join("");t.style.cssText=f}}function et(t){function g(n){t.classList.remove(v);s.disable();c.disable();l.disable();i.dismissedCommand.trigger(n);r.unsub(h.eventNames.sectionHeaderDockedEvent)}function tt(n){u.focus();n&&(u.value="http://",u.setSelectionRange(7,7),r.sub(h.eventNames.sectionHeaderDockedEvent,ut))}function ut(n){n?u.blur():u.focus()}function ft(){var t=n.utils.parseUrl(u.value);return t&&t.domain&&t.url&&t.url.trim()}function et(t){t=t.toLocaleLowerCase();var r=new n.topSite({siteUrl:t});t?i.newTopSiteCommand.trigger(r):tt()}var i=this,it,y=n.createBindingContext(),u,o,p,rt,e,s,c,l,d=7,v="show",f="px";i.newTopSiteCommand=new a(i);i.dismissedCommand=new a(i);i.bind=function(n){y.update(n);it=y.data};i.show=function(n,r){i.positionAddDialog(n,r);t.classList.add(v);tt(!0);s.enable();c.enable();l.enable()};i.hide=function(){g()};i.positionAddDialog=function(r,u,f,e){if(r&&u&&(!f||t.classList.contains(v)))e==n.constants.addDialogPosition.right?i.positionAddDialogToRight(r,u,!1):i.positionAddDialogAtBottom(r,u)};i.positionAddDialogAtBottom=function(n,i){var o=t.parentNode,s=o&&o.getBoundingClientRect()||{left:0,top:0},r=s.left,v=s.top,h=i.right-i.left,y=(t.offsetWidth-h)/2,c=i.left-r,p=n.left-r,w=n.right-t.offsetWidth-r,l=Math.min(Math.max(p,c-y),w),u,a;t.style.left=l+f;u=e.offsetWidth*Math.sqrt(2)/2;e.style.left=c-l-u+h/2+f;a=i.height*.93;t.style.top=i.top+a+u-v+d+f};i.positionAddDialogToRight=function(n,i,r){var o=t.style,u=e.style,s;o.top=i.top-n.top+d+f;r?o.right=n.right-i.right+i.width+f:o.left=i.left-n.left+i.width+f;s=-e.offsetWidth/2+f;r?u.right=s:u.left=s;u.top="35%";u.transform="rotate(-45deg)"},function(){u=t.querySelector("input[type=text]");e=t.querySelector("div.arrow");p=t.querySelector("button.close");p.onclick=i.hide;o=t.querySelector("button.save");o.onclick=function(){var n=ft();n&&et(n)};rt=t.querySelector("div.suggestions");s=w(t,function(){g(!0)});c=b(i.hide);l=k(nt,u,function(n){o.focus();o.click();n.preventDefault()})}()}function ot(n){var t=this,f,i,e,o,r,u;t.undoTopSiteCommand=new a(t);t.hideDialogCommand=new a(t);t.show=function(){e.innerText=o;n.classList.add("show");t.focus();r.enable();u.enable()};t.hide=function(){n.classList.remove("show");r.disable();u.disable();t.hideDialogCommand.trigger()};t.focus=function(){i.focus()},function(){f=n.querySelector("button.close");f.onclick=t.hide;i=n.querySelector("button.undo");i.onclick=function(){t.undoTopSiteCommand.trigger()};o=n.getAttribute("data-msg-removed");e=n.querySelector("span");r=w(n,t.hide);u=b(t.hide)}()}function a(n){var i=this,t=[];i.trigger=function(){var i=[n].concat(Array.prototype.slice.call(arguments)),r=Array.prototype.slice.call(t);r.forEach(function(n){n.apply(n,i)})};i.listen=function(n){typeof n=="function"&&t.push(n)};i.forget=function(n){if(n){var i=t.indexOf(n);i>=0&&t.splice(i,1)}};i.clear=function(){t.length=0}}function st(n){return n&&n.length?Array.prototype.slice.call(n):[]}function w(n,t){if(n&&t){var i=function(i){ht(i.target,n)||t()},r=function(){e.removeEventListener("mousedown",i)},u=function(){r();setImmediate(function(){e.addEventListener("mousedown",i)})};return{enable:u,disable:r}}}function b(n){return k(27,null,n)}function k(n,t,i){if(i){var r=function(r){r.keyCode!==n||r&&t&&r.target!=t||i(r)},u=function(){e.removeEventListener("keydown",r)},f=function(){e.addEventListener("keydown",r)};return{enable:f,disable:u}}}function ht(n,t){while(n&&n!==t)n=n.parentNode;return n===t}function d(n,t,i){if(n){var r=n.classList;return i?r.add(t):r.remove(t),i}}function g(n){s.grantCookieConsentAndDecorateLink(null,null,!0);n&&n.length&&ct(n)}function ct(n){n&&n.forEach(function(n){n&&n.grantCookieConsentCommand.clear()})}var v=n.constants,y=i.defaultIconUrl,nt=13,tt;return require(["telemetryDataTypes"],function(n){tt=n.TelemetryType}),{topSiteView:p,topSitesView:it,topSiteAddDialog:et,topSiteUndoDeletedDialog:ot}});require(["browserAccess","webStorage","topSitesModels","colorHelper"],function(n,t,i,r){function d(){var n=ft(b);define("topSitesStorage",n,et)}function ft(){return["document","window","perfMarker"]}function et(){function ot(n,t){ft&&(!n||n.length<=ft.count())||(ft=n?new i.topSiteCollection(n):ft||new i.topSiteCollection,t(ft))}function lt(n){if(n&&u){var t=[],i={},r=u,f=r.toJsLookup(function(n){return n.itemId});n=n.filter(function(n){return n.siteUrl});n.each(function(n,t){n.slotIndex=t;n.itemId?i[n.itemId]=!0:r.each(function(t){if(t.itemId&&n.siteUrl==t.siteUrl)return n.itemId=t.itemId,i[n.itemId]=!0,!1})});n.each(function(n,i){var r,u;if(!n.itemId){n.type==s.userselectedwebsite?v[n.siteUrl]||(v[n.siteUrl]=!0,t.push(ct(n,i))):t.push(ct(n,i));return}(r=f[n.itemId],r)&&(r.type!=n.type?(u=l[n.type],t.push({action:"update",faviconurl:g(n.icon),itemid:n.itemId,slotindex:n.slotIndex,sourcetype:u,faviconsourcetype:k[u]})):r.slotIndex!=n.slotIndex&&t.push({action:"reorder",itemid:n.itemId,slotindex:n.slotIndex}))});r.each(function(n){n.itemId&&!i[n.itemId]&&(t.push({action:"delete",itemid:n.itemId}),delete v[n.siteUrl])});at(t,null)}}function at(t,i){t&&t.length&&(n.setTopSites(t),setTimeout(function(){n.getTopSitesAsync().then(function(n){i&&i(n)})},rt))}function vt(n){u=tt(n);t.setObject(f,u.getJson());ht&&ht();ht=null}function ct(n,t){var f,i,u;return t<0||!n||!n.siteUrl||!n.type||!(f=l[n.type])?null:(i=r.parseColor(n.color),u=r.parseColor(n.background),{action:"add",url:n.siteUrl,slotindex:t,title:n.title,faviconurl:g(n.icon),faviconbackgroundcolor:u&&u.r<<16|u.g<<8|u.b||16777215,faviconforegroundcolor:i&&i.r<<16|i.g<<8|i.b||0,faviconsourcetype:k[f],itemid:"{00000000-0000-0000-0000-000000000000}",sourcetype:f})}var st,d,ut,ft,et,ht;return require(["c.topSitesReady","c.pageComplete"],function(){a&&b!==it.BlankPage&&n.getTopSitesAsync().then(function(n){vt(n)})}),{initialize:function(n){d=t.getObject(h)||{};ut=t.getObject(e)||{};et=t.getObject(w);st=n instanceof i.topSiteCollection?n:new i.topSiteCollection},getAppInstallsCache:function(){return JSON.tryParse(t.getItem(y))},getCurated:function(){return st},getDeletedDomainLookup:function(){return d},getDeletedUrlLookup:function(){return ut},getMaxCurated:function(n){return Math.max(0,o.tryParseInt(t.getItem(p),o.tryParseInt(n,Infinity)))},getFrequents:function(r,u){var f,e,s;if(r=o.tryParseInt(r,0),r<=0){ft=new i.topSiteCollection;u(ft);return}f=!0;f?(e=!1,n.features.ServiceUIAvailable?n.getFrequentSitesAsync(r).then(function(n){n&&t.setItem(c,n);e||ot(n,u)}):ot(null,u),s=JSON.tryParse(t.getItem(c)),s&&(e=!0,ot(s,u))):n.features.ServiceUIAvailable?n.getFrequentSitesAsync(r).then(function(n){f&&n&&t.setItem(c,n);ot(n,u)}):ot(null,u)},getRenderList:function(){var n=JSON.tryParse(t.getItem(f))||[];return new i.topSiteCollection(n)},getPreviousSuggestedSitesData:function(){return et},deleteSite:function(n){var i=null,r,u;return n.domain&&(r=!d[n.domain],d[n.domain]=!0,t.setObject(h,d),u=!ut[n.siteUrl],ut[n.siteUrl]=!0,t.setObject(e,ut),i=function(){r&&(delete d[n.domain],t.setObject(h,d));u&&(delete ut[n.siteUrl],t.setObject(e,ut))}),{undo:i||function(){}}},setAppInstallsCache:function(n){t.setItem(y,n)},setMaxCurated:function(n){(n=Math.max(0,o.tryParseInt(n,0)),n<=0&&st.count()<=0)||t.setItem(p,n)},setRenderList:function(n){nt(n);a&&lt(n)},setPreviousSuggestedSitesData:function(n){et=n;et&&et.lastUpdated>0&&et.lastIndex>=0&&t.setObject(w,et)}}}function g(n){return n==null||n.indexOf("data:image")>=0?null:"https:"+n}function nt(n){var i=n&&n.getJson();i&&i.length?t.setObject(f,i):t.removeObject(f)}function ot(n){u=tt(n);u.count()>0&&!t.getItem(f)&&nt(u);d()}function tt(n){var t=new i.topSiteCollection;return n&&n.forEach(function(n){var u=new i.topSite({color:n.faviconforegroundcolor?r.rgbNumberToCssHexColor(n.faviconforegroundcolor):"#000",background:n.faviconbackgroundcolor?r.rgbNumberToCssHexColor(n.faviconbackgroundcolor):"#fff",icon:n.faviconurl||n.faviconbase64,title:n.title,siteUrl:n.url,itemId:n.itemid,slotIndex:n.slotindex,type:s[n.sourcetype]});u.type&&t.add(u)}),t}var y="appInstallState",h="removedTopSites",e="removedTopSiteUrls",p="maxPrePopulatedSites",f="renderedSites",w="suggestedTopSites",c="frequentSites",o=i.utils,it=n.constants.displayOptionValues,b=n.isServiceUiAvailable()?n.getDisplayOption():0,rt=500,s={"default":"curated",frequent:"frequent",appromo:"suggested",userselectedwebsite:"user"},k={"default":"cms",frequent:"site",appromo:"cms",userselectedwebsite:"site"},l={};Object.keys(s).forEach(function(n){l[s[n]]=n});var ut=t.getItem(f),a=n.features.TopSiteStorage,u=null,v={};!a||ut||t.getItem(e)?d():n.getTopSitesAsync().then(function(n){ot(n)})});define("topSitesController",["topSitesModels","topSiteViews","topSitesStorage","perfMarker","serviceuihelper","browserAccess","mediator","viewport","errorCategory","coachMarks"],function(n,t,i,r,u,f,e,o,s){function rt(r){var w,ot;if(l=document.getElementById("js-topsites"),!l){it(!1);return}k=r||k;document.body&&document.body.classList.add("has-ts");var f=b.tryParseInt(l.getAttribute("data-maxcount"),8),v=i.getMaxCurated(f),d=b.tryParseInt(l.getAttribute("data-maxaddsuggested"),4),ct=b.tryParseInt(l.getAttribute("data-maxsuggested"),0),nt=u.features.TH2Features;nt=!0;v=Math.min(f-1,v);var lt=l.getAttribute("data-useradded"),c=nt&&lt==="true",at=l.getAttribute("data-inline-pin-to-taskbar-enabled")==="true",vt=l.getAttribute("data-inline-actions-disabled")==="true",rt=l.getAttribute("data-topsites"),yt=l.getAttribute("data-topsites-affiliates");i.initialize(new n.topSiteCollection(rt&&JSON.parse(rt)));w=i.getCurated();h=new n.topSites;h.initialize({canAddUserSites:c,curatedSites:w,deletedDomainLookup:i.getDeletedDomainLookup(),deletedUrlLookup:i.getDeletedUrlLookup(),maxTopSiteCount:f,maxCuratedCount:v,maxAddSuggestionsPerGroup:d,maxSuggestedCount:ct,previousRenderList:i.getRenderList(),stackingStrategy:y.topSiteStackingStrategy[c?"curatedFirst":"frequentsFirst"],suggestedSitesData:i.getPreviousSuggestedSitesData(),showFrequents:u.showFrequents()});w.count()||require(["track"],function(n){n.trackAppErrorEvent(s.getCuratedSitesData)});a=new t.topSitesView(l,{isUserAddedSitesEnabled:c,isInlinePinToTaskbarEnabled:at,isInlineTopSitesActionsDisabled:vt,topSitesAffiliates:JSON.tryParse(yt)});a.addTopSiteCommand.listen(ut);a.removeTopSiteCommand.listen(et);a.pinTopSiteCommand.listen(st);a.pinTopsiteToTaskbarCommand.listen(ht);c&&a.dragAndDropCommand.listen(ft);a.bind(n.createChildBindingContext(h,null));ot=l.getAttribute("data-showfrequents")!=="false";i.getFrequents(ot?f+d:0,function(n){g.frequentSitesCount=n&&n.count()||0;h.setFrequents(n);var t=h.getSitesToRender(!0);p(!0,!1)});e.sub(o.sizeChangeEventName,function(){tt(l,!0)});e.sub(y.events.changeFreqsVisibility,function(n){h.showFrequents(n);p(!1,!0)})}function p(n,t){var r=h.getSitesToRender(t),u;a.render();it(!0);i.setMaxCurated(h.getDisplayedCuratedCount());i.setRenderList(r);i.setPreviousSuggestedSitesData(h.getSuggestedSitesData());lt(r);n&&f.features.CanQueryFavIcons&&(u=r.filter(function(n){return!n.icon&&n.type===y.topSiteType.user}).map(function(n){return n.siteUrl}),f.getFavIconsAsync(u).then(function(n){ct(n)}))}function tt(n,t){if(c){var i=n.querySelector(".addsite"),r=i?i.getBoundingClientRect():null;c.positionAddDialog(n.getBoundingClientRect(),r,t,k.addDialogPosition)}}function ut(i,r,u){v&&v.hide();c=c||new t.topSiteAddDialog(document.getElementById("add-dialog"));c.bind(n.createChildBindingContext(h,null));c.newTopSiteCommand.clear();c.newTopSiteCommand.listen(function(n,t){h.addUserTopSite(t,r);c.dismissedCommand.clear();c.newTopSiteCommand.forget(this);c.hide();w();p(!0,!0);var i=at(t.siteUrl);i>=0&&a.focus(i)});c.dismissedCommand.clear();c.dismissedCommand.listen(function(n,t){t||setImmediate(function(){a.focus(r)})});tt(u,!1);c.show()}function ft(n,t,i){h.moveSite(t,i);w();p(!0,!0)}function w(){e.pub("forcePageReload","5")}function et(n,t){var r=h.getSitesToRender(),e=r.findIndexByKey(t,function(n){return n}),o=r.clone(),u;h.removeTopSite(t)&&(f.features.ServiceUIAvailable&&f.removeFrequentSite(t.siteUrl),u=i.deleteSite(t),ot(e,o,u),w(),setImmediate(function(){p(!0,!0)}))}function ot(n,i,r){var u,f;if(!v){if(u=document.getElementById("topsite-undo-dialog"),!u)return;v=new t.topSiteUndoDeletedDialog(u)}v.undoTopSiteCommand.clear();v.undoTopSiteCommand.listen(function(){var t=i.get(n);t&&((t.type===y.topSiteType.frequent||t.type===y.topSiteType.curated)&&(t.type=y.topSiteType.user),t.itemId=null,r.undo(),h.restoreRenderList(i),v.undoTopSiteCommand.forget(this),v.hide(),p(!0,!0),setImmediate(function(){a.focus(n)}))});f=document.activeElement;v.show();v.hideDialogCommand.listen(function(){})}function st(n,t){h.togglePinnedState(t);w();p(!0,!0)}function ht(n,t){var i=t.hasSchemelessCmsIcon();i||!t.icon.match(/^data:image\/png/i)?vt(t.icon,i,function(n){u.pinTopSiteToTaskbarAsync(t.title,t.siteUrl,n)}):u.pinTopSiteToTaskbarAsync(t.title,t.siteUrl,t.icon)}function it(n){if(d||(d=!0,define("c.topSitesReady",1)),n&&!nt){var t="TTTS";nt=!0;window.windowsPerfMarker(t);r(t,!0)}}function ct(n){var e,i,u,t,r,o,f;if(typeof n=="object"){e=h.getSitesToRender();i=[];for(u in n)t=n[u],t.icon&&e.each(function(n,r){n.siteUrl===u&&n.icon!==t.icon&&(n.icon=t.icon,n.background=t.background,n.color=t.color,n.backgroundFromAlgo=!0,i.push({site:n,index:r}))});if(i.length){for(r=0,o=i.length;r<o;r++)f=i[r],h.addUserTopSite(f.site,f.index);p(!1,!0)}}}function lt(t){var f=t.filter(function(n){return!!n.siteUrl}).count(),u,r;f||(u={cc:i.getCurated().count(),fc:g.frequentSitesCount,uc:i.getRenderList().filter(function(t){return t.type==n.constants.topSiteType.user}).count(),mc:i.getMaxCurated(),dc:Object.keys(i.getDeletedDomainLookup()).length},r=s.zeroTopSitesError,require(["track"],function(n){n.trackAppErrorEvent({errId:r.errId,errSource:r.errSource,errMsg:JSON.stringify(u)})}))}function at(n){var t=-1;return h.getSitesToRender().each(function(i,r){if(i.type===y.topSiteType.user&&i.siteUrl===n)return t=r,!1},null,!0),t}function vt(n,t,i){var r=new Image;r.setAttribute("crossOrigin","anonymous");r.onload=function(){var n=document.createElement("canvas"),u=n.getContext("2d"),t;n.height=this.height;n.width=this.width;u.drawImage(r,0,0);t=n.toDataURL("image/png");i(t)};r.src=t?"https:"+n:n}var d=!1,b=n.utils,y=n.constants,k={addDialogPosition:y.addDialogPosition.bottom},a=null,c=null,v=null,h,g={},l,nt;return{initialize:rt}});require(["topSitesController","c.dom"],function(n){n.initialize();define("c.topSites",1)});define("pageLayoutToggleOption",["pageLayoutHelper","mediator","spartanConstants"],function(n,t,i){var f="click",e="cfg",o="keypress",r=i.customizableLayouts,s=i.eventNames,u={};return u[r.BackgroundImageModuleKey]=r.BackgroundImageSettingsKey,u[r.TopSitesModuleKey]=r.TopSitesSettingsKey,u[r.FeedsModuleKey]=r.FeedsSettingsKey,function(i){function k(n){d(!a.checked);n.stopImmediatePropagation()}function p(){i.style.display="none"}function d(r){h=r;b();h!==n.getSettingValue(l)&&(t.pub(s.layoutToggleChanged,{key:l,value:h}),require(["track"],function(n){n.trackEvent({type:"click_nonnav",target:i},i,"",null,"main>section>Settings>Settings flyout")}))}function nt(n){var t;n!==r.CustomMode&&(l===r.BackgroundImageSettingsKey&&(t=n===r.InspirationalMode||n===r.InformationalMode?!0:!1),l===r.TopSitesSettingsKey&&(t=n===r.FocusedMode||n===r.InspirationalMode||n===r.InformationalMode?!0:!1),l===r.FeedsSettingsKey&&(t=n===r.InformationalMode?!0:!1),h!==t&&(h=t,b()))}function b(){a.checked=h;tt(c,h);it(c.firstElementChild,h)}function g(n){(n.keyCode===13||n.keyCode===32)&&(n.preventDefault(),d(!a.checked))}function tt(n,t){if(n){var i=n.getAttribute("data-al-"+(t?"on":"off"));n.setAttribute("aria-label",i)}}function it(n,t){n&&(n.innerText=n.dataset[t?"on":"off"],n.title=n.dataset[t?"on":"off"])}var l,h,a,v,y,w,c;if(i&&!i.classList.contains(e)){if(a=i.getElementsByTagName("input")[0],v=i.getElementsByTagName("label")[0],!a||!v){p();return}if(y=v.htmlFor,!y){p();return}if(w=i.getElementsByClassName("sw-focus"),c=w&&w[y],!c){p();return}if(l=u[y],h=n.getSettingValue(l),h===undefined){p();return}i.classList.add(e);b();c.removeEventListener(f,k);c.addEventListener(f,k);v.removeEventListener(o,g);v.addEventListener(o,g);t.sub(s.layoutModeChanged,nt);c.addEventListener("mousedown",function(){c.classList.add("using-mouse")});document.addEventListener("keydown",function(){c.classList.remove("using-mouse")})}}});define("staticsLoaderHelper",["document"],function(n){function r(r){if(t&&r){var u=n.createElement("script");u.src=i(r);u.async=!0;t.appendChild(u)}}function u(r,u){if(t&&r){var f=n.createElement("link");return f.rel="stylesheet",f.href=i(r),f.media="all","function"==typeof u&&f.addEventListener("load",u),t.appendChild(f),!0}return!1}function i(n){return n.replace(/&amp;/g,"&")}var t=n.getElementsByTagName("head")[0];return{loadJs:r,loadCss:u}});define("spartanTrackingHelper",["window","serviceuihelper","browserAccess","track","trackInfo","trackingConstants","telemetry.constants","getCookie","errorCategory"],function(n,t,i,r,u,f,e,o,s){function h(t){n.console&&n.console.log&&console.log(t)}function c(n,f){if(n){var s=t.tryUpdateTelemetryFields(n),o=n.sitePage;u.updateSitePage(o.templ,o.flightid,o.requestId);u.updateFeedMetadata(o.feedId,o.feedName,o.feedType);s||(require(["persistentStorageManager","c.trackExtComplete"],function(n){var u={e1:null,scp:a(n.fetchProperty("StructuredDataCardsUserPreference"))},o;t.features.CanHideOrShowFrequents&&(u.sf=t.showFrequents()?1:0);o=i.isServiceUiAvailable()?i.getEdgeExperiments():null;o instanceof Array&&o.length&&(u.ex=JSON.stringify(o));f&&(u.ar=1,r.preventBeacon(e.Ctag),r.preventBeacon(e.Comscore));r.trackPage(u)}),require(["postdata"],function(n){n.post()}))}}function l(n){f&&f.trackingData&&(f.trackingData.lastIndex=n)}function a(n){var t,e,i,l,o,s,r,c,f;if(!n)return"";t=[];for(e in n)i=n[e],i&&i.v&&(l=i.hasOwnProperty("p")?i.p:Number.MAX_VALUE,t.push({i:l,n:e}));for(t.sort(function(n,t){return n.n.length-t.n.length}),o=[],s=t.length,r=0;r<s;r++){var a=0,u="",h=t[r],v=h.n.length;do u=h.n.substring(0,++a);while(o.indexOf(u)!==-1&&a<v);h.n=u;o.push(u)}for(t.sort(function(n,t){return n.i-t.i}),c=[],f=0;f<s;f++)c.push(t[f].n);return c.join(",")}function v(n){var t=s.missingContentError,i=t.errMsg+n;r.trackAppErrorEvent({errId:t.errId,errMsg:i,errSource:t.errSource})}function y(){require(["c.dom"],function(){var n=document.body.querySelector("#spfooter .optanon-toggle-display"),t=o("OptanonAlertBoxClosed");(t&&!n||!t&&n)&&r.trackAppErrorEvent(s.oneTrustLoadError)})}function p(n){var t=s.riverJsonParseError,i=t.errMsg+n;r.trackAppErrorEvent({errId:t.errId,errMsg:i,errSource:t.errSource})}return{isImpressionSuppressed:!1,log:h,trackMissingContentError:v,trackJsonParseError:p,trackOneTrustError:y,updateTrackingInfo:c,updateLastTelemetryIndex:l}});define("basicPageTracking",["spartanTrackingHelper","spartanConstants","trackInfo","getCookie"],function(n,t,i,r){function f(){u||(require(["c.appCacheUpdateCheckDone"],function(){var u={sitePage:{flightId:i.sitePage.flightId,requestId:r(t.cookieNames.activityId)}};n.updateTrackingInfo(u)}),u=!0)}function e(){return u}function o(){u=!0}var u=!1;return{trackPage:f,isHandled:e,setHandled:o}});define("riverLoader",["window","location","document","ajax","headData","displayOptionsHelper","serviceuihelper","spartanTrackingHelper","basicPageTracking","staticsLoaderHelper","track","trackingConstants","trackInfo","mediator","perfMarker","freExperienceHelper","getCookie","setCookie","escape","promise","errorCategory","visibility","spartanConstants","spartanPageDetectionHelper","pageComplete"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt){function bi(n){var f=ct.getAttribute("data-ajaxurl"),u,o;if(!f)return null;var r=f.split("?"),i=[r[0]+"?ou="+k.urlPart(t.href)],e=ur();for(u in e)i.push(u+"="+e[u]);return r.length>1&&(o=r[1].split(dt),o.forEach(function(n){var t=n.split("="),r,u;t.length===1?i.push(t):(r=t[0],u=t[1],i.push(r+"="+u))})),n&&i.push("fi="+encodeURI(JSON.stringify(n))),i.join(dt)}function ki(n){if(!n){bt("Invalid response for the request",g.invalidAjaxResponse);ot();ft();return}sr(function(){gi(n)},fi&&wi)}function di(){var n=g.dhpNoAppCacheError,t=n.errMsg+"Market: "+w(ii);c.trackAppErrorEvent({errId:n.errId,errMsg:t,errSource:n.errSource})}function gi(t){var y=new n.DOMParser,f=y.parseFromString(t,"text/html"),e,s,c,l,a,i,r,v;if(ut=f&&f.getElementById(at),!ut){et(at);return}if(lt||fi||!w(ii)||(b(ti.noAppCache,"",-1),require([yi],function(){di()})),e="data-css",s=ut.getAttribute(e),!s){et(e);return}if(c="data-js",l=ut.getAttribute(c),!l){et(c);return}if(a=ut.getAttribute("data-xd-id"),ct.setAttribute("data-xd-id",a),u.kernelXd=u.xdid,u.xdid=a,hr(cr(ut),ut.getAttribute("data-sso")),yt=null,i=ut.getAttribute("data-track-info"),i)try{yt=JSON.parse(i.replace(/&quot;/g,'"'))}catch(p){ei("Error parsing trackInfo from the AJAX response: "+i,i)}r=ut.getElementsByClassName("cstli-js");r&&r.length&&o.updateLastTelemetryIndex(r[0].getAttribute("data-lastIndex"));h.loadCss(s,function(){ri(ut)});h.loadJs(l);require(["spartanJQueryLoader"],function(n){n()});or(f);v=ut.getAttribute("data-adsurl");h.loadJs(v)}function ei(n,t){o.log(n);o.trackJsonParseError(t)}function et(n){var t="Cannot find "+n;o.log(t);o.trackMissingContentError(n);a.trackCustomProperty("dq","0");ot();ft();ui(t)}function nr(n){n.target&&n.target.id===at&&n.propertyName==="opacity"&&wt()}function wt(){if(!kt){var t="TTAFAnimation";y(t,!0);n.windowsPerfMarker(t);define(pi,1);kt=!0}}function tr(){var n,t;return pt?(ht=i.getElementById(gt),!ht)?(et(gt),d.reject("Missing content.")):(u.ispreload?wt():ht.addEventListener("transitionend",nr),n=i.getElementById(ni),!n)?(et(ni),d.reject("Missing content.")):(t=[ci],vt&&t.push(vi),new d(function(i){require(t,function(){var t,r,f;define("c.readyForRiver",1);ht.classList.add("populated");t=!1;r=ut.getAttribute("data-version");r&&(f=u.clientSettings,f&&f.v!==r&&(t=!0));s.isHandled()||(o.updateTrackingInfo(yt,t),s.setHandled());i(ir(n))})})):d.reject("River not configured to load.")}function ir(n){return new d(function(t,i){oi(n)&&t();var u=0,r=setInterval(function(){if(oi(n))clearInterval(r),t();else if(!nt.isHidden()&&++u>=30){clearInterval(r);var f="Reached maximum attempts for river section items. Firing TrackPage beacon";i(f);bt(f,g.riverRenderError);ft()}},200)})}function oi(n){return n&&rr(n,"populated")?(wt(),require([li],function(){o.log("River section items are populated now. Firing the tracking beacon.");ft(!0)}),!0):!1}function rr(n,t){return n.classList&&n.classList.contains(t)||(" "+n.getAttribute("class")+" ").indexOf(" "+t+" ")>=0}function ur(){var o=0,u=fr(),f=i.getElementById("maincontent"),e,t,r,n;if(f)for(e=f.getAttribute("data-id"),t=f.querySelectorAll("[data-m]"),r=t&&t.length-1;r>=0;r--)if((n=er(t[r],"data-m"),n)&&(u||(u=n.i),n.p===+e)){o=n.o;break}return{telemetrystartindex:u,telemetryparentindex:e,telemetryordinalstartindex:o+1}}function fr(){var n=0;return l&&l.trackingData&&!isNaN(parseFloat(l.trackingData.lastIndex))&&isFinite(l.trackingData.lastIndex)&&l.trackingData.lastIndex>=1&&(n=l.trackingData.lastIndex),n}function er(n,t){var i=n.getAttribute(t);if(i)try{return JSON.parse(i)}catch(r){ei("parseDomAttributeJson failed to parse attribute '"+t+"': "+r,i)}return null}function ft(n){n||s.trackPage();rt({shouldWaitForRiverReady:st,waitForTopSitesReadyCanary:vt})}function or(n){var t=i.getElementById("meCtrl"),r;t&&(r=n.getElementById("signed-in-js"),r&&u.signedin?(t.replaceChild(r,t.children[0]),u.clientSettings.mecontroluri=r.getAttribute("data-me-control-js")):u.modified&&require(["appCacheHelper","errorCategory"],function(n,t){n.forceUpdate(t.srlLoadMeControl)}),t.classList.add("loaded"))}function sr(n,t){t?require([t],n):n()}function hr(n,t){var i=0,r=u.signedin;n&&(i=n.isAuthenticated=n.isAuthenticated&&n.isAuthenticated.toUpperCase()==="TRUE",n.cid=typeof n.cid=="number"?n.cid.toString():n.cid,u.anonckname=n.anonckname);u.signedin=+i||0;u.modified=r!==u.signedin;u.sso=!i&&t;ot();n&&define("meControlRpsModel",n)}function ot(){define("c.headDataUpToDate",1)}function cr(n){var t=n&&n.dataset;return t&&{cid:t.cid,memberName:t.memberName,lastName:t.lastName,firstName:t.firstName,isAuthenticated:t.isAuthenticated,meUrl:t.meUrl,signOutUrl:t.signOutUrl,signInUrl:t.signInUrl,anonckname:t.anonckname}}function bt(n,t){n&&o.log(n);t&&c.trackAppErrorEvent(t)}function lr(n){return new d(function(u,o){ri=u;ui=o;n=n||{};if(ct=i.getElementsByTagName("head")[0],st=bi(null,n.preserveExistingXFeedId,n.isFirstPivotLoad),pt=st&&f.shouldRenderRiver()&&!(hi&&t.search&&t.search.toLowerCase().indexOf("enableregulatorypsm=1")>=0),vt=i.querySelector("[data-section-id='section.apps.topsites']"),!pt){ot();v.pub("updatePageInstance");ft();u();return}e.getNtpWebIG()||(v.pub("updatePageInstance"),require(["postdata"],function(n){n.post()}));p.setFreExperienceMarker(lt);r.get({url:st,dataType:"html",success:ki,error:function(n,t){var i=g.ajaxServerError,r={errId:i.errId,errMsg:i.errMsg+n,errSource:i.errSource};bt("Delay loading failed: "+t,r);ot();ft()}})})}var ct=null,st=null,kt=!1,si=t.pathname,lt=it.isSomeNtpPage,hi=!lt&&si.indexOf("/dhp")>=0,dt="&",at="contentsection",gt="delayloadedcontent",ni="riversection",ti=tt.cookieNames,ii=ti.marketSelection,ri,ui,ci="c.appCacheUpdateCheckDone",li="c.riverReady",ai=tt.canaries.topSitesCanary,vi=tt.canaries.topSitesReadyCanary,yi="c.pageComplete",pi=tt.canaries.ttafAnimation,wi=ai,fi=f.shouldRenderTopSites(),vt,ht,yt,ut,pt;return{loadAsync:lr,performPostAttachActionsAsync:tr}});require(["browserAccess"],function(n){n.features.PersistentStorage?n.fetchPageSettingsAsync().then(function(n){define("initialPersistentSettings",n||"N/A")}):define("initialPersistentSettings","N/A")});define("pageCustomization",["window","document","track","location","displayOptionsHelper","serviceuihelper","browserAccess","mediator","cookieComplianceHelper","setCookie","getCookie","persistentStorageManager","newsFeedFilterHelper","navigator","freExperienceHelper","confirmationDialog","pageCustomization.tokens","headData","sdCardFilterHelper","spartanConstants","spartanPageDetectionHelper","navigation","c.dom"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt){function of(){var n=t.getElementById(yu),r,i;n&&(r=n.querySelector(su),vr(r),i=n.querySelector(cu),i&&i.addEventListener(rt,wr))}function vr(n){n&&n.addEventListener(rt,function(){li()})}function yr(n){yt=yt||t.getElementById(vu);it&&yt&&(n?(it.removeAttribute(ki),yt.classList.remove(wi)):(it.setAttribute(ki,"true"),yt.classList.add(wi)))}function sf(i){function b(n){if(e&&e.length){var t=e[0];n?(t.title=t.innerHTML=" ",g.isIeNtpPage||g.isExtNtpPage||g.isShoppingExtNtpPage||g.isMicrosoftNewsExtNtp||t.classList.remove("hidden")):(t.title=t.innerHTML="",g.isDhpPage&&ht==="zh-cn"?t.classList.remove("hidden"):t.classList.add("hidden"))}}var h,e,s,r;hr=i||{};st=t.body;h=t.getElementById(ou);e=t.getElementsByClassName(pi);bt=t.querySelector(er);var y=bt&&bt.querySelector(pu),p=t.getElementById(or),w=t.getElementById(sr),c=t.getElementsByClassName(uf),l=t.getElementsByClassName(ff);if(!v.onLine){nu(e);return}if(it=t.getElementById(au),it&&(ht=pt=it.value,it.addEventListener(fi,gr)),b(u.getNtpDisplayOptionValue()==ut),n.addEventListener(hu,li),h&&h.addEventListener(rt,hf),w&&w.addEventListener(rt,function(n){n.stopImmediatePropagation();lf()}),p&&p.addEventListener(rt,af),y&&y.addEventListener(rt,function(n){n.preventDefault();f.openEdgeSettingsPane()}),tu(f.showFrequents()),o.sub("changeFrequentsVisibility",tu),tr||si)for(s=c&&c.length,r=0;r<s;r++)c[r].addEventListener(rt,function(){var n=u.shouldRenderTopSitesOnly(),t=hr.forceRefresh||!n||si;(gt(ut,t),si)||(o.pub("updatesearchformcodes"),n&&(b(!0),u.configurePageToShowSuggestedContent(),require(["delayLoadModules"],function(n){n()})))});for(t.querySelector(ti)&&t.querySelector(ti).classList.add(nr),s=l&&l.length,r=0;r<s;r++)l[r].addEventListener(rt,wr);for(s=e&&e.length,r=0;r<s;r++)vr(e[r]);if(tt=t.getElementsByName(hi),tt)for(s=tt.length,r=0;r<s;r++)tt[r].addEventListener(fi,dr),tt[r].addEventListener(fi,ai);vi=a.setup();yi=k.setup();o.sub(ef,li);wf()}function hf(){f.exitSettingsMode();e.isServiceUiAvailable()&&(e.enableOneBoxAnimation(!0),e.showOneBoxAnimation(!0));br();gr();a.hide();k.hide();st.classList.remove(kt);var n=uu();n&&n.classList.remove(kt);st.scrollTop=0;o.pub(gi)}function cf(){c(ni.feedFilter)&&h(ni.feedFilter,"",-1,r.host,"/"+b.clientSettings.vk+"/")}function pr(){s.grantCookieConsentAndDecorateLink(event,null,!0);var n=it&&it.options.length&&it.value;return y.isEdgeStartModalOpen()&&(n=ot&&ot.options.length?ot.value:""),n&&n.toUpperCase()!==ht.toUpperCase()?(pt=n,fu(pt),!0):void 0}function lf(){var n=t.getElementById(sr);vf();pr();var u=a.saveSelectedFilters(),f=k.saveSelectedFilters(),e={action:"save",fromShow:bi[ft],toShow:bi[at],fromMkt:ht,toMkt:pt,fromTopics:vi,toTopics:u,fromSDCardsSelection:yi,toSDCardsSelection:f},o=JSON.stringify(e);i.trackEvent({type:rt+"_nonnav",target:n},null,r.href,o,"customization_page_save");ui()}function af(){p.show(w.resetDialogTitle,w.resetDialogMessage,w.resetDialogConfirm,w.resetDialogCancel,function(n){var u,f;n&&(gt(ut,!1),l.clear(),e.features.TopSiteStorage&&e.clearTopSites(),u=t.getElementById(or),i.trackEvent({type:"click_nonnav",target:u},null,r.href,bu,"customization_page_reset"),f=nt.getParamsFromUrl(r.href).locale||"",fu(f),ui("pcResetSettings"))})}function vf(){var n,r,i,u;for(tt=tt||t.getElementsByName(hi),vt=vt||tt&&tt.length,r=0;r<vt;r++)if(n=tt[r],wt===ei){if(n.checked){i=at=Number(n.value);gt(i);break}}else wt===oi&&(ri&&n.id==ci+lt?(i=at=n.checked?Number(n.value):at,u=tt[0],i=u&&u.checked&&n.checked?et.BlankPage:i):i=at=n.checked?ct:ut,gt(i))}function li(){var n,i;v.onLine&&(o.pub(cr),yf(),br(),k.show(),a.show(),e.isServiceUiAvailable()&&(e.showOneBoxAnimation(!1),e.enableOneBoxAnimation(!1)),st.classList.add(kt),n=uu(),n&&n.classList.add(kt),i=t.getElementsByClassName(wu),i&&i[0].focus())}function yf(){var n,i,r;for(ft=at=u.getNtpDisplayOptionValue(),tt=tt||t.getElementsByName(hi),vt=vt||tt&&tt.length,i=0;i<vt;i++)n=tt[i],wt===ei?(n.checked=n.value==+ft,n.checked&&(kr.call(n),ai.call(n))):wt===oi&&(ri?(r=n.id==ci+lt,n.checked=(r?lt==ft:ct==+ft)||et.BlankPage==ft):n.checked=ct==+ft,dr.call(n),ai.call(n))}function wr(){gt(ct,!0)}function gt(n,t){u.setNtpDisplayOptionValue(n);t&&ui()}function ui(n){o.pub("forcePageReload","2");st.classList.remove(kt);st.classList.add(ku);e.isServiceUiAvailable()&&(e.enableOneBoxAnimation(!0),e.showOneBoxAnimation(!0));di?pf(n):require(["spartanSharedHelper","errorCategory"],function(t,i){t.refreshPage(!1,i[n]||i.pcSettingsChanged)})}function pf(n){require(["appCacheHelper","errorCategory"],function(t,i){t.forceUpdate(i[n]||i.pcSettingsChanged)})}function br(){ht&&it&&(it.value=ht)}function kr(){var t=+this.value,n=t===ut;yr(n);k.enableFilterOptions(n)}function ai(){a.enableFilterOptions(!(this.value&&Number(this.value)))}function dr(){var n,t,i;wt===oi?(ri&&(this.value==lt||this.value==et.BlankPage)?(t=tt.length>0&&tt[0].checked,n=this.checked?t?et.BlankPage:lt:t?ct:ut):n=this.value=this.checked?ct:ut,i=n==ut||n==lt,yr(i),k.enableFilterOptions(i)):kr.call(this)}function gr(){it&&it.value&&(a.updateFilters(it.value),k.updateFilters(it.value),i.trackPartialImpression(it))}function nu(n){for(var f=n&&n.length,r="hidden",u=t.getElementById(lu),i=0;i<f;i++)n[i].style.visibility=r;u&&(u.style.visibility=r);t.querySelector(ti)&&t.querySelector(ti).classList.remove(nr)}function tu(n){bt&&(bt.style.display=n?"none":"block")}function wf(){var i=l.fetchProperty(ir),n=y.getStartModalMask();n&&(lr=t.getElementById(gu),ot=t.getElementById(nf),ii=t.getElementById(tf),ar=t.getElementById(du),dt=n.getAttribute(rf),n.addEventListener(rt,ru),lr.addEventListener(rt,function(n){n.stopPropagation()}),ar.addEventListener(rt,ru),ii.addEventListener(rt,bf))}function bf(){var f=pr(),u;if(f){var n=ot&&ot.options,e=n&&n[ot.selectedIndex].getAttribute("data-js-sug")==="1",t={suggested:e,toMkt:pt};dt&&dt.indexOf("_lt")>0&&(t.showCntnt=!0);u=JSON.stringify(t);i.trackEvent({type:rt,target:ii},null,r.href,u);ui("pcSaveEdgeModal")}else i.trackEvent({type:"click_nonnav",target:ii},null,r.href,dt+"_dismiss_getstarted"),iu()}function iu(){y.closeEdgeStartModal();y.setFreExperienceMarker(tr)}function ru(n){n&&(n.stopPropagation(),i.trackEvent({type:"click_nonnav",target:n.target},null,r.href,dt+"_dismiss_outer"));iu()}function uu(){return t.getElementById("searchhistory")}function fu(n){di&&c(ni.marketSelection)||eu();l.saveProperty(ir,{m:n});l.saveProperty("FreDialogExistingUser","false");cf()}function eu(){h(rr,undefined,-1);h(rr,1,3650,undefined,"/spartan/")}var st,ou="cancelsettings",fi="change",rt="click",ni=d.cookieNames,ht,ft,vi,yi,pi="customizesettings",su="."+pi,wi="disabledMarketSelection",et=e.constants.displayOptionValues,ct=et.TopSitesOnly,ut=et.TopSitesAndSuggestedContent,lt=et.NewsFeedOnly,bi=["TopSitesAndNewsFeed","TopSites","Blank"],ki="disabled",hu="entersettingsmode",di=!!t.querySelector("html[manifest]"),gi="hideCustomizationPage",cu=".hidenewsfeed",nr="hideofflinesection",lu="inlinesettings",ei="radio",oi="checkbox",tr=g.isSomeNtpPage,si=g.isSomeDhpPage,ir="MarketSelection",it,au="marketselectorsettings",yt,vu="marketselectionsectionsettings",at,pt,rr=ni.noAppCache,ur=".ntoptions",fr=t.querySelector(ur),wt=fr?fr.getAttribute("data-type")||ei:"",hi="displayOption",tt,vt,yu="ntss",er=ur+" p",pu=er+" a",bt,wu="settingscontent",or="resetsettings",bu='{action:"reset"}',ku="savesettings",sr="savesettings",ti="div[data-section-id='section.offline']",hr,cr="showCustomizationPage",kt="showsettings",lr,ar,du="startmodalclose",gu="startmodal",ot,nf="startmodalmarketselector",ii,tf="startmodalstart",dt,rf="js-tpre",uf="showtopsitesandnewsfeed",ff="showtopsites",ef="triggerShowCustomizationPage",ri=!1,ci;return ri=g.isIeNtpPage,ci="ntoption",require([d.canaries.marketCookieNotFound],function(){eu()}),{bindRiverSectionHeaderButtons:of,hideCustomizationPageEventName:gi,render:sf,showCustomizationPageEventName:cr,offLineMode:nu}});define("newsFeedFilterHelper",["document","persistentStorageManager"],function(n,t){function v(){if(i=n.getElementById("filter_options"),s=n.getElementById("filters_holder"),s&&i&&(s.appendChild(i),r=i&&i.querySelectorAll("button"),f=r&&r.length,f)){for(var t=0;t<f;t++)r[t].addEventListener("click",tt);return nt()}return[]}function y(){var t,s,o,n;if(i&&i.classList&&i.classList.add("displayed"),r)for(t=u?u.v:[],s=t&&t.length,o=0;o<f;o++)n=r[o],s>0&&t.indexOf(n.getAttribute(l))>-1?n.classList.add(e):n.classList.remove(e),w(n)}function k(){i&&i.classList&&i.classList.remove("displayed")}function d(){var i={},n,o,u;for(i.v=[],n=0;n<f;n++)r[n].classList.contains(e)&&(o=r[n],u=o.getAttribute(l),u&&i.v.push(u));return t.saveProperty(h,i),b(i.v)}function p(n){var t,u;if(i&&i.classList)for(n?i.classList.remove(c):i.classList.add(c),t=0;t<f;t++)u=r[t],u&&(n?u.removeAttribute("disabled"):u.setAttribute("disabled","true"))}function g(){return u=t.fetchProperty(h),u&&u.v!=undefined}function nt(){return u=t.fetchProperty(h),u?b(u.v):[]}function tt(){this.classList&&this.classList.toggle(e);w(this)}function w(n){if(n){var t=n.classList&&n.classList.contains(e),i=t?n.getAttribute("data-al-on"):n.getAttribute("data-al-off"),r=t&&n.getAttribute("data-tt-on")?n.getAttribute("data-tt-on"):n.getAttribute("data-tt-off");i&&n.setAttribute("aria-label",i);r&&n.setAttribute("title",r)}}function it(n){require(["refreshModules","headData"],function(t,r){var u=r.moduleapi,f;u&&i&&(p(!1),o=new Image,o.src=i.dataset.loadingGif,i.insertBefore(o,i.children[0]),o.classList.add("loading"),u=u.replace(/\/\D\D-\D\D\//,"/"+n+"/"),f={loadEmptyContent:!0},t(i,"pcsl=true",null,null,!0,u,n,!0,f).then(function(){v();y()}))})}function b(n){var i,u,t,f,r;if(n){for(i=[],u=n.length,t=0;t<u;t++)f=n[t].toUpperCase(),r=a[f],r&&i.push(r);return i.sort()}return[]}var c="dfa",r,i,f,l="data-c",s,e="sf",u,h="TopicSelection",a={A:"News",B:"Weather",C:"Entertainment",D:"Sports",E:"Finance",F:"Lifestyle",G:"Health",H:"FoodAndDrink",I:"Travel",J:"Autos",K:"Video",L:"Homepage",AW:"World",AU:"US",AC:"Crime",AP:"Politics",AT:"Technology"},o;return{enableFilterOptions:p,hasSavedSelectedFilters:g,hide:k,saveSelectedFilters:d,setup:v,show:y,topicsTelemetryValueMapping:a,updateFilters:it}});define("sdCardFilterHelper",["document","persistentStorageManager","mediator"],function(n,t,i){function c(){var e,i,f,s;if(r=n.getElementById("sdcardsettings"),e=n.getElementById("sdcardsettings_holder"),e&&r){if(e.appendChild(r),i=r.querySelectorAll(o),i)for(f=0;f<i.length;f++)s=i[f],s.addEventListener("click",tt);return t.fetchProperty(u)||[]}return[]}function l(){var n,f,i,h;if(r){if(n=r.querySelectorAll(s),!n.length)return;if(r.style.display="",r.classList&&r.classList.add("displayed"),f=n&&t.fetchProperty(u),f)for(i=0;i<n.length;i++){var e=n[i],l=e.getAttribute("data-storage-key"),o=f[l],c=!o||o.v==undefined||o.v;e.checked=c;h=e.parentElement.querySelector(v);h.innerText=h.getAttribute("data-"+(c?"on":"off"))}}}function y(){r&&r.classList&&r.classList.remove("displayed")}function p(){var n=t.fetchProperty(u)||{},e=r&&r.querySelectorAll(s),f;if(e){for(f=0;f<e.length;f++){var l=e[f],o=l.getAttribute("data-storage-key"),c=n[o]||{};c.v=+l.checked;n[o]=c;i.pub(h+o,c)}t.saveProperty(u,n)}return n}function a(n){var t=r&&r.querySelectorAll(o);t&&(n?(d(t),r.classList.remove(e)):(k(t),r.classList.add(e)))}function w(){return!!t.fetchProperty(u)}function b(n){require(["refreshModules","headData"],function(t,i){var u=i.moduleapi;u&&r&&(a(!1),f=new Image,f.src=r.dataset.loadingGif,r.insertBefore(f,r.children[0]),f.classList.add("loading"),u=u.replace(/\/\D\D-\D\D\//,"/"+n+"/"),t(r,"pcsl=true",null,null,!0,u,n,!0).then(function(){c();l()}))})}function k(n){for(var t=0;t<n.length;t++)n[t].setAttribute("disabled","true")}function d(n){for(var t=0;t<n.length;t++)n[t].removeAttribute("disabled")}function g(n,t){if(n){var i=n.getAttribute("data-al-"+(t?"on":"off"));n.setAttribute("aria-label",i)}}function nt(n,t){n&&(n.innerText=n.getAttribute("data-"+(t?"on":"off")))}function tt(n){var t=n&&n.currentTarget,i,r;t&&(i=t.parentNode&&t.parentNode.previousElementSibling,i&&(r=!i.checked,i.checked=r,g(t,r),nt(t.firstElementChild,r)))}var e="disabledMarketSelection",f,u="StructuredDataCardsUserPreference",o=".sw-input, .sw-focus",s=".sw-input",v=".switch .sw-focus span",r,h="sdcardfiltersaved";return{enableFilterOptions:a,hasSavedSelectedFilters:w,hide:y,saveSelectedFilters:p,sdCardFilterSavedEventPrefix:h,setup:c,show:l,updateFilters:b}});define("pageCustomization.tokens",function(){return{resetDialogTitle:" ?",resetDialogMessage:"           .",resetDialogConfirm:"",resetDialogCancel:""}});require(["pageCustomization","c.dom"],function(n){n.render()});define("confirmationDialog",["document","confirmationDialog.tokens"],function(n,t){function k(){if(i=n.getElementById(y),i){c=i.querySelector(b);h=i.querySelector(w);var t=i.getElementsByTagName(p);u=t[0];r=t[1];f=n.getElementById("spfooter")}}function d(n,y,p,w,b){i&&(s=b,f&&f.setAttribute(a,-1),c.innerText=n||"",h.innerText=y||"",r.innerText=w||t.defaultCancelTitle,u.innerText=p||t.defaultConfirmTitle,r.onclick=function(){e(b,!1)},u.onclick=function(){e(b,!0)},r.onblur=function(){u.focus()},u.onblur=function(){r.focus()},window.addEventListener(l,v,!1),i.classList.add(o),i.setAttribute("aria-label",y),r.focus())}function v(n){n.keyCode===27&&e(s,!1)}function e(n,t){window.removeEventListener(l,v,!1);f&&f.removeAttribute(a);i.classList.remove(o);n&&n(t)}var r,i,y="confirmationdialogmask",o="showconfirmationdialog",p="button",s,h,w="span",c,b="h3",u,l="keyup",f,a="tabindex";return{initialize:k,show:d}});define("confirmationDialog.tokens",{defaultCancelTitle:"",defaultConfirmTitle:""});require(["confirmationDialog","c.dom"],function(n){n.initialize()});define("searchHistoryHelper",["eduSkuHtmlSearchProperties"],function(n){function i(n){t=Object.assign&&Object.assign(t,n)||n||{}}function r(i,r){var u,f;if(i&&i.Url)return u=i.Url,r&&(u+="&FORM="+r),t.addEduParams&&(f=n.getAsQueryParameterString(),f&&(u+="&"+f)),u}var t={addEduParams:!1};return{setup:i,processItemUrl:r}});define("searchHistory.tokens",{Header:":",ManageHistoryText:"",ManageHistoryUrl:"https://www.bing.com/profile/history?rp=%2f&FORM=O2LH",SearchHistoryItemLinkText:"     {0}: {1}",SpartanFetchSearchHistoryUrl:"https://www.bing.com/profile/history/data",SpartanManageHistoryUrl:"https://www.bing.com/profile/history?FORM={0}"});define("searchHistory",["window","jquery","jqBehavior","format","pageInstance","trackInfo","viewAware","searchHistory.tokens","telemetryDataTypes","elementTrackingDecorator","track"],function(n,t,i,r,u,f,e,o,s,h){function a(i,c){function b(){e.currentView()&e.views.SIZE4COLUMN?(l+=c.fourColAdj,a++):(l=c.maxLength,a=c.maxResults)}function k(){t.ajax({url:c.shUrl,dataType:"text",cache:!1,xhrFields:{withCredentials:!0},success:function(n){d(n)},error:function(){}})}function d(n){var t=!1;t=f.sitePage&&f.sitePage.page_name===s.TelemetryPageName.VideoPageNames.ChannelPlayerPage.PageName?!0:!0;t?require(["c.deferred"],function(){p(n)}):p(n)}function p(n){var p,l,e,w,o,k,s,y,d,ut,ft,et;try{if(n&&n.length>2&&(b(),p={},p=c.useEval?eval("("+n+")"):JSON.parse(n),l=p.UserHistory,l&&l.QuerySets&&(e=it(l.QuerySets),e&&(e=e.slice(0,a)),w=e&&e.length,w))){for(o=t('<ul id="opensh"><li>'+c.shLbl+"<\/li><\/ul>"),k=u.getActivityId()||f.sitePage.requestId,s=0;s<w;s++)y=e[s],y&&y.Text&&o.append(rt(y,k,s));d=nt();ut=d.find(v);ut.remove();ft=r('<li class="clrsh"><a href="{1}" title="{2}">{0}<\/a><\/li>',c.manageHistory.manageText,c.manageHistory.manageURL,c.manageHistory.manageText);o.append(ft);et?(i.after(o),deferredPartialImpressionCall(o,k)):g(o,d,h)}}catch(ot){}tt()}function g(n,r,u){var e={defaults:{n:"recentsearch"},selector:"ul,li>a",elementOverride:function(n,i){var r=t(n);r.attr("id")=="opensh"?i.n="searchhistory":r.parent().hasClass("clrsh")&&(i.n="managehistory")},visibilityCheck:!1},f;u&&u.setTrackingAttrs(n,r,e,!0);i.after(n);f=r.find(v);require(["track"],function(n){n.trackPartialImpression(f,!1)})}function nt(){var n=t("#header-search");return n.length||(n=t("#searchhistory")),n}function tt(){c.captureTTSH&&(n.performance&&n.performance.mark("TTSH"),define("c.ttsh",1))}function it(n){var i=null,t;if(!n)return i;for(t=0;t<n.length;t++)n[t].Type==c.queryType&&(i=n[t].Queries);return i}function rt(n,i,r){var u=c.processItemUrl?c.bingUrl+c.processItemUrl(n,y):c.bingUrl+n.Url.replace(/FORM=[O|o]\d*MSN\d*/gi,"FORM={0}".format(y)),f,e;return u+="&refig="+i,u+="&httpsmsn=1",u+="&msnews=1",f=t("<a>").attr({href:u,title:n.Text,target:c.target}).text(n.Text),c.addAriaLabelToItems&&f.attr("aria-label",o.SearchHistoryItemLinkText.format(r+1,n.Text)),e=n.Text.length<l?"<li>":'<li class="shrink">',t(e).append(f)}var v="#opensh",w="cac";if(w="edgecac",!n.mscc||n.mscc.hasConsent()){var y=c.shfc,l=c.maxLength,a=c.maxResults;k()}}var c=(f.sitePage&&f.sitePage.entitySrc||"").toLowerCase(),l;return c.indexOf("ar")!=-1||c.indexOf("ss")!=-1||c.indexOf("vi")!=-1||c.indexOf("vp")!=-1||c.indexOf("vs")!=-1?function(){}:(l={shUrl:"https://www.bing.com/msnhomepagehistory.aspx",bingUrl:"https://www.bing.com",maxResults:4,queryType:"recent",maxLength:9,fourColAdj:8,target:"_blank",shLbl:o.Header,manageHistory:{manageText:o.ManageHistoryText,manageURL:o.ManageHistoryUrl},shfc:"PRHPHI",enableUnitTesting:!0,useEval:!0,captureTTSH:!1,addAriaLabelToItems:!1},i(a,l))});define("getSpartanSearchFormCode",["spartanPageDetectionHelper","getCookie","displayOptionsHelper","browserAccess","location","navigation","deviceGroup"],function(n,t,i,r,u,f,e){return function(o){function y(){return c?"EDGNB1":"EDGSPH"}function a(n){switch(n){case"contentOff":return c?"EDGNB3":"EDNTHN";case"contentOn":return c?"EDGNB2":"EDNTHT";case"blankPage":return c?"EDGNB4":"EDNTHB"}}var s,c=r.isServiceUiAvailable()&&r.getThirdPartySearchProvider()&&!1,h=n.isDhpPage,v=n.isNtpPage,l;return n.isExtNtpPage?s=i.shouldRenderTopSitesOnly()?o?"ICECS2":"ICECH2":o?"ICECS1":"ICECH1":n.isShoppingExtNtpPage?s=i.shouldRenderTopSitesOnly()?o?"MNCSS2":"MNCSH2":o?"MNCSS1":"MNCSH1":n.isMicrosoftNewsExtNtp?s=i.shouldRenderTopSitesOnly()?o?"MNCNS2":"MNCNH2":o?"MNCNS1":"MNCNH1":n.isIeNtpPage?(l=u.search,s=l&&f.getParamsFromUrl(l.toLowerCase()).ntlogo==="0"?"IENTS1":parseInt(t("FreWv"))>=2?"IENT2H":"IENTSH"):s=(h||v)&&e.isXbox?o?h?"EXBSP3":"EXBNT3":h?"EXBSP4":"EXBNT4":(h||v)&&t("child")?"EDGNTK":h?o?y():"EDGSH1":i.shouldRenderTopSitesOnly()?o?a("contentOff"):"EDGSH4":i.isDisplayOptionSetToBlank()?o?a("blankPage"):"":o?a("contentOn"):"EDGSH3",s}});define("searchHistoryNonEdgeNtp",["binding","location","navigation","format","searchHistory.tokens","searchHistoryHelper","getSpartanSearchFormCode","displayOptionsHelper","c.deferred"],function(n,t,i,r,u,f,e,o){function s(){var r=t.search,i;o.isDisplayOptionSetToBlank()||(i=e(!1),n("searchHistory","#srchfrm").all({shfc:i,shUrl:u.SpartanFetchSearchHistoryUrl,manageHistory:{manageURL:u.SpartanManageHistoryUrl.format(i)},useEval:!1,captureTTSH:!0,addAriaLabelToItems:!0,processItemUrl:f.processItemUrl}))}return{initialize:s}});require(["searchHistoryNonEdgeNtp"],function(n){n.initialize()});require(["searchHistoryHelper"],function(n){n.setup({addEduParams:!0})});g_ashsC=g_ashsC||{};g_hsSetup=function(){};define("autoSuggestSnR",["jquery","jqBehavior","pageInstance","trackInfo","mediator","getCookie","setCookie","format","track","location","window","document","headData","perfMarker"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){function b(t,o){function w(n,t){return typeof n=="string"&&(!t||n.length>=t)}function g(n){return typeof n!="undefined"}function ut(){var n=new RegExp("\\b"+it+"=0\\b","i");return f(tt).match(n)}function ft(){var i=at(),n=l.createElement("script"),t;n.src=i;n.onload=et;t=l.getElementsByTagName("head")[0];t.appendChild(n)}function et(){o.delayBind<2&&v("TimeToFirstSearchAvailable",!0)}function ot(){var n=ut();return g(c[p])?(c[p].enable(!n),ct(),1):t[0]&&h[0]&&!n?(o.delayBind==2&&(k=1),ft(),1):0}function st(){return w(f("_SS"),5)||e("_SS","SID=00",365,o.cookieDomain,"/"),1}function nt(t,i){t==0?i():t==1?n(l).ready(i):t==2&&ht(i)}function ht(n){var t=".asue";h.bind("click"+t,function(){n()&&h.unbind(t)}).bind("keyup"+t,function(i){i.which!=27&&i.which!=9&&n()&&h.unbind(t)})}function ct(){var t,r,i,u;d||(t=w(b.cn,1)?b.cn.split("+"):null,t&&w(t[0],1)&&(r=f(t[0]),w(r,4)&&(i=r.match(/SID=[\d(A-Z(a-z)]+/),i&&w(i[0],5)&&(d=i[0].substr(4)))));g(c[p])&&(u="sid",n.isFunction(c[p][u])&&c[p][u](d),k&&(k=0,l.activeElement==h[0]&&h.click()))}function lt(){var i=t[0],n=i&&i.action&&i.action.indexOf("://")>=0?i.action:"",r;n&&(r=(n.indexOf("?")!==-1?"&":"?")+"msnst=AS",n=n+r);s.trackEvent({type:"submit",target:t[0]},null,n,h.val())}function at(){return vt()}function vt(){var t=a.locale||"en-us",u=i.getActivityId()||r.sitePage.requestId,n="{0}://www.bing.com/as/init?mkt={1}&pt={2}&refig={3}".format(y,t,o.partnerEndpoint,u);return o.delayBind<2&&(n+="&onload=1"),t.toLowerCase()!="en-us"&&(n+="&endpt=1"),n}var tt="SRCHHPGUSR",it="AS",p="sa_inst",b=o.sharedCk,k=0,d,h=n("#"+o.inputId,t),rt;u.sub("autosuggestPreventSubmit",function(){rt=!1});nt(o.delayBind,ot);nt(b.delay,function(){return st()});t.on("ASSugClicked",lt)}var y="https",w={formId:"srchfrm",inputId:"q",featureType:1,cookieExpiry:365,cookieDomain:"msn.com",partnerEndpointValue:"iceprime_homepage",sharedCk:{delay:1,ru:y+"://"+h.host+"/sck.aspx&form=MSN005",pu:y+"://www.bing.com/sck",cn:"_SS",domain:"msn.com"}},p=t(b,w);return p.resize=function(n){c.sa_inst&&c.sa_inst.autosuggest.setQuery(n.val())},p});require(["binding","c.deferred"],function(n){var t="2",i;t=t.length?t:2;i="iceprime_homepage";i="msnie11ntp";n("autoSuggestSnR","#srchfrm").all({delayBind:t,partnerEndpoint:i})});require(["document","c.pageComplete"],function(n){var t=n.body.querySelector("#spfooter");t&&(t.style.visibility="visible")});define("coachMarks",["document","mediator","webStorage","getCookie","setCookie","window","track","trackInfo","promise"],function(n,t,i,r,u,f,e,o,s){function fr(){(h=n.getElementById(gi),h)&&(w=n.getElementById(rr),a=n.getElementById(yt),l=n.getElementById(ir),p=i.getObject(ei)||{},ki(),a&&a.addEventListener(y,b),ht=r(fi)||"",t.pub(ai))}function er(n,t,i,r,u){var o,f,s=10,h,c=t.left+t.width/2,l=Math.max(c-i.width/2,n.left),a=n.right-i.width,e;return f=Math.min(l,a),h=u===k.Above?t.top-i.height-s:t.bottom+s,e=r*Math.sqrt(2)/2,o=i.width>t.width?Math.abs(f-t.left)+t.width/2-e:i.width/2-e,{arrowPosition:o,leftPosition:f,topPosition:h}}function pi(n,t){if(v)return!1;if(t<0)return!0;var i=p[n];return p[n]===ct||or(n)?!1:typeof i=="number"?i<t:!0}function or(n){return ht.indexOf(n)!==-1}function dt(n){try{return JSON.parse(n.getAttribute(ui))}catch(t){return null}}function sr(){return h}function wi(n){return n[c.Id]||null}function hr(){return l}function cr(t){var i=t&&t[c.ReferenceElement];if(i&&!di(t))return n.querySelector(i)}function b(t,i){h&&v&&(v=!1,et=new s(function(r){h.addEventListener(ot,function u(o){o.stopPropagation();h.removeEventListener(ot,u);h.classList.add(pt);h.removeAttribute("style");t&&t.target&&t.target.id!==yt&&e.trackEvent({type:ri,target:t.target},"","",li);rt&&a.removeEventListener(y,rt);bt=null;wt=null;f.removeEventListener(hi,at);f.removeEventListener(ci,at);n.removeEventListener(y,b);r();g(i)});h.classList.add(it)}))}function bi(n,t){h&&w&&(v=!1,et=new s(function(i){w.addEventListener(ot,function r(u){u.stopPropagation();w.removeEventListener(ot,r);n&&n.target&&e.trackEvent({type:ri,target:n.target},"","",li);i();g(t)});w.classList.add(it)}))}function lr(t,i,r,u){var e=t+r,o=i+u;return e>=0&&o>=0&&e<=(f.innerHeight||n.documentElement.clientHeight)&&o<=(f.innerWidth||n.documentElement.clientWidth)}function ki(){var t=n.querySelectorAll("["+ui+"]"),i,r,u,f;if(t&&t.length)for(i=0;i<t.length;i++)(r=t[i],u=dt(r),u)&&(f=wi(u),f&&(ut[f]=r))}function lt(t,i){var u;if(d=!0,t=bt||t,i=wt||i,i==k.Overlay)return d=!1,!0;if(!t)return d=!1,!1;u="px";vt=vt||n.getElementById("maincontent")||n.body;nt=nt||h.querySelector("div.arrow");var e=t.getBoundingClientRect(),f=h.getBoundingClientRect(),o=vt.getBoundingClientRect(),s=nt&&nt.offsetWidth,r=er(o,e,f,s,i);return h.style.left=r.leftPosition+u,h.style.top=r.topPosition+u,nt.style.left=r.arrowPosition+u,d=!1,lr(r.topPosition,r.leftPosition,f.height,f.width)}function at(){d||requestAnimationFrame(lt)}function ar(n,i,r,f,e){var l,s,p;ut[n]&&pi(n,e)&&(l=ut[n],s=dt(l),s)&&(p=ii(s),p)&&(v=!0,st.then(function(){if(r)h.className=pt,v=!1;else{f=f||l;var p=s[c.Position],w=lt(f,p);w?ti(f,p):v=!1}i&&o.updateTemplValue(i+(r?":0":":1"));t.pub("ViewabilityUpdatedEvent");e&&e!==1?e>1&&(dr(n,e),ht+=","+n,u(fi,ht,0,u.topDomain,"/"),rt=function(){ni(n)},a&&a.addEventListener(y,rt)):ni(n)}))}function vr(i,r,u,f,e,o,s){if(!i){g(u);return}var h=function(){var h=n.querySelector(i[c.ReferenceElement]||"#maincontent"),l,y,a,p;if(!kr(h)){g(u);return}if(l=r?!0:!1,l&&(i[c.PaginationText]=r),y=ii(i,l,f,o),!y){g(u);return}a=i[c.Position];lt(h,a);p=ft?function(){br(!0,u,s)}:function(){ti(h,a,!0,u,e,s)};v=!0;st.then(function(){p();t.pub("ViewabilityUpdatedEvent")})};v&&b();et?et.then(h):h()}function gt(){i.setObject(ei,p)}function ni(n){p[n]!==ct&&(p[n]=ct,gt())}function yr(n){n.keyCode===9&&(l.focus(),n.preventDefault())}function pr(n,t){n.keyCode===27&&b(n,t)}function wr(n){l&&n.keyCode===9&&(a.focus(),n.preventDefault())}function ti(t,i,r,u,e,o){bt=t;wt=i;i!==k.Overlay&&(f.addEventListener(hi,at),f.addEventListener(ci,at));r?(l&&l.addEventListener(y,function s(t){n.activeElement.blur();this.removeEventListener(y,s);var i=o?function(){bi(t,u)}:function(){b(t,u)};ft=o;i()}),a&&a.addEventListener(y,function c(){n.activeElement.blur();this.removeEventListener(y,c);g(e)}),l&&l.addEventListener(kt,wr),a&&a.addEventListener(kt,yr),h&&h.addEventListener(kt,function(n){pr(n,e)})):vi||n.addEventListener(y,b);h.classList.remove(pt);h.classList.remove(it);h.classList.add(ur);l&&l.focus()}function br(t,i,r){t&&l&&l.addEventListener(y,function u(t){n.activeElement.blur();this.removeEventListener(y,u);var f=r?function(){bi(t,i)}:function(){b(t,i)};ft=r;f()});w.classList.remove(it);l&&l.focus()}function di(n){return n&&n[c.Position]===k.Overlay}function kr(n){if(!n)return!1;var t=f.getComputedStyle(n);return t.display!=="none"&&t.visibility==="visible"}function g(n){typeof n=="function"&&n()}function ii(t,i,r,u){var f,y;if(t&&t[c.Title]&&t[c.Description]&&h){var p=t[c.Id],b=t[c.Size],k=t[c.Position],d=t[c.Title],o=t[c.Description],a=t[c.ImageUrl],g=t[c.PaginationText],v=t[c.ActionButtonText],e=[];return e.push(b),e.push(k),ft||e.push(it),u&&e.push(u),h.getElementsByTagName("h2")[0].innerText=d,h.getElementsByTagName("span")[0].innerHTML=o,f=h.getElementsByTagName("img")[0],a?(f||(f=n.createElement("img"),w.insertBefore(f,w.firstChild)),f.setAttribute("src",a),f.setAttribute("alt",a&&o?o:""),st=new s(function(n){f.addEventListener(si,function t(){f.removeEventListener(si,t);n()});f.addEventListener(oi,function i(){f.removeEventListener(oi,i);n()})})):(f&&f.remove(),st=s.resolve()),y=h.getElementsByClassName("pagination")[0],y&&i&&(e.push(tr),y.getElementsByTagName("span")[0].innerText=g,l&&v&&(l.setAttribute("title",v),l.innerText=v),r&&e.push(nr)),yi&&gr(p),h.className=e.join(" "),!0}}function dr(n,t){var i=p[n]||0;typeof i=="number"?(i++,i===t?ni(n):(p[n]=i,gt())):i!==ct&&(p[n]=0,gt())}function gr(n){var t;if(n){var r="data-m",u="data-dtn",f=h.getAttribute(r),i=h.getAttribute(u);if(f)try{t=JSON.parse(f);t&&t.n&&(i||(i=t.n,h.setAttribute(u,i)),t.n=i+"_"+n,h.setAttribute(r,JSON.stringify(t)))}catch(o){e.trackAppErrorEvent(errorCategory.updateTrackingInfo)}}}function nu(n,t,i,r,u,f,e,o,s){return!t&&!s?null:{abt:n,d:t,i:r,id:i,p:u,pt:f,re:e,s:o,t:s}}function tu(n){return n&&(n===k.Above||n===k.Below||n===k.Overlay)?!0:!1}function iu(n){return n&&(n===tt.Medium||n===tt.Small||n===tt.Large||n===tt.ExtraLarge||n===tt.Overlay)?!0:!1}var vt,ri="click_nonnav",rt,nt,ui="data-coachmark",c={ActionButtonText:"abt",Description:"d",Id:"id",ImageUrl:"i",PaginationText:"pt",Position:"p",ReferenceElement:"re",Size:"s",Title:"t"},h,gi="coachmark",a,yt="coachmark_close",pt="hidden",nr="lastpage",fi="cmdisp",v=!1,ut={},ft=!1,tr="paginated",ir="coachmark_cta",l,k={Above:"above",Below:"below",Overlay:"overlay"},tt={ExtraLarge:"extralarge",Large:"large",Medium:"medium",Overlay:"overlay",Small:"small"},p={},ei="cm-view-states",w,rr="cm_content",wt,bt,et,y="click",oi="error",kt="keydown",si="load",hi="resize",ci="scroll",ot="transitionend",st,d=!1,ht,li="coachmark_close_soft",ur="trans",ct="d",it="invisible",ai="coachmark_map_initialized",vi=!1,yi=!0;return{canRenderCoachMark:pi,coachMarkInitEvent:ai,coachMarkInUse:v,coachMarkAttributeKeys:c,coachMarkMap:ut,createCoachMarkAttibuteObject:nu,displayCoachMarkContainer:ti,getCoachMarkAttributes:dt,getCoachMarkContainer:sr,getCoachMarkPaginationCtaButton:hr,getCoachMarkId:wi,getReferenceElement:cr,hideCoachMarkContainer:b,initialize:fr,isOverlayCoachMark:di,mapCoachMarkIdsToElements:ki,positionCoachMark:lt,positionIsValid:tu,renderCoachMark:ar,renderPaginatedCoachMark:vr,setCoachMarkInUse:function(n){v=n},setCoachMarkContainer:function(n){h=n},setCoachMarkCloseButtonId:function(n){yt=n},setKeepOpenOnClick:function(n){vi=n},setRepositionRunning:function(n){d=n},setUpdateTelemetry:function(n){yi=n},sizeIsValid:iu,tryUpdateCoachMarkContainer:ii}});require(["coachMarks","c.deferred"],function(n){n.initialize()});define("userProfileCookieConsentHelper",["document","cookieComplianceHelper","c.dom"],function(n,t){return function(){function u(n){i&&i.removeEventListener(r,u);t.grantCookieConsentAndDecorateLink(n,null,!0)}var i=n.getElementById("user-profile"),r="click";i&&i.addEventListener(r,u)}});require(["userProfileCookieConsentHelper"],function(n){n()});define("spartanHeader",["document","browserAccess","spartanHeaderHelper","cookieComplianceHelper","viewport","pixelToRem","spartanPageDetectionHelper","perfMarker","headData","requestAnimationFrame","c.dom"],function(n,t,i,r){function a(){v();y()}function e(n){u&&u.removeEventListener(s,h);f&&f.removeEventListener(o,e);r.grantCookieConsentAndDecorateLink(n,null,!0)}function h(n){var t=n.keyCode;t!==9&&t!==27&&e(n)}function v(){u&&u.addEventListener(s,h);f&&f.addEventListener(o,e)}function y(){l&&c&&!t.features.OneBoxPinnedByDefault&&t.pinOneBox(!1,!1)}var c=i.isOneBoxPinned(),l=t.features.CanRenderHtmlHeader,p=i.isFocusShiftToWebContent(),w=i.shouldFocusShiftToWebContent(),u=n.getElementById("q"),f=n.getElementById("sb_form_go"),o="click",s="keydown";return{setup:a}});require(["spartanHeader"],function(n){n.setup()});define("addEduSkuSearchFormElements",["jquery","eduSkuHtmlSearchProperties","format","spartanPageDetectionHelper","c.pageComplete"],function(n,t,i,r){return function(n){if(n.length){var i="",u=t.partnerSearchCode;u&&!r.isIeNtpPage&&(i+='<input name="PC" type="hidden" value="{0}">'.format(u));t.isEnableRegulatoryPsm&&(i+='<input name="DAF0" type="hidden" value="1">');t.isEnableCpsm&&(i+='<input name="DAF1" type="hidden" value="1">');i&&n.append(i)}}});define("updateSpartanSearchFormCode",["jquery","getSpartanSearchFormCode","mediator","spartanPageDetectionHelper"],function(n,t,i,r){function f(){var t=n("#srchfrm");t.length&&u(t)}function u(n){var i=t(!0);n.attr("data-form-code",i);n.find('input[name="form"]').val(i)}return r.isIeNtpPage||i.sub("updatesearchformcodes",f),{updateSearchFormCodeAttribute:u}});define("updateSpartanSearchFormElements",["jqBehavior","addEduSkuSearchFormElements","updateSpartanSearchFormCode","spartanPageDetectionHelper","c.pageComplete"],function(n,t,i,r){function u(n){n.length&&(r.isIeNtpPage||i.updateSearchFormCodeAttribute(n),r.isExtNtpPage||r.isShoppingExtNtpPage||r.isMicrosoftNewsExtNtp||t(n))}return n(u)});require(["binding"],function(n){n("updateSpartanSearchFormElements","#srchfrm").all()});define("keypressCapture",["jquery","jqBehavior","mediator","perfMarker","window","document"],function(n,t,i,r,u,f){function s(t,u){function a(){h=!0}function v(){h||n(this).focus()}function c(t){t.charCode>32&&t.charCode<=126&&n(t.target).is(l)&&s.focus()}var s=n(u.focusSelector),l=":not(input,textarea,select,{selector})".replace("{selector}",u.focusSelector),h=!1,f;o.one("focusin mousedown touchstart",a);s.one("keypress",v);return f={setup:function(){t.on("keypress",c);e||(e=!0,r("TimeToFirstSearchInteractive",!0))},teardown:function(){t.off("keypress",c)}},i.sub("feedback.open",f.teardown),i.sub("feedback.close",f.setup),f}var o=n(f),e;return t(s,{focusSelector:""})});require(["binding","c.dom"],function(n){n("keypressCapture","body").all({focusSelector:"#q"})});define("sso",["window","headData","getCookie"],function(n,t,i){var r="sso_completed";return function(u,f){var v,o,e,s,c,h,l,a,y;if(t=t||{},v=t.clientSettings||{},!n.mscc||n.mscc.hasConsent()){if(u=u||function(){},o=t.sso,!o||v.static_page||i("eso")=="1"){u({signedIn:!1,closed:!1});return}o=o.replace(/amp;/g,"&");f=f||n;e=f.document.createElement("IFRAME");e.id="sso_frame";e.style.width="1px";e.style.height="1px";e.style.position="absolute";e.style.visibility="hidden";e.style.left="0";e.style.bottom="0";e.src=o;f.document.body.appendChild(e);s=null;c=function(n){var t=n.data;t&&(t.ssoStatus===r||t.ssoStatus==="sso_failed")&&(s=t.ssoStatus,define("ssoData",t))};f.addEventListener?(h="message",f.addEventListener(h,c,!1),l=f.removeEventListener):(h="onmessage",f.attachEvent(h,c),l=f.detachEvent);a=0;y=f.setInterval(function(){if(s||a>=5){var n={signedIn:s===r,closed:!!s};f.clearInterval(y);l.call(f,h,c);f.document.body.removeChild(e);u(n);n.signedIn&&(t.anonckname="anon",t.ssocomplete=!0,define("c.sso",t.signedin=1))}else a++},1e3)}}});require(["sso","c.pageComplete"],function(n){n(function(n){define("ssoResult",n)})});define("appCacheHelper",["window","document","spartanSharedHelper","getCookie","setCookie","webStorage","navigator","track","errorCategory","browserAccess"],function(n,t,i,r,u,f,e,o,s,h){function ut(n){if(!c||c.status===c.UNCACHED){v(k,n||s.achForceUpdateUnCachedState);return}d=n;f.removeItem(l);u(y,"1",1,u.topDomain,"/");c.update()}function ft(){f.getItem(l)==="1"&&nt();c&&(c.onupdateready=a,c.onnoupdate=a,c.onerror=a,c.oncached=a,c.onobsolete=ot);a(null,!0);e.onLine||et()}function et(){n.addEventListener(rt,function(){v(!1,s.achOnlineHandler)});g(!0)}function g(n){require(["c.dom"],function(){var i=t.body.querySelector(it);i&&(i.style.display=n?"block":"none")})}function a(n,t){var i,r,h,u,e;if(t||at(),n&&n.type==="error"&&o.trackAppErrorEvent(s.appCacheOnErrorStatus),i=c&&c.status,c&&i!==c.IDLE&&i!==c.OBSOLETE&&i!==c.UNCACHED){if(i===c.UPDATEREADY){if(st())return;if(r=ht(),w(),h=!1,!r&&h)return;ct();u=f.getItem(b);e=Date.now();r||!u||Math.abs(e-u)>tt?(f.setItem(b,e),v(k,d||s.achCheckStatus)):o.trackAppErrorEvent(s.appCacheRapidRefreshError)}}else nt(),w(),lt()}function ot(){w();o.trackAppErrorEvent(s.appCacheOnObsoleteStatus);setTimeout(function(){v(!1,s.achOnObSolete)},0)}function st(){var n=f.getItem(l)==="1";return n?(f.removeItem(l),!0):!1}function ht(){return r(y)==="1"?(f.setItem(l,"1"),!0):!1}function v(n,t){g(!1);i.refreshPage(n,t)}function w(){u(y,"0",-1,u.topDomain,"/")}function nt(){define("c.appCacheUpdateCheckDone",1)}function ct(){f.setItem(p,"1")}function lt(){var n=f.getItem(p)==="1";n?f.removeItem(p):define("c.readyForRum",1)}function at(){t.querySelector("html[manifest]")&&c.status===c.OBSOLETE&&o.trackAppErrorEvent({errId:s.applicationCacheUnhealthyState.errId,errMsg:s.applicationCacheUnhealthyState.errMsg+c.status,errSource:s.applicationCacheUnhealthyState.errSource})}var c=n.applicationCache,tt=3e3,y="fu",b="lastPageRefreshDueToAppCache",it="#dnserror_dhp_ntp_offline",p="supressRum",l="wasForceUpdated",rt="online",k=h.features.AppCacheForceRefreshFromServer,d;return ft(),{forceUpdate:ut}})